
if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var f=dojo.doc;if(f.selection){var b=f.selection;if(b.type=="Text"){return!b.createRange().htmlText.length}else{return!b.createRange().length}}else{var d=dojo.global;var a=d.getSelection();if(dojo.isString(a)){return!a}else{return!a||a.isCollapsed||!a.toString()}}},getBookmark:function(){var g,d=dojo.doc.selection;if(d){var b=d.createRange();if(d.type.toUpperCase()=="CONTROL"){if(b.length){g=[];var f=0,a=b.length;while(f<a){g.push(b.item(f++))}}else{g=null}}else{g=b.getBookmark()}}else{if(window.getSelection){d=dojo.global.getSelection();if(d){b=d.getRangeAt(0);g=b.cloneRange()}}else{console.warn("No idea how to store the current selection for this browser!")}}return g},moveToBookmark:function(f){var d=dojo.doc;if(d.selection){var b;if(dojo.isArray(f)){b=d.body.createControlRange();dojo.forEach(f,function(g){b.addElement(g)})}else{b=d.selection.createRange();b.moveToBookmark(f)}b.select()}else{var a=dojo.global.getSelection&&dojo.global.getSelection();if(a&&a.removeAllRanges){a.removeAllRanges();a.addRange(f)}else{console.warn("No idea how to restore selection for this browser!")}}},getFocus:function(b,a){return{node:b&&dojo.isDescendant(dijit._curFocus,b.domNode)?dijit._prevFocus:dijit._curFocus,bookmark:!dojo.withGlobal(a||dojo.global,dijit.isCollapsed)?dojo.withGlobal(a||dojo.global,dijit.getBookmark):null,openedForWindow:a}},focus:function(h){if(!h){return}var g="node"in h?h.node:h,d=h.bookmark,b=h.openedForWindow;if(g){var a=(g.tagName.toLowerCase()=="iframe")?g.contentWindow:g;if(a&&a.focus){try{a.focus()}catch(f){}}dijit._onFocusNode(g)}if(d&&dojo.withGlobal(b||dojo.global,dijit.isCollapsed)){if(b){b.focus()}try{dojo.withGlobal(b||dojo.global,dijit.moveToBookmark,null,[d])}catch(f){}}},_activeStack:[],registerIframe:function(a){dijit.registerWin(a.contentWindow,a)},registerWin:function(b,a){dojo.connect(b.document,"onmousedown",function(f){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dijit._onTouchNode(a||f.target||f.srcElement)});var d=b.document;if(d){if(dojo.isIE){d.attachEvent("onactivate",function(f){if(f.srcElement.tagName.toLowerCase()!="#document"){dijit._onFocusNode(a||f.srcElement)}});d.attachEvent("ondeactivate",function(f){dijit._onBlurNode(a||f.srcElement)})}else{d.addEventListener("focus",function(f){dijit._onFocusNode(a||f.target)},true);d.addEventListener("blur",function(f){dijit._onBlurNode(a||f.target)},true)}}d=null},_onBlurNode:function(a){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer)}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)},_onTouchNode:function(b){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer}var a=[];try{while(b){if(b.dijitPopupParent){b=dijit.byId(b.dijitPopupParent).domNode}else{if(b.tagName&&b.tagName.toLowerCase()=="body"){if(b===dojo.body()){break}b=dijit.getDocumentWindow(b.ownerDocument).frameElement}else{var f=b.getAttribute&&b.getAttribute("widgetId");if(f){a.unshift(f)}b=b.parentNode}}}}catch(d){}dijit._setStack(a)},_onFocusNode:function(a){if(!a){return}if(a.nodeType==9){return}dijit._onTouchNode(a);if(a==dijit._curFocus){return}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus}dijit._curFocus=a;dojo.publish("focusNode",[a])},_setStack:function(g){var f=dijit._activeStack;dijit._activeStack=g;for(var d=0;d<Math.min(f.length,g.length);d++){if(f[d]!=g[d]){break}}for(var b=f.length-1;b>=d;b--){var a=dijit.byId(f[b]);if(a){a._focused=false;a._hasBeenBlurred=true;if(a._onBlur){a._onBlur()}if(a._setStateClass){a._setStateClass()}dojo.publish("widgetBlur",[a])}}for(b=d;b<g.length;b++){a=dijit.byId(g[b]);if(a){a._focused=true;if(a._onFocus){a._onFocus()}if(a._setStateClass){a._setStateClass()}dojo.publish("widgetFocus",[a])}}}});dojo.addOnLoad(function(){dijit.registerWin(window)})}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={}},add:function(a){if(this._hash[a.id]){throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered")}this._hash[a.id]=a},remove:function(a){delete this._hash[a]},forEach:function(a){for(var b in this._hash){a(this._hash[b])}},filter:function(b){var a=new dijit.WidgetSet();this.forEach(function(d){if(b(d)){a.add(d)}});return a},byId:function(a){return this._hash[a]},byClass:function(a){return this.filter(function(b){return b.declaredClass==a})}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(a){var b;do{b=a+"_"+(a in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[a]:dijit._widgetTypeCtr[a]=0)}while(dijit.byId(b));return b};dijit.findWidgets=function(d){var b=[];function a(j){var g=dojo.isIE?j.children:j.childNodes,f=0,l;while(l=g[f++]){if(l.nodeType!=1){continue}var k=l.getAttribute("widgetId");if(k){var h=dijit.byId(k);b.push(h)}else{a(l)}}}a(d);return b};if(dojo.isIE){dojo.addOnWindowUnload(function(){dojo.forEach(dijit.findWidgets(dojo.body()),function(a){if(a.destroyRecursive){a.destroyRecursive()}else{if(a.destroy){a.destroy()}}})})}dijit.byId=function(a){return(dojo.isString(a))?dijit.registry.byId(a):a};dijit.byNode=function(a){return dijit.registry.byId(a.getAttribute("widgetId"))};dijit.getEnclosingWidget=function(a){while(a){if(a.getAttribute&&a.getAttribute("widgetId")){return dijit.registry.byId(a.getAttribute("widgetId"))}a=a.parentNode}return null};dijit._tabElements={area:true,button:true,input:true,object:true,select:true,textarea:true};dijit._isElementShown=function(b){var a=dojo.style(b);return(a.visibility!="hidden")&&(a.visibility!="collapsed")&&(a.display!="none")&&(dojo.attr(b,"type")!="hidden")};dijit.isTabNavigable=function(b){if(dojo.hasAttr(b,"disabled")){return false}var a=dojo.hasAttr(b,"tabindex");var f=dojo.attr(b,"tabindex");if(a&&f>=0){return true}var d=b.nodeName.toLowerCase();if(((d=="a"&&dojo.hasAttr(b,"href"))||dijit._tabElements[d])&&(!a||f>=0)){return true}return false};dijit._getTabNavigable=function(h){var f,a,j,i,g,d;var b=function(k){dojo.query("> *",k).forEach(function(n){var m=dijit._isElementShown(n);if(m&&dijit.isTabNavigable(n)){var l=dojo.attr(n,"tabindex");if(!dojo.hasAttr(n,"tabindex")||l==0){if(!f){f=n}a=n}else{if(l>0){if(!j||l<i){i=l;j=n}if(!g||l>=d){d=l;g=n}}}}if(m&&n.nodeName.toUpperCase()!="SELECT"){b(n)}})};if(dijit._isElementShown(h)){b(h)}return{first:f,last:a,lowest:j,highest:g}};dijit.getFirstInTabbingOrder=function(b){var a=dijit._getTabNavigable(dojo.byId(b));return a.lowest?a.lowest:a.first};dijit.getLastInTabbingOrder=function(b){var a=dijit._getTabNavigable(dojo.byId(b));return a.last?a.last:a.highest};dijit.defaultDuration=dojo.config.defaultDuration||200}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(a){this.pairs=[];this.returnWrappers=a||false};dojo.extend(dojo.AdapterRegistry,{register:function(f,d,b,a,g){this.pairs[((g)?"unshift":"push")]([f,d,b,a])},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments)){if((b[3])||(this.returnWrappers)){return b[2]}else{return b[2].apply(this,arguments)}}}throw new Error("No match found")},unregister:function(d){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[0]==d){this.pairs.splice(a,1);return true}}return false}})}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var b=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var a=dojo._docScroll();return{w:b.clientWidth,h:b.clientHeight,l:a.x,t:a.y}};dijit.placeOnScreen=function(f,g,d,b){var a=dojo.map(d,function(h){var i={corner:h,pos:{x:g.x,y:g.y}};if(b){i.pos.x+=h.charAt(1)=="L"?b.x:-b.x;i.pos.y+=h.charAt(0)=="T"?b.y:-b.y}return i});return dijit._place(f,a)};dijit._place=function(f,d,b){var g=dijit.getViewport();if(!f.parentNode||String(f.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(f)}var a=null;dojo.some(d,function(t){var s=t.corner;var u=t.pos;if(b){b(f,t.aroundCorner,s)}var p=f.style;var n=p.display;var l=p.visibility;p.visibility="hidden";p.display="";var v=dojo.marginBox(f);p.display=n;p.visibility=l;var i=(s.charAt(1)=="L"?u.x:Math.max(g.l,u.x-v.w)),h=(s.charAt(0)=="T"?u.y:Math.max(g.t,u.y-v.h)),q=(s.charAt(1)=="L"?Math.min(g.l+g.w,i+v.w):u.x),o=(s.charAt(0)=="T"?Math.min(g.t+g.h,h+v.h):u.y),m=q-i,k=o-h,j=(v.w-m)+(v.h-k);if(a==null||j<a.overflow){a={corner:s,aroundCorner:t.aroundCorner,x:i,y:h,w:m,h:k,overflow:j}}return!j});f.style.left=a.x+"px";f.style.top=a.y+"px";if(a.overflow&&b){b(f,a.aroundCorner,a.corner)}return a};dijit.placeOnScreenAroundNode=function(d,f,b,a){f=dojo.byId(f);var j=f.style.display;f.style.display="";var i=f.offsetWidth;var h=f.offsetHeight;var g=dojo.coords(f,true);f.style.display=j;return dijit._placeOnScreenAroundRect(d,g.x,g.y,i,h,b,a)};dijit.placeOnScreenAroundRectangle=function(d,b,a,f){return dijit._placeOnScreenAroundRect(d,b.x,b.y,b.width,b.height,a,f)};dijit._placeOnScreenAroundRect=function(k,j,f,i,h,g,d){var b=[];for(var a in g){b.push({aroundCorner:a,corner:g[a],pos:{x:j+(a.charAt(1)=="L"?0:i),y:f+(a.charAt(0)=="T"?0:h)}})}return dijit._place(k,b,d)};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(b,a){return typeof a=="object"&&typeof a.offsetWidth!="undefined"&&typeof a.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(b,a){return typeof a=="object"&&"x"in a&&"y"in a&&"width"in a&&"height"in a},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(b,a,f,d){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(b){if(dojo.isIE&&window!==document.parentWindow&&!b._parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b._parentWindow||b.parentWindow||b.defaultView}}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var b=[],a=1000,d=1;this.prepare=function(g){var f=g.style;f.visibility="hidden";f.position="absolute";f.top="-9999px";if(f.display=="none"){f.display=""}dojo.body().appendChild(g)};this.open=function(n){var m=n.popup,k=n.orient||{BL:"TL",TL:"BL"},i=n.around,f=(n.around&&n.around.id)?(n.around.id+"_dropdown"):("popup_"+d++);var g=dojo.create("div",{id:f,"class":"dijitPopup",style:{zIndex:a+b.length,visibility:"hidden"}},dojo.body());dijit.setWaiRole(g,"presentation");g.style.left=g.style.top="0px";if(n.parent){g.dijitPopupParent=n.parent.id}var p=m.domNode.style;p.display="";p.visibility="";p.position="";p.top="0px";g.appendChild(m.domNode);var o=new dijit.BackgroundIframe(g);var l=i?dijit.placeOnScreenAroundElement(g,i,k,m.orient?dojo.hitch(m,"orient"):null):dijit.placeOnScreen(g,n,k=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],n.padding);g.style.visibility="visible";var j=[];var h=function(){for(var q=b.length-1;q>0&&b[q].parent===b[q-1].widget;q--){}return b[q]};j.push(dojo.connect(g,"onkeypress",this,function(q){if(q.charOrCode==dojo.keys.ESCAPE&&n.onCancel){dojo.stopEvent(q);n.onCancel()}else{if(q.charOrCode===dojo.keys.TAB){dojo.stopEvent(q);var s=h();if(s&&s.onCancel){s.onCancel()}}}}));if(m.onCancel){j.push(dojo.connect(m,"onCancel",null,n.onCancel))}j.push(dojo.connect(m,m.onExecute?"onExecute":"onChange",null,function(){var q=h();if(q&&q.onExecute){q.onExecute()}}));b.push({wrapper:g,iframe:o,widget:m,parent:n.parent,onExecute:n.onExecute,onCancel:n.onCancel,onClose:n.onClose,handlers:j});if(m.onOpen){m.onOpen(l)}return l};this.close=function(j){while(dojo.some(b,function(l){return l.widget==j})){var k=b.pop(),i=k.wrapper,h=k.iframe,g=k.widget,f=k.onClose;if(g.onClose){g.onClose()}dojo.forEach(k.handlers,dojo.disconnect);if(!g||!g.domNode){return}this.prepare(g.domNode);h.destroy();dojo.destroy(i);if(f){f()}}}}();dijit._frames=new function(){var a=[];this.pop=function(){var f;if(a.length){f=a.pop();f.style.display=""}else{if(dojo.isIE){var d=dojo.config.dojoBlankHtmlUrl||(dojo.moduleUrl("dojo","resources/blank.html")+"")||'javascript:""';var b="<iframe src='"+d+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";f=dojo.doc.createElement(b)}else{f=dojo.create("iframe");f.src='javascript:""';f.className="dijitBackgroundIframe"}f.tabIndex=-1;dojo.body().appendChild(f)}return f};this.push=function(b){b.style.display="none";if(dojo.isIE){b.style.removeExpression("width");b.style.removeExpression("height")}a.push(b)}}();dijit.BackgroundIframe=function(a){if(!a.id){throw new Error("no id")}if(dojo.isIE<7||(dojo.isFF<3&&dojo.hasClass(dojo.body(),"dijit_a11y"))){var b=dijit._frames.pop();a.appendChild(b);if(dojo.isIE){b.style.setExpression("width",dojo._scopeName+".doc.getElementById('"+a.id+"').offsetWidth");b.style.setExpression("height",dojo._scopeName+".doc.getElementById('"+a.id+"').offsetHeight")}this.iframe=b}};dojo.extend(dijit.BackgroundIframe,{destroy:function(){if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(j){try{j=dojo.byId(j);var I=dojo.doc;var i=dojo.body();var h=i.parentNode;if((!(dojo.isFF>=3||dojo.isIE||dojo.isWebKit)||j==i||j==h)&&(typeof j.scrollIntoView=="function")){j.scrollIntoView(false);return}var C=dojo._isBodyLtr();var f=dojo.isIE>=8&&!d;var k=!C&&!f;var b=i;var d=I.compatMode=="BackCompat";if(d){h._offsetWidth=h._clientWidth=i._offsetWidth=i.clientWidth;h._offsetHeight=h._clientHeight=i._offsetHeight=i.clientHeight}else{if(dojo.isWebKit){i._offsetWidth=i._clientWidth=h.clientWidth;i._offsetHeight=i._clientHeight=h.clientHeight}else{b=h}h._offsetHeight=h.clientHeight;h._offsetWidth=h.clientWidth}function a(J){var K=dojo.isIE;return((K<=6||(K>=7&&d))?false:(dojo.style(J,"position").toLowerCase()=="fixed"))}function g(N){var L=N.parentNode;var K=N.offsetParent;if(K==null||a(N)){K=h;L=(N==i)?h:null}N._offsetParent=K;N._parent=L;var O=dojo._getBorderExtents(N);N._borderStart={H:(f&&!C)?(O.w-O.l):O.l,V:O.t};N._borderSize={H:O.w,V:O.h};N._scrolledAmount={H:N.scrollLeft,V:N.scrollTop};N._offsetSize={H:N._offsetWidth||N.offsetWidth,V:N._offsetHeight||N.offsetHeight};N._offsetStart={H:(f&&!C)?K.clientWidth-N.offsetLeft-N._offsetSize.H:N.offsetLeft,V:N.offsetTop};N._clientSize={H:N._clientWidth||N.clientWidth,V:N._clientHeight||N.clientHeight};if(N!=i&&N!=h&&N!=j){for(var M in N._offsetSize){var J=N._offsetSize[M]-N._clientSize[M]-N._borderSize[M];var P=N._clientSize[M]>0&&J>0;if(P){N._offsetSize[M]-=J;if(dojo.isIE&&k&&M=="H"){N._offsetStart[M]+=J}}}}}var u=j;while(u!=null){if(a(u)){j.scrollIntoView(false);return}g(u);u=u._parent}if(dojo.isIE&&j._parent){var s=j._offsetParent;j._offsetStart.H+=s._borderStart.H;j._offsetStart.V+=s._borderStart.V}if(dojo.isIE>=7&&b==h&&k&&i._offsetStart&&i._offsetStart.H==0){var p=h.scrollWidth-h._offsetSize.H;if(p>0){i._offsetStart.H=-p}}if(dojo.isIE<=6&&!d){h._offsetSize.H+=h._borderSize.H;h._offsetSize.V+=h._borderSize.V}if(k&&i._offsetStart&&b==h&&h._scrolledAmount){var x=i._offsetStart.H;if(x<0){h._scrolledAmount.H+=x;i._offsetStart.H=0}}u=j;while(u){var m=u._parent;if(!m){break}if(m.tagName=="TD"){var l=m._parent._parent._parent;if(m!=u._offsetParent&&m._offsetParent!=u._offsetParent){m=l}}var v=u._offsetParent==m;for(var w in u._offsetStart){var t=w=="H"?"V":"H";if(k&&w=="H"&&(m!=h)&&(m!=i)&&(dojo.isIE||dojo.isWebKit)&&m._clientSize.H>0&&m.scrollWidth>m._clientSize.H){var q=m.scrollWidth-m._clientSize.H;if(q>0){m._scrolledAmount.H-=q}}if(m._offsetParent.tagName=="TABLE"){if(dojo.isIE){m._offsetStart[w]-=m._offsetParent._borderStart[w];m._borderStart[w]=m._borderSize[w]=0}else{m._offsetStart[w]+=m._offsetParent._borderStart[w]}}if(dojo.isIE){m._offsetStart[w]+=m._offsetParent._borderStart[w]}var o=u._offsetStart[w]-m._scrolledAmount[w]-(v?0:m._offsetStart[w])-m._borderStart[w];var n=o+u._offsetSize[w]-m._offsetSize[w]+m._borderSize[w];var H=(w=="H")?"scrollLeft":"scrollTop";var G=w=="H"&&k;var F=G?-n:o;var E=G?-o:n;var D=(F*E<=0)?0:Math[(F<0)?"max":"min"](F,E);if(D!=0){var B=m[H];m[H]+=(G)?-D:D;var A=m[H]-B}if(v){u._offsetStart[w]+=m._offsetStart[w]}u._offsetStart[w]-=m[H]}u._parent=m._parent;u._offsetParent=m._offsetParent}m=j;var z;while(m&&m.removeAttribute){z=m.parentNode;m.removeAttribute("_offsetParent");m.removeAttribute("_parent");m=z}}catch(y){console.error("scrollIntoView: "+y);j.scrollIntoView(false)}}}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var l=dojo,a=l.doc.documentElement,b=l.isIE,j=l.isOpera,k=Math.floor,g=l.isFF,i=l.boxModel.replace(/-/,""),f={dj_ie:b,dj_ie6:k(b)==6,dj_ie7:k(b)==7,dj_iequirks:b&&l.isQuirks,dj_opera:j,dj_opera8:k(j)==8,dj_opera9:k(j)==9,dj_khtml:l.isKhtml,dj_webkit:l.isWebKit,dj_safari:l.isSafari,dj_gecko:l.isMozilla,dj_ff2:k(g)==2,dj_ff3:k(g)==3};f["dj_"+i]=true;for(var h in f){if(f[h]){if(a.className){a.className+=" "+h}else{a.className=h}}}dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){a.className+=" dijitRtl";for(var d in f){if(f[d]){a.className+=" "+d+"-rtl"}}}})})()}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(b,f,d,a,g,i,h){if(g!=this._obj){this.stop();this._initialDelay=h||500;this._subsequentDelay=i||0.9;this._obj=g;this._evt=b;this._node=d;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(f,a);this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(f,b,a,h,g,d){if(b.keyCode){b.charOrCode=b.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}else{if(b.charCode){b.charOrCode=String.fromCharCode(b.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}}return[dojo.connect(f,"onkeypress",this,function(i){if(i.charOrCode==b.charOrCode&&(b.ctrlKey===undefined||b.ctrlKey==i.ctrlKey)&&(b.altKey===undefined||b.altKey==i.ctrlKey)&&(b.shiftKey===undefined||b.shiftKey==i.ctrlKey)){dojo.stopEvent(i);dijit.typematic.trigger(b,a,f,h,b,g,d)}else{if(dijit.typematic._obj==b){dijit.typematic.stop()}}}),dojo.connect(f,"onkeyup",this,function(i){if(dijit.typematic._obj==b){dijit.typematic.stop()}})]},addMouseListener:function(h,g,f,d,b){var a=dojo.connect;return[a(h,"mousedown",this,function(i){dojo.stopEvent(i);dijit.typematic.trigger(i,g,h,f,h,d,b)}),a(h,"mouseup",this,function(i){dojo.stopEvent(i);dijit.typematic.stop()}),a(h,"mouseout",this,function(i){dojo.stopEvent(i);dijit.typematic.stop()}),a(h,"mousemove",this,function(i){dojo.stopEvent(i)}),a(h,"dblclick",this,function(i){dojo.stopEvent(i);if(dojo.isIE){dijit.typematic.trigger(i,g,h,f,h,d,b);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(i,h,g,d,f,b,a){return this.addKeyListener(h,g,d,f,b,a).concat(this.addMouseListener(i,d,f,b,a))}}}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var f=dojo.create("div",{id:"a11yTestNode",style:{cssText:'border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+'");'}},dojo.body());var d=dojo.getComputedStyle(f);if(d){var b=d.backgroundImage;var a=(d.borderTopColor==d.borderRightColor)||(b!=null&&(b=="none"||b=="url(invalid-url:)"));dojo[a?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){f.outerHTML=""}else{dojo.body().removeChild(f)}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload)}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(a,d){var b=this.getWaiRole(a);return d?(b.indexOf(d)>-1):(b.length>0)},getWaiRole:function(a){return dojo.trim((dojo.attr(a,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""))},setWaiRole:function(b,g){var a=dojo.attr(b,"role")||"";if(dojo.isFF<3||!this._XhtmlRoles.test(a)){dojo.attr(b,"role",dojo.isFF<3?"wairole:"+g:g)}else{if((" "+a+" ").indexOf(" "+g+" ")<0){var f=dojo.trim(a.replace(this._XhtmlRoles,""));var d=dojo.trim(a.replace(f,""));dojo.attr(b,"role",d+(d?" ":"")+g)}}},removeWaiRole:function(b,g){var f=dojo.attr(b,"role");if(!f){return}if(g){var d=dojo.isFF<3?"wairole:"+g:g;var a=dojo.trim((" "+f+" ").replace(" "+d+" "," "));dojo.attr(b,"role",a)}else{b.removeAttribute("role")}},hasWaiState:function(b,a){if(dojo.isFF<3){return b.hasAttributeNS("http://www.w3.org/2005/07/aaa",a)}return b.hasAttribute?b.hasAttribute("aria-"+a):!!b.getAttribute("aria-"+a)},getWaiState:function(b,a){if(dojo.isFF<3){return b.getAttributeNS("http://www.w3.org/2005/07/aaa",a)}return b.getAttribute("aria-"+a)||""},setWaiState:function(d,b,a){if(dojo.isFF<3){d.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+b,a)}else{d.setAttribute("aria-"+b,a)}},removeWaiState:function(b,a){if(dojo.isFF<3){b.removeAttributeNS("http://www.w3.org/2005/07/aaa",a)}else{b.removeAttribute("aria-"+a)}}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"connect",function(b,a){if(b&&dojo.isFunction(b._onConnect)){b._onConnect(a)}});dijit._connectOnUseEventHandler=function(a){};(function(){var a={};var b=function(d){if(!a[d]){var h=[];var i;var g=dojo.getObject(d).prototype;for(var f in g){if(dojo.isFunction(g[f])&&(i=f.match(/^_set([a-zA-Z]*)Attr$/))&&i[1]){h.push(i[1].charAt(0).toLowerCase()+i[1].substr(1))}}a[d]=h}return a[d]||[]};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")),postscript:function(f,d){this.create(f,d)},create:function(h,g){this.srcNodeRef=dojo.byId(g);this._connects=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var d in this.attributeMap){delete this._deferredConnects[d]}for(d in this._deferredConnects){if(this[d]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[d]}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id}if(h){this.params=h;dojo.mixin(this,h)}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"))}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var f=this.srcNodeRef;if(f&&f.parentNode){f.parentNode.replaceChild(this.domNode,f)}for(d in this.params){this._onConnect(d)}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id)}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef}this._created=true},_applyAttributes:function(){var f=function(g,h){if((h.params&&g in h.params)||h[g]){h.attr(g,h[g])}};for(var d in this.attributeMap){f(d,this)}dojo.forEach(b(this.declaredClass),function(g){if(!(g in this.attributeMap)){f(g,this)}},this)},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div")},postCreate:function(){},startup:function(){this._started=true},destroyRecursive:function(d){this.destroyDescendants(d);this.destroy(d)},destroy:function(d){this.uninitialize();dojo.forEach(this._connects,function(f){dojo.forEach(f,dojo.disconnect)});dojo.forEach(this._supportingWidgets||[],function(f){if(f.destroy){f.destroy()}});this.destroyRendering(d);dijit.registry.remove(this.id)},destroyRendering:function(d){if(this.bgIframe){this.bgIframe.destroy(d);delete this.bgIframe}if(this.domNode){if(d){dojo.removeAttr(this.domNode,"widgetId")}else{dojo.destroy(this.domNode)}delete this.domNode}if(this.srcNodeRef){if(!d){dojo.destroy(this.srcNodeRef)}delete this.srcNodeRef}},destroyDescendants:function(d){dojo.forEach(this.getChildren(),function(f){if(f.destroyRecursive){f.destroyRecursive(d)}})},uninitialize:function(){return false},onFocus:function(){},onBlur:function(){},_onFocus:function(d){this.onFocus()},_onBlur:function(){this.onBlur()},_onConnect:function(f){if(f in this._deferredConnects){var d=this[this._deferredConnects[f]||"domNode"];this.connect(d,f.toLowerCase(),f);delete this._deferredConnects[f]}},_setClassAttr:function(f){var d=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(d,this["class"]);this["class"]=f;dojo.addClass(d,f)},_setStyleAttr:function(d){var f=this[this.attributeMap.style||"domNode"];if(dojo.isObject(d)){dojo.style(f,d)}else{if(f.style.cssText){f.style.cssText+="; "+d}else{f.style.cssText=d}}this["style"]=d},setAttribute:function(d,f){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(d,f)},_attrToDom:function(f,g){var d=this.attributeMap[f];dojo.forEach(dojo.isArray(d)?d:[d],function(j){var i=this[j.node||j||"domNode"];var h=j.type||"attribute";switch(h){case"attribute":if(dojo.isFunction(g)){g=dojo.hitch(this,g)}if(/^on[A-Z][a-zA-Z]*$/.test(f)){f=f.toLowerCase()}dojo.attr(i,f,g);break;case"innerHTML":i.innerHTML=g;break;case"class":dojo.removeClass(i,this[f]);dojo.addClass(i,g);break}},this);this[f]=g},attr:function(h,f){var g=arguments.length;if(g==1&&!dojo.isString(h)){for(var d in h){this.attr(d,h[d])}return this}var i=this._getAttrNames(h);if(g==2){if(this[i.s]){return this[i.s](f)||this}else{if(h in this.attributeMap){this._attrToDom(h,f)}this[h]=f}return this}else{if(this[i.g]){return this[i.g]()}else{return this[h]}}},_attrPairNames:{},_getAttrNames:function(g){var d=this._attrPairNames;if(d[g]){return d[g]}var f=g.charAt(0).toUpperCase()+g.substr(1);return d[g]={n:g+"Node",s:"_set"+f+"Attr",g:"_get"+f+"Attr"}},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){if(this.containerNode){var d=dojo.query("[widgetId]",this.containerNode);return d.map(dijit.byNode)}else{return[]}},getChildren:function(){if(this.containerNode){return dijit.findWidgets(this.containerNode)}else{return[]}},nodesWithKeyClick:["input","button"],connect:function(k,j,i){var l=dojo;var h=dojo.connect;var g=[];if(j=="ondijitclick"){if(!this.nodesWithKeyClick[k.nodeName]){var f=l.hitch(this,i);g.push(h(k,"onkeydown",this,function(d){if(!l.isFF&&d.keyCode==l.keys.ENTER&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return f(d)}else{if(d.keyCode==l.keys.SPACE){l.stopEvent(d)}}}),h(k,"onkeyup",this,function(d){if(d.keyCode==l.keys.SPACE&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return f(d)}}));if(l.isFF){g.push(h(k,"onkeypress",this,function(d){if(d.keyCode==l.keys.ENTER&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return f(d)}}))}}j="onclick"}g.push(h(k,j,this,i));this._connects.push(g);return g},disconnect:function(d){for(var f=0;f<this._connects.length;f++){if(this._connects[f]==d){dojo.forEach(d,dojo.disconnect);this._connects.splice(f,1);return}}},isLeftToRight:function(){return dojo._isBodyLtr()},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none")},placeAt:function(f,d){if(f.declaredClass&&f.addChild){f.addChild(this,d)}else{dojo.place(this.domNode,f,d)}return this}})})()}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(d,b){if(b<=0||!d){return""}var a=[];for(;;){if(b&1){a.push(d)}if(!(b>>=1)){break}d+=d}return a.join("")};dojo.string.pad=function(h,d,f,a){if(!f){f="0"}var b=String(h),g=dojo.string.rep(f,Math.ceil((d-b.length)/f.length));return a?b+g:g+b};dojo.string.substitute=function(a,f,d,b){b=b||dojo.global;d=(!d)?function(g){return g}:dojo.hitch(b,d);return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(h,i,g){var j=dojo.getObject(i,false,f);if(g){j=dojo.getObject(g,false,b).call(b,j,i)}return d(j,i).toString()})};dojo.string.trim=String.prototype.trim?dojo.trim:function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>=0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(h,g){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/}var f=dojo.date.stamp._isoRegExp.exec(h);var b=null;if(f){f.shift();if(f[1]){f[1]--}if(f[6]){f[6]*=1000}if(g){g=new Date(g);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(i){return g["get"+i]()}).forEach(function(i,j){if(f[j]===undefined){f[j]=i}})}b=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);var d=0;var a=f[7]&&f[7].charAt(0);if(a!="Z"){d=((f[8]||0)*60)+(Number(f[9])||0);if(a!="-"){d*=-1}}if(a){d-=b.getTimezoneOffset()}if(d){b.setTime(b.getTime()+d*60000)}}return b};dojo.date.stamp.toISOString=function(a,m){var j=function(o){return(o<10)?"0"+o:o};m=m||{};var l=[];var k=m.zulu?"getUTC":"get";var d="";if(m.selector!="time"){var i=a[k+"FullYear"]();d=["0000".substr((i+"").length)+i,j(a[k+"Month"]()+1),j(a[k+"Date"]())].join("-")}l.push(d);if(m.selector!="date"){var b=[j(a[k+"Hours"]()),j(a[k+"Minutes"]()),j(a[k+"Seconds"]())].join(":");var h=a[k+"Milliseconds"]();if(m.milliseconds){b+="."+(h<100?"0":"")+j(h)}if(m.zulu){b+="Z"}else{if(m.selector!="time"){var g=a.getTimezoneOffset();var f=Math.abs(g);b+=(g>0?"-":"+")+j(Math.floor(f/60))+":"+j(f%60)}}l.push(b)}return l.join("T")}}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var b=dojo;var k=b._scopeName+"Type";var f="["+k+"]";var i=0,h={};var g=function(n,o){var p=o||h;if(dojo.isIE){var q=n.__dojoNameCache;if(q&&p[q]===n){return q}}var d;do{d="__"+i++}while(d in p);p[d]=n;return d};function l(d){if(b.isString(d)){return"string"}if(typeof d=="number"){return"number"}if(typeof d=="boolean"){return"boolean"}if(b.isFunction(d)){return"function"}if(b.isArray(d)){return"array"}if(d instanceof Date){return"date"}if(d instanceof b._Url){return"url"}return"object"}function j(o,d){switch(d){case"string":return o;case"number":return o.length?Number(o):NaN;case"boolean":return typeof o=="boolean"?o:!(o.toLowerCase()=="false");case"function":if(b.isFunction(o)){o=o.toString();o=b.trim(o.substring(o.indexOf("{")+1,o.length-1))}try{if(o.search(/[^\w\.]+/i)!=-1){o=g(new Function(o),this)}return b.getObject(o,false)}catch(n){return new Function()}case"array":return o?o.split(/\s*,\s*/):[];case"date":switch(o){case"":return new Date("");case"now":return new Date();default:return b.date.stamp.fromISOString(o)}case"url":return b.baseUrl+o;default:return b.fromJson(o)}}var a={};function m(t){if(!a[t]){var d=b.getObject(t);if(!b.isFunction(d)){throw new Error("Could not load class '"+t+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?")}var s=d.prototype;var q={},p={};for(var n in s){if(n.charAt(0)=="_"){continue}if(n in p){continue}var o=s[n];q[n]=l(o)}a[t]={cls:d,params:q}}return a[t]}this._functionFromScript=function(p){var o="";var n="";var d=p.getAttribute("args");if(d){b.forEach(d.split(/\s*,\s*/),function(t,s){o+="var "+t+" = arguments["+s+"]; "})}var q=p.getAttribute("with");if(q&&q.length){b.forEach(q.split(/\s*,\s*/),function(s){o+="with("+s+"){";n+="}"})}return new Function(o+p.innerHTML+n)};this.instantiate=function(o,n){var d=[];n=n||{};b.forEach(o,function(y){if(!y){return}var B=k in n?n[k]:y.getAttribute(k);if(!B||!B.length){return}var A=m(B),z=A.cls,s=z._noScript||z.prototype._noScript;var x={},w=y.attributes;for(var v in A.params){var D=v in n?{value:n[v],specified:true}:w.getNamedItem(v);if(!D||(!D.specified&&(!dojo.isIE||v.toLowerCase()!="value"))){continue}var u=D.value;switch(v){case"class":u="className"in n?n.className:y.className;break;case"style":u="style"in n?n.style:(y.style&&y.style.cssText)}var q=A.params[v];if(typeof u=="string"){x[v]=j(u,q)}else{x[v]=u}}if(!s){var F=[],C=[];b.query("> script[type^='dojo/']",y).orphan().forEach(function(H){var G=H.getAttribute("event"),I=H.getAttribute("type"),J=b.parser._functionFromScript(H);if(G){if(I=="dojo/connect"){F.push({event:G,func:J})}else{x[G]=J}}else{C.push(J)}})}var t=z.markupFactory;if(!t&&z.prototype){t=z.prototype.markupFactory}var p=t?t(x,y,z):new z(x,y);d.push(p);var E=y.getAttribute("jsId");if(E){b.setObject(E,p)}if(!s){b.forEach(F,function(G){b.connect(p,G.event,null,G.func)});b.forEach(C,function(G){G.call(p)})}});b.forEach(d,function(p){if(p&&p.startup&&!p._started&&(!p.getParent||!p.getParent())){p.startup()}});return d};this.parse=function(o){var n=b.query(f,o);var d=this.instantiate(n);return d}}();(function(){var a=function(){if(dojo.config.parseOnLoad==true){dojo.parser.parse()}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,a)}else{dojo._loaders.unshift(a)}})()}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_stringRepl:function(b){var d=this.declaredClass,a=this;return dojo.string.substitute(b,this,function(g,f){if(f.charAt(0)=="!"){g=dojo.getObject(f.substr(1),false,a)}if(typeof g=="undefined"){throw new Error(d+" template:"+f)}if(g==null){return""}return f.charAt(0)=="!"?g:g.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var b=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var d;if(dojo.isString(b)){d=dojo._toDom(this._stringRepl(b))}else{d=b.cloneNode(true)}this.domNode=d;this._attachTemplateNodes(d);if(this.widgetsInTemplate){var a=(this._supportingWidgets=dojo.parser.parse(d));this._attachTemplateNodes(a,function(g,f){return g[f]})}this._fillContent(this.srcNodeRef)},_fillContent:function(a){var b=this.containerNode;if(a&&b){while(a.hasChildNodes()){b.appendChild(a.firstChild)}}},_attachTemplateNodes:function(p,n){n=n||function(u,t){return u.getAttribute(t)};var j=dojo.isArray(p)?p:(p.all||p.getElementsByTagName("*"));var s=dojo.isArray(p)?0:-1;for(;s<j.length;s++){var g=(s==-1)?p:j[s];if(this.widgetsInTemplate&&n(g,"dojoType")){continue}var q=n(g,"dojoAttachPoint");if(q){var o,m=q.split(/\s*,\s*/);while((o=m.shift())){if(dojo.isArray(this[o])){this[o].push(g)}else{this[o]=g}}}var k=n(g,"dojoAttachEvent");if(k){var i,h=k.split(/\s*,\s*/);var f=dojo.trim;while((i=h.shift())){if(i){var d=null;if(i.indexOf(":")!=-1){var b=i.split(":");i=f(b[0]);d=f(b[1])}else{i=f(i)}if(!d){d=i}this.connect(g,i,d)}}}var l=n(g,"waiRole");if(l){dijit.setWaiRole(g,l)}var a=n(g,"waiState");if(a){dojo.forEach(a.split(/\s*,\s*/),function(u){if(u.indexOf("-")!=-1){var t=u.split("-");dijit.setWaiState(g,t[0],t[1])}})}}}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(g,d,b){var h=dijit._Templated._templateCache;var a=d||g;var f=h[a];if(f){if(!f.ownerDocument||f.ownerDocument==dojo.doc){return f}dojo.destroy(f)}if(!d){d=dijit._Templated._sanitizeTemplateString(dojo.trim(dojo._getText(g)))}d=dojo.string.trim(d);if(b||d.match(/\$\{([^\}]+)\}/g)){return(h[a]=d)}else{return(h[a]=dojo._toDom(d))}};dijit._Templated._sanitizeTemplateString=function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var a=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(a){b=a[1]}}else{b=""}return b};if(dojo.isIE){dojo.addOnWindowUnload(function(){var d=dijit._Templated._templateCache;for(var b in d){var a=d[b];if(!isNaN(a.nodeType)){dojo.destroy(a)}delete d[b]}})}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(a){if(a.reset){a.reset()}})},validate:function(){var a=false;return dojo.every(dojo.map(this.getDescendants(),function(d){d._hasBeenBlurred=true;var b=d.disabled||!d.validate||d.validate();if(!b&&!a){dijit.scrollIntoView(d.containerNode||d.domNode);d.focus();a=true}return b}),function(b){return b})},setValues:function(a){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",a)},_setValueAttr:function(g){var f={};dojo.forEach(this.getDescendants(),function(i){if(!i.name){return}var h=f[i.name]||(f[i.name]=[]);h.push(i)});for(var a in f){if(!f.hasOwnProperty(a)){continue}var d=f[a],b=dojo.getObject(a,false,g);if(b===undefined){continue}if(!dojo.isArray(b)){b=[b]}if(typeof d[0].checked=="boolean"){dojo.forEach(d,function(h,j){h.attr("value",dojo.indexOf(b,h.value)!=-1)})}else{if(d[0]._multiValue){d[0].attr("value",b)}else{dojo.forEach(d,function(h,j){h.attr("value",b[j])})}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")},_getValueAttr:function(){var a={};dojo.forEach(this.getDescendants(),function(b){var d=b.name;if(!d||b.disabled){return}var g=b.attr("value");if(typeof b.checked=="boolean"){if(/Radio/.test(b.declaredClass)){if(g!==false){dojo.setObject(d,g,a)}else{g=dojo.getObject(d,false,a);if(g===undefined){dojo.setObject(d,null,a)}}}else{var f=dojo.getObject(d,false,a);if(!f){f=[];dojo.setObject(d,f,a)}if(g!==false){f.push(g)}}}else{dojo.setObject(d,g,a)}});return a},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(a){return!a.disabled&&a.isValid&&!a.isValid()});return!this._invalidWidgets.length},onValidStateChange:function(a){},_widgetChange:function(b){var a=this._lastValidState;if(!b||this._lastValidState===undefined){a=this.isValid();if(this._lastValidState===undefined){this._lastValidState=a}}else{if(b.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(d){return(d!=b)},this);if(!b.isValid()&&!b.attr("disabled")){this._invalidWidgets.push(b)}a=(this._invalidWidgets.length===0)}}if(a!==this._lastValidState){this._lastValidState=a;this.onValidStateChange(a)}},connectChildren:function(){dojo.forEach(this._changeConnections,dojo.hitch(this,"disconnect"));var b=this;var a=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(d){return d.validate}),function(d){a.push(b.connect(d,"validate",dojo.hitch(b,"_widgetChange",d)));a.push(b.connect(d,"_setDisabledAttr",dojo.hitch(b,"_widgetChange",d)))});this._widgetChange(null)},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren()}})}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments)},execute:function(a){},onExecute:function(){},_setEncTypeAttr:function(a){this.encType=a;dojo.attr(this.domNode,"encType",a);if(dojo.isIE){this.domNode.encoding=a}},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var a=this.srcNodeRef.attributes.getNamedItem("encType");if(a&&!a.specified&&(typeof a.value=="string")){this.attr("encType",a.value)}}this.inherited(arguments)},onReset:function(a){return true},_onReset:function(b){var a={returnValue:true,preventDefault:function(){this.returnValue=false},stopPropagation:function(){},currentTarget:b.currentTarget,target:b.target};if(!(this.onReset(a)===false)&&a.returnValue){this.reset()}dojo.stopEvent(b);return false},_onSubmit:function(b){var a=dijit.form.Form.prototype;if(this.execute!=a.execute||this.onExecute!=a.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues())}if(this.onSubmit(b)===false){dojo.stopEvent(b)}},onSubmit:function(a){return this.isValid()},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit()}}})}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){for(var a=this.domNode.parentNode;a;a=a.parentNode){var d=a.getAttribute&&a.getAttribute("widgetId");if(d){var b=dijit.byId(d);return b.isContainer?b:null}}return null},_getSibling:function(b){var a=this.domNode;do{a=a[b+"Sibling"]}while(a&&a.nodeType!=1);if(!a){return null}var d=a.getAttribute("widgetId");return dijit.byId(d)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var a=this.getParent();if(!a||!a.getIndexOfChild){return-1}return a.getIndexOfChild(this)}})}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode}},addChild:function(f,d){var b=this.containerNode;if(d&&typeof d=="number"){var a=this.getChildren();if(a&&a.length>=d){b=a[d-1].domNode;d="after"}}dojo.place(f.domNode,b,d);if(this._started&&!f._started){f.startup()}},removeChild:function(a){if(typeof a=="number"&&a>0){a=this.getChildren()[a]}if(!a||!a.domNode){return}var b=a.domNode;b.parentNode.removeChild(b)},_nextElement:function(a){do{a=a.nextSibling}while(a&&a.nodeType!=1);return a},_firstElement:function(a){a=a.firstChild;if(a&&a.nodeType!=1){a=this._nextElement(a)}return a},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode)},hasChildren:function(){return!!this._firstElement(this.containerNode)},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive(a)})},_getSiblingOfChild:function(a,b){var d=a.domNode;var f=(b>0?"nextSibling":"previousSibling");do{d=d[f]}while(d&&(d.nodeType!=1||!dijit.byNode(d)));return d?dijit.byNode(d):null},getIndexOfChild:function(b){var f=this.getChildren();for(var a=0,d;d=f[a];a++){if(d==b){return a}}return-1}})}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});if(!this.getParent||!this.getParent()){this.resize();this._viewport=dijit.getViewport();this.connect(dojo.global,"onresize",function(){var a=dijit.getViewport();if(a.w!=this._viewport.w||a.h!=this._viewport.h){this._viewport=a;this.resize()}})}this.inherited(arguments)},resize:function(j,h){var a=this.domNode;if(j){dojo.marginBox(a,j);if(j.t){a.style.top=j.t+"px"}if(j.l){a.style.left=j.l+"px"}}var k=h||{};dojo.mixin(k,j||{});if(!("h"in k)||!("w"in k)){k=dojo.mixin(dojo.marginBox(a),k)}var d=dojo.getComputedStyle(a);var i=dojo._getMarginExtents(a,d);var b=dojo._getBorderExtents(a,d);var g=(this._borderBox={w:k.w-(i.w+b.w),h:k.h-(i.h+b.h)});var f=dojo._getPadExtents(a,d);this._contentBox={l:dojo._toPixelValue(a,d.paddingLeft),t:dojo._toPixelValue(a,d.paddingTop),w:g.w-f.w,h:g.h-f.h};this.layout()},layout:function(){},_setupChild:function(a){dojo.addClass(a.domNode,this.baseClass+"-child");if(a.baseClass){dojo.addClass(a.domNode,this.baseClass+"-"+a.baseClass)}},addChild:function(a,b){this.inherited(arguments);if(this._started){this._setupChild(a)}},removeChild:function(a){dojo.removeClass(a.domNode,this.baseClass+"-child");if(a.baseClass){dojo.removeClass(a.domNode,this.baseClass+"-"+a.baseClass)}this.inherited(arguments)}});dijit.layout.marginBox2contentBox=function(f,g){var b=dojo.getComputedStyle(f);var d=dojo._getMarginExtents(f,b);var a=dojo._getPadBorderExtents(f,b);return{l:dojo._toPixelValue(f,b.paddingLeft),t:dojo._toPixelValue(f,b.paddingTop),w:g.w-(d.w+a.w),h:g.h-(d.h+a.h)}};(function(){var b=function(d){return d.substring(0,1).toUpperCase()+d.substring(1)};var a=function(d,f){d.resize?d.resize(f):dojo.marginBox(d.domNode,f);dojo.mixin(d,dojo.marginBox(d.domNode));dojo.mixin(d,f)};dijit.layout.layoutChildren=function(f,g,d){g=dojo.mixin({},g);dojo.addClass(f,"dijitLayoutContainer");d=dojo.filter(d,function(h){return h.layoutAlign!="client"}).concat(dojo.filter(d,function(h){return h.layoutAlign=="client"}));dojo.forEach(d,function(h){var k=h.domNode,j=h.layoutAlign;var i=k.style;i.left=g.l+"px";i.top=g.t+"px";i.bottom=i.right="auto";dojo.addClass(k,"dijitAlign"+b(j));if(j=="top"||j=="bottom"){a(h,{w:g.w});g.h-=h.h;if(j=="top"){g.t+=h.h}else{i.top=g.t+g.h+"px"}}else{if(j=="left"||j=="right"){a(h,{h:g.h});g.w-=h.w;if(j=="left"){g.l+=h.w}else{i.left=g.l+g.w+"px"}}else{if(j=="client"){a(h,g)}}}})}})()}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var a=0;dojo.html._secureForInnerHtml=function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(i,b,h){if(h){dojo.html._emptyNode(i)}if(typeof b=="string"){var j="",g="",d=0,f=i.nodeName.toLowerCase();switch(f){case"tr":j="<tr>";g="</tr>";d+=1;case"tbody":case"thead":j="<tbody>"+j;g+="</tbody>";d+=1;case"table":j="<table>"+j;g+="</table>";d+=1;break}if(d){var k=i.ownerDocument.createElement("div");k.innerHTML=j+b+g;do{k=k.firstChild}while(--d);dojo.forEach(k.childNodes,function(l){i.appendChild(l.cloneNode(true))})}else{i.innerHTML=b}}else{if(b.nodeType){i.appendChild(b)}else{dojo.forEach(b,function(l){i.appendChild(l.cloneNode(true))})}}return i};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(b,d){dojo.mixin(this,b||{});d=this.node=dojo.byId(this.node||d);if(!this.id){this.id=["Setter",(d)?d.id||d.tagName:"",a++].join("_")}if(!(this.node||d)){new Error(this.declaredClass+": no node provided to "+this.id)}},set:function(b,d){if(undefined!==b){this.content=b}if(d){this._mixin(d)}this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var b=this.node;if(!b){console.error("setContent given no node")}try{b=dojo.html._setNodeContent(b,this.content)}catch(d){var f=this.onContentError(d);try{b.innerHTML=f}catch(d){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+d.message,d)}}this.node=b},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(b){if(b.destroy){b.destroy()}});delete this.parseResults}dojo.html._emptyNode(this.node)},onBegin:function(){var b=this.content;if(dojo.isString(b)){if(this.cleanContent){b=dojo.html._secureForInnerHtml(b)}if(this.extractContent){var d=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(d){b=d[1]}}}this.empty();this.content=b;return this.node},onEnd:function(){if(this.parseContent){this._parse()}return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(b){return"Error occured setting content: "+b},_mixin:function(f){var d={},b;for(b in f){if(b in d){continue}this[b]=f[b]}},_parse:function(){var b=this.node;try{this.parseResults=dojo.parser.parse(b,true)}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(d,g,f){var b=this["on"+d+"Error"].call(this,g);if(f){console.error(f,g)}else{if(b){dojo.html._setNodeContent(this.node,b,true)}}}});dojo.html.set=function(f,b,d){if(undefined==b){console.warn("dojo.html.set: no cont argument provided, using empty string");b=""}if(!d){return dojo.html._setNodeContent(f,b,true)}else{var g=new dojo.html._ContentSetter(dojo.mixin(d,{content:b,node:f}));return g.set()}}})()}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(f,d,a){a=dojo.i18n.normalizeLocale(a);var k=a.split("-");var j=[f,"nls",d].join(".");var h=dojo._loadedModules[j];if(h){var g;for(var l=k.length;l>0;l--){var m=k.slice(0,l).join("_");if(h[m]){g=h[m];break}}if(!g){g=h.ROOT}if(g){var b=function(){};b.prototype=g;return new b()}}throw new Error("Bundle not found: "+d+" in "+f+" , locale="+a)};dojo.i18n.normalizeLocale=function(b){var a=b?b.toLowerCase():dojo.locale;if(a=="root"){a="ROOT"}return a};dojo.i18n._requireLocalization=function(a,u,t,q){var o=dojo.i18n.normalizeLocale(t);var m=[a,"nls",u].join(".");var k="";if(q){var b=q.split(",");for(var j=0;j<b.length;j++){if(o.indexOf(b[j])==0){if(b[j].length>k.length){k=b[j]}}}if(!k){k="ROOT"}}var s=q?k:o;var p=dojo._loadedModules[m];var n=null;if(p){if(dojo.config.localizationComplete&&p._built){return}var l=s.replace(/-/g,"_");var g=m+"."+l;n=dojo._loadedModules[g]}if(!n){p=dojo.provide(m);var h=dojo._getModuleSymbols(a);var f=h.concat("nls").join("/");var d;dojo.i18n._searchLocalePath(s,q,function(z){var y=z.replace(/-/g,"_");var x=m+"."+y;var w=false;if(!dojo._loadedModules[x]){dojo.provide(x);var v=[f];if(z!="ROOT"){v.push(z)}v.push(u);var i=v.join("/")+".js";w=dojo._loadPath(i,null,function(C){var B=function(){};B.prototype=d;p[y]=new B();for(var A in C){p[y][A]=C[A]}})}else{w=true}if(w&&p[y]){d=p[y]}else{p[y]=d}if(q){return true}})}if(q&&o!=k){p[o.replace(/-/g,"_")]=p[k.replace(/-/g,"_")]}};(function(){var a=dojo.config.extraLocale;if(a){if(!a instanceof Array){a=[a]}var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(f,d,h,g){b(f,d,h,g);if(h){return}for(var j=0;j<a.length;j++){b(f,d,a[j],g)}}}})();dojo.i18n._searchLocalePath=function(l,m,h){l=dojo.i18n.normalizeLocale(l);var g=l.split("-");var f=[];for(var b=g.length;b>0;b--){f.push(g.slice(0,b).join("-"))}f.push(false);if(m){f.reverse()}for(var a=f.length-1;a>=0;a--){var d=f[a]||"ROOT";var k=h(d);if(k){break}}};dojo.i18n._preloadLocalizations=function(g,f){function d(h){h=dojo.i18n.normalizeLocale(h);dojo.i18n._searchLocalePath(h,true,function(k){for(var j=0;j<f.length;j++){if(f[j]==k){dojo.require(g+"_"+k);return true}}return false})}d();var a=dojo.config.extraLocale||[];for(var b=0;b<a.length;b++){d(a[b])}}}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode}},postCreate:function(){this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group")}dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(this._started){return}if(this.isLoaded){dojo.forEach(this.getChildren(),function(a){a.startup()});if(this.doLayout){this._checkIfSingleChild()}if(!this._singleChild||!dijit._Contained.prototype.getParent.call(this)){this._scheduleLayout()}}this._loadCheck();this.inherited(arguments)},_checkIfSingleChild:function(){var d=dojo.query(">",this.containerNode),b=d.filter(function(f){return dojo.hasAttr(f,"dojoType")||dojo.hasAttr(f,"widgetId")}),a=dojo.filter(b.map(dijit.byNode),function(f){return f&&f.domNode&&f.resize});if(d.length==b.length&&a.length==1){this._singleChild=a[0]}else{delete this._singleChild}},setHref:function(a){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.","","2.0");return this.attr("href",a)},_setHrefAttr:function(a){this.cancel();this.href=a;if(this._created&&(this.preload||this._isShown())){return this.refresh()}else{this._hrefChanged=true}},setContent:function(a){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",a)},_setContentAttr:function(a){this.href="";this.cancel();this._setContent(a||"");this._isDownloaded=false},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel()}delete this._xhrDfd},uninitialize:function(){if(this._beingDestroyed){this.cancel()}},destroyRecursive:function(a){if(this._beingDestroyed){return}this._beingDestroyed=true;this.inherited(arguments)},resize:function(b){dojo.marginBox(this.domNode,b);var d=this.containerNode,f=dojo.mixin(dojo.marginBox(d),b||{});var a=(this._contentBox=dijit.layout.marginBox2contentBox(d,f));if(this._singleChild&&this._singleChild.resize){this._singleChild.resize({w:a.w,h:a.h})}},_isShown:function(){if("open"in this){return this.open}else{var a=this.domNode;return(a.style.display!="none")&&(a.style.visibility!="hidden")&&!dojo.hasClass(a,"dijitHidden")}},_onShow:function(){if(this._needLayout){this._layoutChildren()}this._loadCheck();if(this.onShow){this.onShow()}},_loadCheck:function(){if((this.href&&!this._xhrDfd)&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)&&(this.preload||this._isShown())){delete this._hrefChanged;this.refresh()}},refresh:function(){this.cancel();this._setContent(this.onDownloadStart(),true);var d=this;var a={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(a,this.ioArgs)}var b=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(a));b.addCallback(function(f){try{d._isDownloaded=true;d._setContent(f,false);d.onDownloadEnd()}catch(g){d._onError("Content",g)}delete d._xhrDfd;return f});b.addErrback(function(f){if(!b.canceled){d._onError("Download",f)}delete d._xhrDfd;return f})},_onLoadHandler:function(a){this.isLoaded=true;try{this.onLoad(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler()}var a=this._contentSetter;dojo.forEach(this.getChildren(),function(b){if(b.destroyRecursive){b.destroyRecursive()}});if(a){dojo.forEach(a.parseResults,function(b){if(b.destroyRecursive&&b.domNode&&b.domNode.parentNode==dojo.body()){b.destroyRecursive()}});delete a.parseResults}dojo.html._emptyNode(this.containerNode)},_setContent:function(a,f){this.destroyDescendants();delete this._singleChild;var d=this._contentSetter;if(!(d&&d instanceof dojo.html._ContentSetter)){d=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(h){var g=this.onContentError(h);try{this.containerNode.innerHTML=g}catch(h){console.error("Fatal "+this.id+" could not change content due to "+h.message,h)}})})}var b=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(d,b);d.set((dojo.isObject(a)&&a.domNode)?a.domNode:a);delete this._contentSetterParams;if(!f){dojo.forEach(this.getChildren(),function(g){g.startup()});if(this.doLayout){this._checkIfSingleChild()}this._scheduleLayout();this._onLoadHandler(a)}},_onError:function(d,f,b){var a=this["on"+d+"Error"].call(this,f);if(b){console.error(b,f)}else{if(a){this._setContent(a,true)}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren()}else{this._needLayout=true}},_layoutChildren:function(){if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{dojo.forEach(this.getChildren(),function(b){if(b.resize){b.resize()}})}delete this._needLayout},onLoad:function(a){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(a){},onDownloadError:function(a){return this.errorMessage},onDownloadEnd:function(){}})}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var j=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g}var a=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var i=dojox.html._adjustCssPaths=function(l,k){if(!k||!l){return}if(j){k=k.replace(j,function(p,q,o,m,n){return q+(new dojo._Url(l,"./"+m).toString())+n})}return k.replace(a,function(n,s,q,p,o,m){if(q){return'@import "'+(new dojo._Url(l,"./"+q).toString())+'"'+m}else{return"url("+(new dojo._Url(l,"./"+o).toString())+")"+m}})};var b=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var h=dojox.html._adjustHtmlPaths=function(m,k){var l=m||"./";return k.replace(b,function(o,v,t,s,q,n,u,p){return v+(t?(t+"="+s+(new dojo._Url(l,q).toString())+s):("style="+n+i(l,u)+n))+p})};var d=dojox.html._snarfStyles=function(l,k,m){m.attributes=[];return k.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(s,q,o,n,z,p){var v,x=(q||n||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(o){v=m.push(l?i(l,o):o)}else{v=m.push('@import "'+p+'";');x=x.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"")}if(x){x=x.split(/\s+/);var y={},u;for(var t=0,w=x.length;t<w;t++){u=x[t].split("=");y[u[0]]=u[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1")}m.attributes[v-1]=y}return""})};var f=dojox.html._snarfScripts=function(k,m){m.code="";function l(n){if(m.downloadRemote){dojo.xhrGet({url:n,sync:true,load:function(o){m.code+=o+";"},error:m.errBack})}}return k.replace(/<script\s*(?![^>]*type=['"]?dojo)(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(n,q,p,o){if(p){l(p)}else{m.code+=o}return""})};var g=dojox.html.evalInGlobal=function(l,k){k=k||dojo.doc.body;var m=k.ownerDocument.createElement("script");m.type="text/javascript";k.appendChild(m);m.text=l};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(n){this._styleNodes=[];var t,o,l,s=this.node.ownerDocument;var p=s.getElementsByTagName("head")[0];for(var k=0,m=n.length;k<m;k++){l=n[k];o=n.attributes[k];t=s.createElement("style");t.setAttribute("type","text/css");for(var q in o){t.setAttribute(q,o[q])}this._styleNodes.push(t);p.appendChild(t);if(t.styleSheet){t.styleSheet.cssText=l}else{t.appendChild(s.createTextNode(l))}}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var k=this.content,l=this.node;var o=this._styles;if(dojo.isString(k)){if(this.adjustPaths&&this.referencePath){k=h(this.referencePath,k)}if(this.renderStyles||this.cleanContent){k=d(this.referencePath,k,o)}if(this.executeScripts){var m=this;var n={downloadRemote:true,errBack:function(p){m._onError.call(m,"Exec",'Error downloading remote script in "'+m.id+'"',p)}};k=f(k,n);this._code=n.code}}this.content=k},onEnd:function(){var k=this._code,m=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop())}}if(this.renderStyles&&m&&m.length){this._renderStyles(m)}if(this.executeScripts&&k){if(this.cleanContent){k=k.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"")}if(this.scriptHasHooks){k=k.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement)}try{g(k,this.node)}catch(l){this._onError("Exec","Error eval script in "+this.id+", "+l.message,l)}}this.inherited("onEnd",arguments)},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop())}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype)}});dojox.html.set=function(l,k,m){if(!m){return dojo.html._setNodeContent(l,k,true)}else{var n=new dojox.html._ContentSetter(dojo.mixin(m,{content:k,node:l}));return n.set()}}})()}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");(function(){dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;this.onLoadDeferred=new dojo.Deferred();this.onUnloadDeferred=new dojo.Deferred()},postCreate:function(){this._setUpDeferreds();dijit.layout.ContentPane.prototype.postCreate.apply(this,arguments)},onExecError:function(a){},_setContentAttr:function(b){var a=this._setUpDeferreds();this.inherited(arguments);return a},cancel:function(){if(this._xhrDfd&&this._xhrDfd.fired==-1){this.onUnloadDeferred=null}dijit.layout.ContentPane.prototype.cancel.apply(this,arguments)},_setUpDeferreds:function(){var f=this,d=function(){f.cancel()};var b=(f.onLoadDeferred=new dojo.Deferred());var a=(f._nextUnloadDeferred=new dojo.Deferred());return{cancel:d,addOnLoad:function(g){b.addCallback(g)},addOnUnload:function(g){a.addCallback(g)}}},_onLoadHandler:function(){dijit.layout.ContentPane.prototype._onLoadHandler.apply(this,arguments);if(this.onLoadDeferred){this.onLoadDeferred.callback(true)}},_onUnloadHandler:function(){this.isLoaded=false;this.cancel();if(this.onUnloadDeferred){this.onUnloadDeferred.callback(true)}dijit.layout.ContentPane.prototype._onUnloadHandler.apply(this,arguments);if(this._nextUnloadDeferred){this.onUnloadDeferred=this._nextUnloadDeferred}},_onError:function(a,b){dijit.layout.ContentPane.prototype._onError.apply(this,arguments);if(this.onLoadDeferred){this.onLoadDeferred.errback(b)}},refresh:function(){var a=this._setUpDeferreds();this.inherited(arguments);return a},_setContent:function(a){var b=this._contentSetter;if(!(b&&b instanceof dojox.html._ContentSetter)){b=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(f){var d=this.onContentError(f);try{this.containerNode.innerHTML=d}catch(f){console.error("Fatal "+this.id+" could not change content due to "+f.message,f)}})})}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments)}})})()}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(b,a){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(d){if(a&&a.indexOf(d)!=-1){return d}return"\\"+d})};dojo.regexp.buildGroupRE=function(d,h,g){if(!(d instanceof Array)){return h(d)}var a=[];for(var f=0;f<d.length;f++){a.push(h(d[f]))}return dojo.regexp.group(a.join("|"),g)};dojo.regexp.group=function(b,a){return"("+(a?"?:":"")+b+")"}}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(a,l,j){var m=document.cookie;if(arguments.length==1){var i=m.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(a)+"=([^;]*)"));return i?decodeURIComponent(i[1]):undefined}else{j=j||{};var f=j.expires;if(typeof f=="number"){var k=new Date();k.setTime(k.getTime()+f*24*60*60*1000);f=j.expires=k}if(f&&f.toUTCString){j.expires=f.toUTCString()}l=encodeURIComponent(l);var h=a+"="+l,g;for(g in j){h+="; "+g;var b=j[g];if(b!==true){h+="="+b}}document.cookie=h}};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1})}}return navigator.cookieEnabled}}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,readOnly:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",disabled:"focusNode",readOnly:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments)},_setDisabledAttr:function(a){this.disabled=a;dojo.attr(this.focusNode,"disabled",a);dijit.setWaiState(this.focusNode,"disabled",a);if(a){this._hovering=false;this._active=false;this.focusNode.removeAttribute("tabIndex")}else{this.focusNode.setAttribute("tabIndex",this.tabIndex)}this._setStateClass()},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use attr('disabled',"+a+") instead.","","2.0");this.attr("disabled",a)},_onFocus:function(a){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode)}this.inherited(arguments)},_onMouse:function(d){var b=d.currentTarget;if(b&&b.getAttribute){this.stateModifier=b.getAttribute("stateModifier")||""}if(!this.disabled){switch(d.type){case"mouseenter":case"mouseover":this._hovering=true;this._active=this._mouseDown;break;case"mouseout":case"mouseleave":this._hovering=false;this._active=false;break;case"mousedown":this._active=true;this._mouseDown=true;var a=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus()}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(a)});break}this._setStateClass()}},isFocusable:function(){return!this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none")},focus:function(){dijit.focus(this.focusNode)},_setStateClass:function(){var d=this.baseClass.split(" ");function f(i){d=d.concat(dojo.map(d,function(j){return j+i}),"dijit"+i)}if(this.checked){f("Checked")}if(this.state){f(this.state)}if(this.selected){f("Selected")}if(this.disabled){f("Disabled")}else{if(this.readOnly){f("ReadOnly")}else{if(this._active){f(this.stateModifier+"Active")}else{if(this._focused){f("Focused")}if(this._hovering){f(this.stateModifier+"Hover")}}}}var a=this.stateNode||this.domNode,b={};dojo.forEach(a.className.split(" "),function(i){b[i]=true});if("_stateClasses"in this){dojo.forEach(this._stateClasses,function(i){delete b[i]})}dojo.forEach(d,function(i){b[i]=true});var h=[];for(var g in b){h.push(g)}a.className=h.join(" ");this._stateClasses=d},compare:function(b,a){if((typeof b=="number")&&(typeof a=="number")){return(isNaN(b)&&isNaN(a))?0:(b-a)}else{if(b>a){return 1}else{if(b<a){return-1}else{return 0}}}},onChange:function(a){},_onChangeActive:false,_handleOnChange:function(b,a){this._lastValue=b;if(this._lastValueReported==undefined&&(a===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=b}if((this.intermediateChanges||a||a===undefined)&&((typeof b!=typeof this._lastValueReported)||this.compare(b,this._lastValueReported)!=0)){this._lastValueReported=b;if(this._onChangeActive){this.onChange(b)}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass()},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle)}this.inherited(arguments)},setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use attr('value',"+a+") instead.","","2.0");this.attr("value",a)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")},_layoutHack:function(){if(dojo.isFF==2&&!this._layoutHackHandle){var b=this.domNode;var a=b.style.opacity;b.style.opacity="0.999";this._layoutHackHandle=setTimeout(dojo.hitch(this,function(){this._layoutHackHandle=null;b.style.opacity=a}),0)}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:""}),postCreate:function(){if(dojo.isIE||dojo.isWebKit){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown)}if(this._resetValue===undefined){this._resetValue=this.value}},_setValueAttr:function(b,a){this.value=b;this._handleOnChange(b,a)},_getValueAttr:function(a){return this._lastValue},undo:function(){this._setValueAttr(this._lastValueReported,false)},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true)},_onKeyDown:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!a.ctrlKey&&!a.altKey){var b;if(dojo.isIE){a.preventDefault();b=document.createEventObject();b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.srcElement.fireEvent("onkeypress",b)}else{if(dojo.isWebKit){b=document.createEvent("Events");b.initEvent("keypress",true,true);b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.target.dispatchEvent(b)}}}}})}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:'<span class="dijit dijitReset dijitLeft dijitInline"\r\n\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\r\n\t><span class="dijitReset dijitRight dijitInline"\r\n\t\t><span class="dijitReset dijitInline dijitButtonNode"\r\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents"\r\n\t\t\t\tdojoAttachPoint="titleNode,focusNode" \r\n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}" waiRole="button" waiState="labelledby-${id}_label"\r\n\t\t\t\t><span class="dijitReset dijitInline" dojoAttachPoint="iconNode" \r\n\t\t\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#10003;</span \r\n\t\t\t\t></span \r\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText" \r\n\t\t\t\t\tid="${id}_label"  \r\n\t\t\t\t\tdojoAttachPoint="containerNode"\r\n\t\t\t\t></span\r\n\t\t\t></button\r\n\t\t></span\r\n\t></span\r\n></span>\r\n',attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(a){if(this.disabled||this.readOnly){return false}this._clicked();return this.onClick(a)},_onButtonClick:function(b){if(b.type!="click"&&!(this.type=="submit"||this.type=="reset")){dojo.stopEvent(b)}if(this._onClick(b)===false){b.preventDefault()}else{if(this.type=="submit"&&!this.focusNode.form){for(var a=this.domNode;a.parentNode;a=a.parentNode){var d=dijit.byNode(a);if(d&&typeof d._onSubmit=="function"){d._onSubmit(b);break}}}}},_setValueAttr:function(b){var a=this.attributeMap.value||"";if(this[a.node||a||"domNode"].tagName=="BUTTON"){if(b!=this.value){}}},_fillContent:function(a){if(a&&!("label"in this.params)){this.attr("label",a.innerHTML)}},postCreate:function(){if(this.showLabel==false){dojo.addClass(this.containerNode,"dijitDisplayNone")}dojo.setSelectable(this.focusNode,false);this.inherited(arguments)},onClick:function(a){return true},_clicked:function(a){},setLabel:function(a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},_setLabelAttr:function(a){this.containerNode.innerHTML=this.label=a;this._layoutHack();if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container],{baseClass:"dijitDropDownButton",templateString:'<span class="dijit dijitReset dijitLeft dijitInline"\r\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\r\n\t><span class=\'dijitReset dijitRight dijitInline\'\r\n\t\t><span class=\'dijitReset dijitInline dijitButtonNode\'\r\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents" \r\n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}"\r\n\t\t\t\tdojoAttachPoint="focusNode,titleNode" \r\n\t\t\t\twaiRole="button" waiState="haspopup-true,labelledby-${id}_label"\r\n\t\t\t\t><span class="dijitReset dijitInline" \r\n\t\t\t\t\tdojoAttachPoint="iconNode"\r\n\t\t\t\t></span\r\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText"  \r\n\t\t\t\t\tdojoAttachPoint="containerNode,popupStateNode" \r\n\t\t\t\t\tid="${id}_label"\r\n\t\t\t\t></span\r\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner">&thinsp;</span\r\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\r\n\t\t\t></button\r\n\t\t></span\r\n\t></span\r\n></span>\r\n',_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}dijit.popup.prepare(this.dropDown.domNode);this.inherited(arguments)},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onArrowClick:function(a){if(this.disabled||this.readOnly){return}this._toggleDropDown()},_onDropDownClick:function(b){var a=dojo.isFF&&dojo.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!a||b.detail!=0||this._seenKeydown){this._onArrowClick(b)}this._seenKeydown=false},_onDropDownKeydown:function(a){this._seenKeydown=true},_onDropDownBlur:function(a){this._seenKeydown=false},_onKey:function(a){if(this.disabled||this.readOnly){return}if(a.charOrCode==dojo.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.visibility=="hidden"){dojo.stopEvent(a);this._toggleDropDown()}}},_onBlur:function(){this._closeDropDown();this.inherited(arguments)},_toggleDropDown:function(){if(this.disabled||this.readOnly){return}dijit.focus(this.popupStateNode);var a=this.dropDown;if(!a){return}if(!this._opened){if(a.href&&!a.isLoaded){var b=this;var d=dojo.connect(a,"onLoad",function(){dojo.disconnect(d);b._openDropDown()});a.refresh();return}else{this._openDropDown()}}else{this._closeDropDown()}},_openDropDown:function(){var f=this.dropDown;var d=f.domNode.style.width;var b=this;dijit.popup.open({parent:this,popup:f,around:this.domNode,orient:this.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onExecute:function(){b._closeDropDown(true)},onCancel:function(){b._closeDropDown(true)},onClose:function(){f.domNode.style.width=d;b.popupStateNode.removeAttribute("popupActive");b._opened=false}});if(this.domNode.offsetWidth>f.domNode.offsetWidth){var a=null;if(!this.isLeftToRight()){a=f.domNode.parentNode;var g=a.offsetLeft+a.offsetWidth}dojo.marginBox(f.domNode,{w:this.domNode.offsetWidth});if(a){a.style.left=g-this.domNode.offsetWidth+"px"}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(f.focus){f.focus()}},_closeDropDown:function(a){if(this._opened){dijit.popup.close(this.dropDown);if(a){this.focus()}this._opened=false}}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:'<table class=\'dijit dijitReset dijitInline dijitLeft\'\r\n\tcellspacing=\'0\' cellpadding=\'0\' waiRole="presentation"\r\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\r\n\t\t><td class="dijitReset dijitStretch dijitButtonContents dijitButtonNode"\r\n\t\t\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"  dojoAttachPoint="titleNode"\r\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\r\n\t\t\t><div class="dijitReset dijitInline" dojoAttachPoint="iconNode" waiRole="presentation"></div\r\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" waiRole="presentation"></div\r\n\t\t></td\r\n\t\t><td class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\r\n\t\t\tdojoAttachPoint="popupStateNode,focusNode"\r\n\t\t\tdojoAttachEvent="ondijitclick:_onArrowClick, onkeypress:_onKey,onmouseenter:_onMouse,onmouseleave:_onMouse"\r\n\t\t\tstateModifier="DownArrow"\r\n\t\t\ttitle="${optionsTitle}" ${nameAttrSetting}\r\n\t\t\twaiRole="button" waiState="haspopup-true"\r\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\r\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\r\n\t\t></td\r\n\t></tr></tbody\r\n></table>\r\n',attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"]}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];dojo.forEach(this._focalNodes,dojo.hitch(this,function(a){if(dojo.isIE){this.connect(a,"onactivate",this._onNodeFocus);this.connect(a,"ondeactivate",this._onNodeBlur)}else{this.connect(a,"onfocus",this._onNodeFocus);this.connect(a,"onblur",this._onNodeBlur)}}))},focusFocalNode:function(a){this._focusedNode=a;dijit.focus(a)},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1]},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode)},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0]},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode)},getFocalNodes:function(){return this._focalNodes},_onNodeFocus:function(a){this._focusedNode=a.currentTarget;var b=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,b)},_onNodeBlur:function(a){var b=a.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(a.currentTarget,b)},_onBlur:function(){this.inherited(arguments);this._focusedNode=null}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(a){this.attr("checked",!this.checked)},_setCheckedAttr:function(a){this.checked=a;dojo.attr(this.focusNode||this.domNode,"checked",a);dijit.setWaiState(this.focusNode||this.domNode,"pressed",a);this._setStateClass();this._handleOnChange(a,true)},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use attr('checked',"+a+") instead.","","2.0");this.attr("checked",a)},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false)}})}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton")}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",[dijit._Container],{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(d,b){var a=this._keyNavCodes={};var g=dojo.hitch(this,this.focusPrev);var f=dojo.hitch(this,this.focusNext);dojo.forEach(d,function(h){a[h]=g});dojo.forEach(b,function(h){a[h]=f});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(a,b){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return}var a=this._getNextFocusableChild(this.focusedChild,1);if(a.getFocalNodes){this.focusChild(a,a.getFocalNodes()[0])}else{this.focusChild(a)}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return}var b=this._getNextFocusableChild(this.focusedChild,-1);if(b.getFocalNodes){var a=b.getFocalNodes();this.focusChild(b,a[a.length-1])}else{this.focusChild(b)}},focusChild:function(b,a){if(b){if(this.focusedChild&&b!==this.focusedChild){this._onChildBlur(this.focusedChild)}this.focusedChild=b;if(a&&b.focusFocalNode){b.focusFocalNode(a)}else{b.focus()}}},_startupChild:function(b){if(b.getFocalNodes){dojo.forEach(b.getFocalNodes(),function(d){dojo.attr(d,"tabindex",-1);this._connectNode(d)},this)}else{var a=b.focusNode||b.domNode;if(b.isFocusable()){dojo.attr(a,"tabindex",-1)}this._connectNode(a)}},_connectNode:function(a){this.connect(a,"onfocus","_onNodeFocus");this.connect(a,"onblur","_onNodeBlur")},_onContainerFocus:function(a){if(a.target!==this.domNode){return}this.focusFirstChild();dojo.removeAttr(this.domNode,"tabIndex")},_onBlur:function(a){if(this.tabIndex){dojo.attr(this.domNode,"tabindex",this.tabIndex)}},_onContainerKeypress:function(a){if(a.ctrlKey||a.altKey){return}var b=this._keyNavCodes[a.charOrCode];if(b){b();dojo.stopEvent(a)}},_onNodeFocus:function(a){var b=dijit.getEnclosingWidget(a.target);if(b&&b.isFocusable()){this.focusedChild=b}dojo.stopEvent(a)},_onNodeBlur:function(a){dojo.stopEvent(a)},_onChildBlur:function(a){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(a,b){if(a){a=this._getSiblingOfChild(a,b)}var f=this.getChildren();for(var d=0;d<f.length;d++){if(!a){a=f[(b>0)?0:(f.length-1)]}if(a.isFocusable()){return a}a=this._getSiblingOfChild(a,b)}return null}})}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitem" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset" waiRole="presentation">\r\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon" dojoAttachPoint="iconNode">\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\r\n\t\t<div dojoAttachPoint="arrowWrapper" style="visibility: hidden">\r\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand">\r\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\r\n\t\t</div>\r\n\t</td>\r\n</tr>\r\n',attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(a){if(a&&!("label"in this.params)){this.attr("label",a.innerHTML)}},postCreate:function(){dojo.setSelectable(this.domNode,false);dojo.attr(this.containerNode,"id",this.id+"_text");dijit.setWaiState(this.domNode,"labelledby",this.id+"_text")},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this)},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this)},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(a){},focus:function(){try{dijit.focus(this.focusNode)}catch(a){}},_onFocus:function(){this._setSelected(true)},_setSelected:function(a){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},setDisabled:function(a){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",a)},_setDisabledAttr:function(a){this.disabled=a;dojo[a?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",a?"true":"false")},_setAccelKeyAttr:function(a){this.accelKey=a;this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;dojo.attr(this.containerNode,"colSpan",a?"1":"2")}})}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","")}dijit.setWaiState(this.focusNode,"haspopup","true")},destroyDescendants:function(){if(this.popup){this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitemcheckbox" tabIndex="-1"\r\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\r\n\t<td class="dijitReset" waiRole="presentation">\r\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode">\r\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\r\n\t</td>\r\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\r\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\r\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\r\n\t</td>\r\n</tr>\r\n',checked:false,_setCheckedAttr:function(a){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",a);dijit.setWaiState(this.domNode,"checked",a);this.checked=a},onChange:function(a){},_onClick:function(a){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitMenuSeparator">\r\n\t<td colspan="4">\r\n\t\t<div class="dijitMenuSeparatorTop"></div>\r\n\t\t<div class="dijitMenuSeparatorBottom"></div>\r\n\t</td>\r\n</tr>\r\n',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren();this.inherited(arguments)},onExecute:function(){},onCancel:function(a){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(a)}else{var b=this._getTopMenu();if(b&&b._isMenuBar){b.focusNext()}}},onItemHover:function(a){if(this.isActive){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}}},_onChildBlur:function(a){a._setSelected(false);dijit.popup.close(a.popup);this._stopPopupTimer()},onItemUnhover:function(a){if(this.isActive){this._stopPopupTimer()}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu){}return a},onItemClick:function(b,a){if(b.disabled){return false}this.focusChild(b);if(b.popup){if(!this.is_open){this._openPopup()}}else{this.onExecute();b.onClick(a)}},_openPopup:function(){this._stopPopupTimer();var d=this.focusedChild;var b=d.popup;if(b.isShowingNow){return}b.parentMenu=this;var a=this;dijit.popup.open({parent:this,popup:b,around:d.domNode,orient:this._orient||(this.isLeftToRight()?{TR:"TL",TL:"TR"}:{TL:"TR",TR:"TL"}),onCancel:function(){dijit.popup.close(b);d.focus();a.currentPopup=null},onExecute:dojo.hitch(this,"_onDescendantExecute")});this.currentPopup=b;if(b.focus){setTimeout(dojo.hitch(b,"focus"),0)}},onOpen:function(a){this.isShowingNow=true},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null}},_onFocus:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive");this.inherited(arguments)},_onBlur:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive");this.onClose();this.inherited(arguments)},_onDescendantExecute:function(){this.onClose()}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" waiRole="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress">\r\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\r\n</table>\r\n',targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body())}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this)}var b=dojo.keys,a=this.isLeftToRight();this._openSubMenuKey=a?b.RIGHT_ARROW:b.LEFT_ARROW;this._closeSubMenuKey=a?b.LEFT_ARROW:b.RIGHT_ARROW;this.connectKeyNavHandlers([b.UP_ARROW],[b.DOWN_ARROW])},_onKeyPress:function(a){if(a.ctrlKey||a.altKey){return}switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);dojo.stopEvent(a);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev()}else{this.onCancel(false)}}else{dojo.stopEvent(a)}break}},_iframeContentWindow:function(a){var b=dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(a))||dijit.Menu._iframeContentDocument(a)["__parent__"]||(a.name&&dojo.doc.frames[a.name])||null;return b},_iframeContentDocument:function(a){var b=a.contentDocument||(a.contentWindow&&a.contentWindow.document)||(a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document)||null;return b},bindDomNode:function(a){a=dojo.byId(a);var b=dijit.getDocumentWindow(a.ownerDocument);if(a.tagName.toLowerCase()=="iframe"){b=this._iframeContentWindow(a);a=dojo.withGlobal(b,dojo.body)}var d=(a==dojo.body()?dojo.doc:a);a[this.id]=this._bindings.push([dojo.connect(d,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,"_openMyself"),dojo.connect(d,"onkeydown",this,"_contextKey"),dojo.connect(d,"onmousedown",this,"_contextMouse")])},unBindDomNode:function(g){var f=dojo.byId(g);if(f){var d=f[this.id]-1,a=this._bindings[d];dojo.forEach(a,dojo.disconnect);delete this._bindings[d]}},_contextKey:function(b){this._contextMenuWithMouse=false;if(b.keyCode==dojo.keys.F10){dojo.stopEvent(b);if(b.shiftKey&&b.type=="keydown"){var a={target:b.target,pageX:b.pageX,pageY:b.pageY};a.preventDefault=a.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(a)}),1)}}},_contextMouse:function(a){this._contextMenuWithMouse=true},_openMyself:function(h){if(this.leftClickToOpen&&h.button>0){return}dojo.stopEvent(h);var a,i;if(dojo.isSafari||this._contextMenuWithMouse){a=h.pageX;i=h.pageY}else{var g=dojo.coords(h.target,true);a=g.x+10;i=g.y+10}var f=this;var d=dijit.getFocus(this);function b(){dijit.focus(d);dijit.popup.close(f)}dijit.popup.open({popup:this,x:a,y:i,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}},uninitialize:function(){dojo.forEach(this.targetNodeIds,this.unBindDomNode,this);this.inherited(arguments)}})}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.pane2menu={};this._subscriptions=[dojo.subscribe(this.containerId+"-startup",this,"onStartup"),dojo.subscribe(this.containerId+"-addChild",this,"onAddChild"),dojo.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),dojo.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),dojo.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")]},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);this.onSelectChild(a.selected)},destroy:function(){for(var a in this.pane2button){this.onRemoveChild(a)}dojo.forEach(this._subscriptions,dojo.unsubscribe);this.inherited(arguments)},onAddChild:function(h,g){var f=dojo.doc.createElement("span");this.domNode.appendChild(f);var k=dojo.getObject(this.buttonWidget);var d=new k({label:h.title,closeButton:h.closable},f);this.addChild(d,g);this.pane2button[h]=d;h.controlButton=d;var b=[];b.push(dojo.connect(d,"onClick",dojo.hitch(this,"onButtonClick",h)));if(h.closable){b.push(dojo.connect(d,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",h)));var a=dojo.i18n.getLocalization("dijit","common");var j=new dijit.Menu({targetNodeIds:[d.id],id:d.id+"_Menu"});var i=new dijit.MenuItem({label:a.itemClose});b.push(dojo.connect(i,"onClick",dojo.hitch(this,"onCloseButtonClick",h)));j.addChild(i);this.pane2menu[h]=j}this.pane2handles[h]=b;if(!this._currentChild){d.focusNode.setAttribute("tabIndex","0");this._currentChild=h}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList()}},onRemoveChild:function(b){if(this._currentChild===b){this._currentChild=null}dojo.forEach(this.pane2handles[b],dojo.disconnect);delete this.pane2handles[b];var d=this.pane2menu[b];if(d){d.destroyRecursive();delete this.pane2menu[b]}var a=this.pane2button[b];if(a){a.destroy();delete this.pane2button[b]}},onSelectChild:function(a){if(!a){return}if(this._currentChild){var f=this.pane2button[this._currentChild];f.attr("checked",false);f.focusNode.setAttribute("tabIndex","-1")}var d=this.pane2button[a];d.attr("checked",true);this._currentChild=a;d.focusNode.setAttribute("tabIndex","0");var b=dijit.byId(this.containerId);dijit.setWaiState(b.containerNode,"labelledby",d.id)},onButtonClick:function(b){var a=dijit.byId(this.containerId);a.selectChild(b)},onCloseButtonClick:function(d){var f=dijit.byId(this.containerId);f.closeChild(d);var a=this.pane2button[this._currentChild];if(a){dijit.focus(a.focusNode||a.domNode)}},adjacent:function(f){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){f=!f}var b=this.getChildren();var d=dojo.indexOf(b,this.pane2button[this._currentChild]);var a=f?1:b.length-1;return b[(d+a)%b.length]},onkeypress:function(d){if(this.disabled||d.altKey){return}var b=null;if(d.ctrlKey||!d._djpage){var a=dojo.keys;switch(d.charOrCode){case a.LEFT_ARROW:case a.UP_ARROW:if(!d._djpage){b=false}break;case a.PAGE_UP:if(d.ctrlKey){b=false}break;case a.RIGHT_ARROW:case a.DOWN_ARROW:if(!d._djpage){b=true}break;case a.PAGE_DOWN:if(d.ctrlKey){b=true}break;case a.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(d);break;default:if(d.ctrlKey){if(d.charOrCode===a.TAB){this.adjacent(!d.shiftKey).onClick();dojo.stopEvent(d)}else{if(d.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(d)}}}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(d)}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(a){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments)},onClick:function(a){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}})}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",_started:false,postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(this._started){return}var b=this.getChildren();dojo.forEach(b,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"))}else{dojo.some(b,function(d){if(d.selected){this.selectedChildWidget=d}return d.selected},this)}var a=this.selectedChildWidget;if(!a&&b[0]){a=this.selectedChildWidget=b[0];a.selected=true}dojo.publish(this.id+"-startup",[{children:b,selected:a}]);if(a){this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.domNode.title="";return a},addChild:function(b,a){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[b,a]);this.layout();if(!this.selectedChildWidget){this.selectChild(b)}}},removeChild:function(a){this.inherited(arguments);if(this._beingDestroyed){return}if(this._started){dojo.publish(this.id+"-removeChild",[a]);this.layout()}if(this.selectedChildWidget===a){this.selectedChildWidget=undefined;if(this._started){var b=this.getChildren();if(b.length){this.selectChild(b[0])}}}},selectChild:function(a){a=dijit.byId(a);if(this.selectedChildWidget!=a){this._transition(a,this.selectedChildWidget);this.selectedChildWidget=a;dojo.publish(this.id+"-selectChild",[a]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}}},_transition:function(b,a){if(a){this._hideChild(a)}this._showChild(b);if(this.doLayout&&b.resize){b.resize(this._containerContentBox||this._contentBox)}},_adjacent:function(d){var b=this.getChildren();var a=dojo.indexOf(b,this.selectedChildWidget);a+=d?1:b.length-1;return b[a%b.length]},forward:function(){this.selectChild(this._adjacent(true))},back:function(){this.selectChild(this._adjacent(false))},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox)}},_showChild:function(b){var a=this.getChildren();b.isFirstChild=(b==a[0]);b.isLastChild=(b==a[a.length-1]);b.selected=true;dojo.removeClass(b.domNode,"dijitHidden");dojo.addClass(b.domNode,"dijitVisible");if(b._onShow){b._onShow()}else{if(b.onShow){b.onShow()}}},_hideChild:function(a){a.selected=false;dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");if(a.onHide){a.onHide()}},closeChild:function(b){var a=b.onClose(this,b);if(a){this.removeChild(b);b.destroyRecursive()}},destroy:function(){this._beingDestroyed=true;this.inherited(arguments)}});dojo.extend(dijit._Widget,{title:"",selected:false,closable:false,onClose:function(){return true}})}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",doLayout:true,buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return}if(!this.pane2button){return}var a=0;for(var d in this.pane2button){var b=this.pane2button[d].innerDiv.scrollWidth;a=Math.max(a,b)}for(d in this.pane2button){this.pane2button[d].innerDiv.style.width=a+"px"}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",templateString:"<div waiRole=\"presentation\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\r\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\r\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\r\n\t        <span dojoAttachPoint='containerNode,focusNode' class='tabLabel'>${!label}</span><img class =\"dijitTabButtonSpacer\" src=\"${_blankGif}\" />\r\n\t        <span class=\"closeButton\" dojoAttachPoint='closeNode'\r\n\t        \t\tdojoAttachEvent='onclick: onClickCloseButton, onmouseenter: _onCloseButtonEnter, onmouseleave: _onCloseButtonLeave'>\r\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeIcon' class='closeImage' waiRole=\"presentation\"/>\r\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\r\n\t        </span>\r\n        </div>\r\n    </div>\r\n</div>\r\n",scrollOnFocus:false,postCreate:function(){if(this.closeButton){dojo.addClass(this.innerDiv,"dijitClosable");var a=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",a.itemClose);dojo.attr(this.closeIcon,"title",a.itemClose)}}else{this.closeNode.style.display="none"}this.inherited(arguments);dojo.setSelectable(this.containerNode,false)},_onCloseButtonEnter:function(){dojo.addClass(this.closeNode,"closeButton-hover")},_onCloseButtonLeave:function(){dojo.removeClass(this.closeNode,"closeButton-hover")}})}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:null,templateString:'<div class="dijitTabContainer">\r\n\t<div dojoAttachPoint="tablistNode"></div>\r\n\t<div dojoAttachPoint="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\r\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" dojoAttachPoint="containerNode"></div>\r\n</div>\r\n',_controllerWidget:"dijit.layout.TabController",postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=dojo.getObject(this._controllerWidget);this.tablist=new a({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout")},this.tablistNode);if(this.tabStrip){dojo.addClass(this.tablist.domNode,this.baseClass+"Strip")}if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout")}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.domNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested")}},_setupChild:function(a){dojo.addClass(a.domNode,"dijitTabPane");this.inherited(arguments);return a},startup:function(){if(this._started){return}this.tablist.startup();this.inherited(arguments)},layout:function(){if(!this.doLayout){return}var b=this.tabPosition.replace(/-h/,"");var a=[{domNode:this.tablist.domNode,layoutAlign:b},{domNode:this.tablistSpacer,layoutAlign:b},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,a);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,a[2]);if(this.selectedChildWidget){this._showChild(this.selectedChildWidget);if(this.doLayout&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox)}}},destroy:function(){if(this.tablist){this.tablist.destroy()}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter"}this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._splitters={};this._splitterThickness={}},startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments)},_setupChild:function(g){var d=g.region;if(d){this.inherited(arguments);dojo.addClass(g.domNode,this.baseClass+"Pane");var b=this.isLeftToRight();if(d=="leading"){d=b?"left":"right"}if(d=="trailing"){d=b?"right":"left"}this["_"+d]=g.domNode;this["_"+d+"Widget"]=g;if((g.splitter||this.gutters)&&!this._splitters[d]){var a=dojo.getObject(g.splitter?this._splitterClass:"dijit.layout._Gutter");var h={left:"right",right:"left",top:"bottom",bottom:"top",leading:"trailing",trailing:"leading"};var f=new a({container:this,child:g,region:d,oppNode:this["_"+h[g.region]],live:this.liveSplitters});f.isSplitter=true;this._splitters[d]=f.domNode;dojo.place(this._splitters[d],g.domNode,"after");f.startup()}g.region=d}},_computeSplitterThickness:function(a){this._splitterThickness[a]=this._splitterThickness[a]||dojo.marginBox(this._splitters[a])[(/top|bottom/.test(a)?"h":"w")]},layout:function(){for(var a in this._splitters){this._computeSplitterThickness(a)}this._layoutChildren()},addChild:function(b,a){this.inherited(arguments);if(this._started){this._layoutChildren()}},removeChild:function(b){var d=b.region;var a=this._splitters[d];if(a){dijit.byNode(a).destroy();delete this._splitters[d];delete this._splitterThickness[d]}this.inherited(arguments);delete this["_"+d];delete this["_"+d+"Widget"];if(this._started){this._layoutChildren(b.region)}dojo.removeClass(b.domNode,this.baseClass+"Pane")},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(b){var a=this._splitters[b];return a?dijit.byNode(a):null},resize:function(d,b){if(!this.cs||!this.pe){var a=this.domNode;this.cs=dojo.getComputedStyle(a);this.pe=dojo._getPadExtents(a,this.cs);this.pe.r=dojo._toPixelValue(a,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(a,this.cs.paddingBottom);dojo.style(a,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(s){if(!this._borderBox||!this._borderBox.h){return}var q=(this.design=="sidebar");var N=0,M=0,L=0,K=0;var J={},I={},m={},l={},k=(this._center&&this._center.style)||{};var j=/left|right/.test(s);var i=!s||(!j&&!q);var h=!s||(j&&q);if(this._top){J=h&&this._top.style;N=dojo.marginBox(this._top).h}if(this._left){I=i&&this._left.style;L=dojo.marginBox(this._left).w}if(this._right){m=i&&this._right.style;K=dojo.marginBox(this._right).w}if(this._bottom){l=h&&this._bottom.style;M=dojo.marginBox(this._bottom).h}var g=this._splitters;var f=g.top,d=g.bottom,b=g.left,z=g.right;var y=this._splitterThickness;var x=y.top||0,w=y.left||0,v=y.right||0,u=y.bottom||0;if(w>50||v>50){setTimeout(dojo.hitch(this,function(){this._splitterThickness={};for(var O in this._splitters){this._computeSplitterThickness(O)}this._layoutChildren()}),50);return false}var p=this.pe;var H={left:(q?L+w:0)+p.l+"px",right:(q?K+v:0)+p.r+"px"};if(f){dojo.mixin(f.style,H);f.style.top=N+p.t+"px"}if(d){dojo.mixin(d.style,H);d.style.bottom=M+p.b+"px"}H={top:(q?0:N+x)+p.t+"px",bottom:(q?0:M+u)+p.b+"px"};if(b){dojo.mixin(b.style,H);b.style.left=L+p.l+"px"}if(z){dojo.mixin(z.style,H);z.style.right=K+p.r+"px"}dojo.mixin(k,{top:p.t+N+x+"px",left:p.l+L+w+"px",right:p.r+K+v+"px",bottom:p.b+M+u+"px"});var G={top:q?p.t+"px":k.top,bottom:q?p.b+"px":k.bottom};dojo.mixin(I,G);dojo.mixin(m,G);I.left=p.l+"px";m.right=p.r+"px";J.top=p.t+"px";l.bottom=p.b+"px";if(q){J.left=l.left=L+w+p.l+"px";J.right=l.right=K+v+p.r+"px"}else{J.left=l.left=p.l+"px";J.right=l.right=p.r+"px"}var F=this._borderBox.h-p.t-p.b,E=F-(N+x+M+u),D=q?F:E;var C=this._borderBox.w-p.l-p.r,B=C-(L+w+K+v),A=q?B:C;var a={top:{w:A,h:N},bottom:{w:A,h:M},left:{w:L,h:D},right:{w:K,h:D},center:{h:E,w:B}};var o=dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.some(this.getChildren(),function(O){return O.domNode.tagName=="TEXTAREA"||O.domNode.tagName=="INPUT"});if(o){var n=function(Q,O,P){if(Q){(Q.resize?Q.resize(O,P):dojo.marginBox(Q.domNode,O))}};if(b){b.style.height=D}if(z){z.style.height=D}n(this._leftWidget,{h:D},a.left);n(this._rightWidget,{h:D},a.right);if(f){f.style.width=A}if(d){d.style.width=A}n(this._topWidget,{w:A},a.top);n(this._bottomWidget,{w:A},a.bottom);n(this._centerWidget,a.center)}else{var t={};if(s){t[s]=t.center=true;if(/top|bottom/.test(s)&&this.design!="sidebar"){t.left=t.right=true}else{if(/left|right/.test(s)&&this.design=="sidebar"){t.top=t.bottom=true}}}dojo.forEach(this.getChildren(),function(O){if(O.resize&&(!s||O.region in t)){O.resize(null,a[O.region])}},this)}},destroy:function(){for(var b in this._splitters){var a=this._splitters[b];dijit.byNode(a).destroy();dojo.destroy(a)}delete this._splitters;delete this._splitterThickness;this.inherited(arguments)}});dojo.extend(dijit._Widget,{region:"",splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:'<div class="dijitSplitter" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag" tabIndex="0" waiRole="separator"><div class="dijitSplitterThumb"></div></div>',postCreate:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));this._factor=/top|left/.test(this.region)?1:-1;this._minSize=this.child.minSize;this.child.domNode._recalc=true;this.connect(this.container,"resize",function(){this.child.domNode._recalc=true});this._cookieName=this.container.id+"_"+this.region;if(this.container.persist){var a=dojo.cookie(this._cookieName);if(a){this.child.domNode.style[this.horizontal?"height":"width"]=a}}},_computeMaxSize:function(){var d=this.horizontal?"h":"w",b=this.container._splitterThickness[this.region];var a=dojo.contentBox(this.container.domNode)[d]-(this.oppNode?dojo.marginBox(this.oppNode)[d]:0)-20-b*2;this._maxSize=Math.min(this.child.maxSize,a)},_startDrag:function(i){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false}if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after")}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake){dojo.destroy(this.fake)}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after")}dojo.addClass(this.domNode,"dijitSplitterActive");var b=this._factor,l=this._maxSize,f=this._minSize||20,a=this.horizontal,d=a?"pageY":"pageX",t=i[d],s=this.domNode.style,g=a?"h":"w",q=dojo.marginBox(this.child.domNode)[g],p=this.region,m=parseInt(this.domNode.style[p],10),k=this._resize,o={},j=this.child.domNode,h=dojo.hitch(this.container,this.container._layoutChildren),n=dojo.doc.body;this._handlers=(this._handlers||[]).concat([dojo.connect(n,"onmousemove",this._drag=function(y,x){var w=y[d]-t,v=b*w+q,u=Math.max(Math.min(v,l),f);if(k||x){o[g]=u;dojo.marginBox(j,o);h(p)}s[p]=b*w+m+(u-v)+"px"}),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(n,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(i)},_stopDrag:function(a){try{if(this.cover){dojo.removeClass(this.cover,"dijitSplitterCoverActive")}if(this.fake){dojo.destroy(this.fake)}dojo.removeClass(this.domNode,"dijitSplitterActive");dojo.removeClass(this.domNode,"dijitSplitterShadow");this._drag(a);this._drag(a,true)}finally{this._cleanupHandlers();if(this.oppNode){this.oppNode._recalc=true}delete this._drag}if(this.container.persist){dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})}},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers},_onKeyPress:function(g){if(this.child.domNode._recalc){this._computeMaxSize();this.child.domNode._recalc=false}this._resize=true;var a=this.horizontal;var d=1;var b=dojo.keys;switch(g.charOrCode){case a?b.UP_ARROW:b.LEFT_ARROW:d*=-1;case a?b.DOWN_ARROW:b.RIGHT_ARROW:break;default:return}var f=dojo.marginBox(this.child.domNode)[a?"h":"w"]+this._factor*d;var h={};h[this.horizontal?"h":"w"]=Math.max(Math.min(f,this._maxSize),this._minSize);dojo.marginBox(this.child.domNode,h);if(this.oppNode){this.oppNode._recalc=true}this.container._layoutChildren(this.region);dojo.stopEvent(g)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitGutter" waiRole="presentation"></div>',postCreate:function(){this.horizontal=/top|bottom/.test(this.region);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}})}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:'<input class="dijit dijitReset dijitLeft" dojoAttachPoint=\'textbox,focusNode\'\r\n\tdojoAttachEvent=\'onmouseenter:_onMouse,onmouseleave:_onMouse\'\r\n\tautocomplete="off" type="${type}" ${nameAttrSetting}\r\n\t/>\r\n',baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints)},_setValueAttr:function(f,d,b){var a;if(f!==undefined){a=this.filter(f);if(typeof b!="string"){if(a!==null&&((typeof a!="number")||!isNaN(a))){b=this.filter(this.format(a,this.constraints))}else{b=""}}}if(b!=null&&b!=undefined&&((typeof b)!="number"||!isNaN(b))&&this.textbox.value!=b){this.textbox.value=b}this.inherited(arguments,[a,d])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue")},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},setDisplayedValue:function(a){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",a)},_setDisplayedValueAttr:function(a){if(a===null||a===undefined){a=""}else{if(typeof a!="string"){a=String(a)}}this.textbox.value=a;this._setValueAttr(this.attr("value"),undefined,a)},format:function(b,a){return((b==null||b==undefined)?"":(b.toString?b.toString():b))},parse:function(b,a){return b},_refreshState:function(){},_onInput:function(b){if(b&&b.type&&/key/i.test(b.type)&&b.keyCode){switch(b.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}}if(this.intermediateChanges){var a=this;setTimeout(function(){a._handleOnChange(a.attr("value"),false)},0)}this._refreshState()},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput)}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput)}this._layoutHack()},_blankValue:"",filter:function(a){if(a===null){return this._blankValue}if(typeof a!="string"){return a}if(this.trim){a=dojo.trim(a)}if(this.uppercase){a=a.toUpperCase()}if(this.lowercase){a=a.toLowerCase()}if(this.propercase){a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}return a},_setBlurValue:function(){this._setValueAttr(this.attr("value"),true)},_onBlur:function(a){if(this.disabled){return}this._setBlurValue();this.inherited(arguments)},_onFocus:function(a){if(this.disabled){return}this._refreshState();this.inherited(arguments)},reset:function(){this.textbox.value="";this.inherited(arguments)}});dijit.selectInputText=function(_4a6,_4a7,stop){var _4a9=dojo.global;var _4aa=dojo.doc;_4a6=dojo.byId(_4a6);if(isNaN(_4a7)){_4a7=0}if(isNaN(stop)){stop=_4a6.value?_4a6.value.length:0}_4a6.focus();if(_4aa.selection&&dojo.body()["createTextRange"]){if(_4a6.createTextRange){var _4ab=_4a6.createTextRange();with(_4ab){collapse(true);moveStart("character",_4a7);moveEnd("character",stop);select()}}}else{if(_4a9.getSelection){var _4ac=_4a9.getSelection();if(_4a6.setSelectionRange){_4a6.setSelectionRange(_4a7,stop)}}}}}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\r\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\r\n\t<div class="dijitTooltipConnector"></div>\r\n</div>\r\n',postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(g,f,b){if(this.aroundNode&&this.aroundNode===f){return}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=g;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var d={};var a=this.isLeftToRight();dojo.forEach((b&&b.length)?b:dijit.Tooltip.defaultPosition,function(i){switch(i){case"after":d[a?"BR":"BL"]=a?"BL":"BR";break;case"before":d[a?"BL":"BR"]=a?"BR":"BL";break;case"below":d[a?"BL":"BR"]=a?"TL":"TR";d[a?"BR":"BL"]=a?"TR":"TL";break;case"above":default:d[a?"TL":"TR"]=a?"BL":"BR";d[a?"TR":"TL"]=a?"BR":"BL";break}});var h=dijit.placeOnScreenAroundElement(this.domNode,f,d,dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=f},orient:function(d,b,a){d.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+a]},_onShow:function(){if(dojo.isIE){this.domNode.style.filter=""}},hide:function(a){if(this._onDeck&&this._onDeck[1]==a){this._onDeck=null}else{if(this.aroundNode===a){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}else{}}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(d,b,a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.show(d,b,a)};dijit.hideTooltip=function(a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(a){this._connectNodes=[];this.connectId=dojo.isArrayLike(a)?a:[a];dojo.forEach(this.connectId,function(d){var b=dojo.byId(d);if(b){this._connectNodes.push(b);dojo.forEach(["onMouseEnter","onMouseLeave","onFocus","onBlur"],function(f){this.connect(b,f.toLowerCase(),"_"+f)},this);if(dojo.isIE){b.style.zoom=1}}},this)},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData")},_onMouseEnter:function(a){this._onHover(a)},_onMouseLeave:function(a){this._onUnHover(a)},_onFocus:function(a){this._focus=true;this._onHover(a);this.inherited(arguments)},_onBlur:function(a){this._focus=false;this._onUnHover(a);this.inherited(arguments)},_onHover:function(b){if(!this._showTimer){var a=b.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(a)}),this.showDelay)}},_onUnHover:function(a){if(this._focus){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()},open:function(a){a=a||this._connectNodes[0];if(!a){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position);this._connectNode=a},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},uninitialize:function(){this.close()}});dijit.Tooltip.defaultPosition=["after","before"]}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}"\r\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\r\n\t><div style="overflow:hidden;"\r\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\r\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\r\n\t\t><div class="dijitReset dijitInputField"\r\n\t\t\t><input class="dijitReset" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\r\n\t\t\t${nameAttrSetting} type=\'${type}\'\r\n\t\t/></div\r\n\t></div\r\n></div>\r\n',baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(a){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(b,a){return(new RegExp("^(?:"+this.regExpGen(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||this.parse(b,a)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0},isValid:function(a){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(a){return this.invalidMessage},getPromptMessage:function(a){return this.promptMessage},_maskValidSubsetError:true,validate:function(f){var g="";var d=this.disabled||this.isValid(f);if(d){this._maskValidSubsetError=true}var b=!d&&f&&this._isValidSubset();var a=this._isEmpty(this.textbox.value);this.state=(d||(!this._hasBeenBlurred&&a)||b)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=false}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",d?"false":"true");if(f){if(a){g=this.getPromptMessage(true)}if(!g&&(this.state=="Error"||(b&&!this._maskValidSubsetError))){g=this.getErrorMessage(true)}}this.displayMessage(g);return d},_message:"",displayMessage:function(a){if(this._message==a){return}this._message=a;dijit.hideTooltip(this.domNode);if(a){dijit.showTooltip(a,this.domNode,this.tooltipPosition)}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage}var d=this.regExpGen(this.constraints);this.regExp=d;var a="";if(d!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(f){switch(f.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":a+=f;break;case")":a+="|$)";break;default:a+="(?:"+f+"|$)";break}})}try{"".search(a)}catch(b){a=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+a+")$"},_setDisabledAttr:function(a){this.inherited(arguments);if(this.valueNode){this.valueNode.disabled=a}this._refreshState()},_setRequiredAttr:function(a){this.required=a;dijit.setWaiState(this.focusNode,"required",a);this._refreshState()},postCreate:function(){if(dojo.isIE){var b=dojo.getComputedStyle(this.focusNode);if(b){var a=b.fontFamily;if(a){this.focusNode.style.fontFamily=a}}}this.inherited(arguments)},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(b,a){return b.toString?b.toString():""},toString:function(){var a=this.filter(this.attr("value"));return a!=null?(typeof a=="string"?a:this.serialize(a,this.constraints)):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.create("input",{style:{display:"none"},type:this.type,name:this.name},this.textbox,"after")},_setDisabledAttr:function(a){this.inherited(arguments);dojo.attr(this.valueNode,"disabled",a)},reset:function(){this.valueNode.value="";this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(b,a){var f="min"in a;var d="max"in a;if(f||d){return(!f||this.compare(b,a.min)>=0)&&(!d||this.compare(b,a.max)<=0)}return true},isInRange:function(a){return this.rangeCheck(this.attr("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var g=this.attr("value");var f=false;var d=false;if("min"in this.constraints){var b=this.constraints.min;g=this.compare(g,((typeof b=="number")&&b>=0&&g!=0)?0:b);f=(typeof g=="number")&&g<0}if("max"in this.constraints){var a=this.constraints.max;g=this.compare(g,((typeof a!="number")||a>0)?a:0);d=(typeof g=="number")&&g>0}return f||d},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(a))},getErrorMessage:function(a){if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(a)){return this.rangeMessage}return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min)}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max)}},_setValueAttr:function(b,a){dijit.setWaiState(this.focusNode,"valuenow",b);this.inherited(arguments)}})}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(f,d){var g=-1;if(f===null){f=undefined}if(d===null){d=undefined}if(f==d){g=0}else{if(f>d||f==null){g=1}}return g};dojo.data.util.sorter.createSortFunction=function(d,b){var a=[];function j(i,k){return function(o,n){var m=b.getValue(o,i);var l=b.getValue(n,i);var p=null;if(b.comparatorMap){if(typeof i!=="string"){i=b.getIdentity(i)}p=b.comparatorMap[i]||dojo.data.util.sorter.basicComparator}p=p||dojo.data.util.sorter.basicComparator;return k*p(m,l)}}var h;for(var f=0;f<d.length;f++){h=d[f];if(h.attribute){var g=(h.descending)?-1:1;a.push(j(h.attribute,g))}}return function(l,k){var n=0;while(n<a.length){var m=a[n++](l,k);if(m!==0){return m}}return 0}}}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(f){f=f||{};if(!f.store){f.store=this}var a=this;var d=function(i,h){if(h.onError){var g=h.scope||dojo.global;h.onError.call(g,i,h)}};var b=function(p,o){var n=o.abort||null;var m=false;var l=o.start?o.start:0;var k=(o.count&&(o.count!==Infinity))?(l+o.count):p.length;o.abort=function(){m=true;if(n){n.call(o)}};var j=o.scope||dojo.global;if(!o.store){o.store=a}if(o.onBegin){o.onBegin.call(j,p.length,o)}if(o.sort){p.sort(dojo.data.util.sorter.createSortFunction(o.sort,a))}if(o.onItem){for(var g=l;(g<p.length)&&(g<k);++g){var q=p[g];if(!m){o.onItem.call(j,q,o)}}}if(o.onComplete&&!m){var h=null;if(!o.onItem){h=p.slice(l,k)}o.onComplete.call(j,h,o)}};this._fetchItems(f,b,d);return f}}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(g,d){var a="^";var f=null;for(var b=0;b<g.length;b++){f=g.charAt(b);switch(f){case"\\":a+=f;b++;a+=g.charAt(b);break;case"*":a+=".*";break;case"?":a+=".";break;case"$":case"^":case"/":case"+":case".":case"|":case"(":case")":case"{":case"}":case"[":case"]":a+="\\";default:a+=f}}a+="$";if(d){return new RegExp(a,"mi")}else{return new RegExp(a,"m")}}}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}"\r\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" dojoAttachPoint="comboNode" waiRole="combobox" tabIndex="-1"\r\n\t><div style="overflow:hidden;"\r\n\t\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\r\n\t\t\tdojoAttachPoint="downArrowNode" waiRole="presentation"\r\n\t\t\tdojoAttachEvent="onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse"\r\n\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\r\n\t\t\t><div class="dijitArrowButtonChar">&#9660;</div\r\n\t\t></div\r\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\r\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\r\n\t\t><div class="dijitReset dijitInputField"\r\n\t\t\t><input ${nameAttrSetting} type="text" autocomplete="off" class=\'dijitReset\'\r\n\t\t\tdojoAttachEvent="onkeypress:_onKeyPress,compositionend"\r\n\t\t\tdojoAttachPoint="textbox,focusNode" waiRole="textbox" waiState="haspopup-true,autocomplete-list"\r\n\t\t/></div\r\n\t></div\r\n></div>\r\n',baseClass:"dijitComboBox",_getCaretPos:function(a){var g=0;if(typeof(a.selectionStart)=="number"){g=a.selectionStart}else{if(dojo.isIE){var d=dojo.doc.selection.createRange().duplicate();var b=a.createTextRange();d.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",d);g=String(b.text).replace(/\r/g,"").length}catch(f){}}}return g},_setCaretPos:function(b,a){a=parseInt(a);dijit.selectInputText(b,a,a)},_setDisabledAttr:function(a){this.inherited(arguments);dijit.setWaiState(this.comboNode,"disabled",a)},_onKeyPress:function(b){var g=b.charOrCode;if(b.altKey||(b.ctrlKey&&(g!="x"&&g!="v"))||b.key==dojo.keys.SHIFT){return}var d=false;var h=this._popupWidget;var f=dojo.keys;var a=null;if(this._isShowingNow){h.handleKey(g);a=h.getHighlightedOption()}switch(g){case f.PAGE_DOWN:case f.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();d=true}else{if(a){this._announceOption(a)}}dojo.stopEvent(b);this._prev_key_backspace=false;this._prev_key_esc=false;break;case f.PAGE_UP:case f.UP_ARROW:if(this._isShowingNow){this._announceOption(a)}dojo.stopEvent(b);this._prev_key_backspace=false;this._prev_key_esc=false;break;case f.ENTER:if(a){if(a==h.nextButton){this._nextSearch(1);dojo.stopEvent(b);break}else{if(a==h.previousButton){this._nextSearch(-1);dojo.stopEvent(b);break}}}else{this._setDisplayedValueAttr(this.attr("displayedValue"),true)}b.preventDefault();case f.TAB:var i=this.attr("displayedValue");if(h&&(i==h._messages.previousMessage||i==h._messages.nextMessage)){break}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(a){h.attr("value",{target:a})}this._lastQuery=null;this._hideResultList()}break;case" ":this._prev_key_backspace=false;this._prev_key_esc=false;if(a){dojo.stopEvent(b);this._selectOption();this._hideResultList()}else{d=true}break;case f.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;if(this._isShowingNow){dojo.stopEvent(b);this._hideResultList()}break;case f.DELETE:case f.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;d=true;break;case f.RIGHT_ARROW:case f.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;d=typeof g=="string"}if(this.searchTimer){clearTimeout(this.searchTimer)}if(d){setTimeout(dojo.hitch(this,"_startSearchFromInput"),1)}},_autoCompleteText:function(d){var a=this.focusNode;dijit.selectInputText(a,a.value.length);var b=this.ignoreCase?"toLowerCase":"substr";if(d[b](0).indexOf(this.focusNode.value[b](0))==0){var f=this._getCaretPos(a);if((f+1)>a.value.length){a.value=d;dijit.selectInputText(a,f)}}else{a.value=d;dijit.selectInputText(a)}},_openResultList:function(d,b){if(this.disabled||this.readOnly||(b.query[this.searchAttr]!=this._lastQuery)){return}this._popupWidget.clearResultList();if(!d.length){this._hideResultList();return}this.item=null;var a=new String(this.store.getValue(d[0],this.searchAttr));if(a&&this.autoComplete&&!this._prev_key_backspace&&(b.query[this.searchAttr]!="*")){this.item=d[0];this._autoCompleteText(a)}b._maxOptions=this._maxOptions;this._popupWidget.createOptions(d,b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(b.direction){if(1==b.direction){this._popupWidget.highlightFirstOption()}else{if(-1==b.direction){this._popupWidget.highlightLastOption()}}this._announceOption(this._popupWidget.getHighlightedOption())}},_showResultList:function(){this._hideResultList();var f=this._popupWidget.getItems(),d=Math.min(f.length,this.maxListLength);this._arrowPressed();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var g=this.open();var b=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((g.h==b.h)&&(g.w==b.w))?"hidden":"auto";var a=g.w;if(g.h<this._popupWidget.domNode.scrollHeight){a+=16}dojo.marginBox(this._popupWidget.domNode,{h:g.h,w:Math.max(a,this.domNode.offsetWidth)});dijit.setWaiState(this.comboNode,"expanded","true")},_hideResultList:function(){if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant")}},_setBlurValue:function(){var a=this.attr("displayedValue");var b=this._popupWidget;if(b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)){this._setValueAttr(this._lastValueReported,true)}else{this.attr("displayedValue",a)}},_onBlur:function(){this._hideResultList();this._arrowIdle();this.inherited(arguments)},_announceOption:function(b){if(b==null){return}var a;if(b==this._popupWidget.nextButton||b==this._popupWidget.previousButton){a=b.innerHTML}else{a=this.store.getValue(b.item,this.searchAttr)}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(b,"id"));this._autoCompleteText(a)},_selectOption:function(a){var b=null;if(!a){a={target:this._popupWidget.getHighlightedOption()}}if(!a.target){this.attr("displayedValue",this.attr("displayedValue"));return}else{b=a.target}if(!a.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(b.item,this.searchAttr).length)}this._doSelect(b)},_doSelect:function(a){this.item=a.item;this.attr("value",this.store.getValue(a.item,this.searchAttr))},_onArrowMouseDown:function(a){if(this.disabled||this.readOnly){return}dojo.stopEvent(a);this.focus();if(this._isShowingNow){this._hideResultList()}else{this._startSearch("")}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_getQueryString:function(a){return dojo.string.substitute(this.queryExpr,[a])},_startSearch:function(a){if(!this._popupWidget){var d=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:d});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",d)}this.item=null;var b=dojo.clone(this.query);this._lastInput=a;this._lastQuery=b[this.searchAttr]=this._getQueryString(a);this.searchTimer=setTimeout(dojo.hitch(this,function(i,j){var h={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:i,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(k){console.error("dijit.form.ComboBox: "+k);dojo.hitch(j,"_hideResultList")()},start:0,count:this.pageSize};dojo.mixin(h,j.fetchProperties);var g=j.store.fetch(h);var f=function(l,k){l.start+=l.count*k;l.direction=k;this.store.fetch(l)};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,f,g)},b,this),this.searchDelay)},_setMaxOptions:function(b,a){this._maxOptions=b},_getValueField:function(){return this.searchAttr},_arrowPressed:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.addClass(this.downArrowNode,"dijitArrowButtonActive")}},_arrowIdle:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.removeClass(this.downArrowNode,"dojoArrowButtonPushed")}},compositionend:function(a){this._onKeyPress({charCode:-1})},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox"}if(!this.store){var a=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(a);if(!this.value||((typeof a.selectedIndex=="number")&&a.selectedIndex.toString()===this.value)){var b=this.store.fetchSelectedItem();if(b){this.value=this.store.getValue(b,this._getValueField())}}}this.inherited(arguments)},postCreate:function(){var a=dojo.query('label[for="'+this.id+'"]');if(a.length){a[0].id=(this.id+"_label");var b=this.comboNode;dijit.setWaiState(b,"labelledby",a[0].id)}this.inherited(arguments)},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy()}},_getMenuLabelFromItem:function(b){var d=this.store.getValue(b,this.labelAttr||this.searchAttr);var a=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){d=this.doHighlight(d,this._escapeHtml(this._lastInput));a="html"}return{html:a=="html",label:d}},doHighlight:function(g,f){var d="i"+(this.highlightMatch=="all"?"g":"");var b=this._escapeHtml(g);f=dojo.regexp.escapeString(f);var a=b.replace(new RegExp("(^|\\s)("+f+")",d),'$1<span class="dijitComboBoxHighlightMatch">$2</span>');return a},_escapeHtml:function(a){a=String(a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return a},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this})},reset:function(){this.item=null;this.inherited(arguments)}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'><li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li><li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li></ul>",_messages:null,postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments)},_setValueAttr:function(a){this.value=a;this.onChange(a)},onChange:function(a){},onPage:function(a){},postCreate:function(){this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage;this.inherited(arguments)},onClose:function(){this._blurOptionNode()},_createOption:function(f,d){var b=d(f);var a=dojo.doc.createElement("li");dijit.setWaiRole(a,"option");if(b.html){a.innerHTML=b.label}else{a.appendChild(dojo.doc.createTextNode(b.label))}if(a.innerHTML==""){a.innerHTML="&nbsp;"}a.item=f;return a},createOptions:function(d,a,b){this.previousButton.style.display=(a.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(d,function(h,g){var j=this._createOption(h,b);j.className="dijitReset dijitMenuItem";dojo.attr(j,"id",this.id+g);this.domNode.insertBefore(j,this.nextButton)},this);var f=false;if(a._maxOptions&&a._maxOptions!=-1){if((a.start+a.count)<a._maxOptions){f=true}else{if((a.start+a.count)>(a._maxOptions-1)){if(a.count==d.length){f=true}}}}else{if(a.count==d.length){f=true}}this.nextButton.style.display=f?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next")},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2])}},getItems:function(){return this.domNode.childNodes},getListLength:function(){return this.domNode.childNodes.length-2},_onMouseDown:function(a){dojo.stopEvent(a)},_onMouseUp:function(a){if(a.target===this.domNode){return}else{if(a.target==this.previousButton){this.onPage(-1)}else{if(a.target==this.nextButton){this.onPage(1)}else{var b=a.target;while(!b.item){b=b.parentNode}this._setValueAttr({target:b},true)}}}},_onMouseOver:function(a){if(a.target===this.domNode){return}var b=a.target;if(!(b==this.previousButton||b==this.nextButton)){while(!b.item){b=b.parentNode}}this._focusOptionNode(b)},_onMouseOut:function(a){if(a.target===this.domNode){return}this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a){this._blurOptionNode();this._highlighted_option=a;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null}},_highlightNextOption:function(){var b=this.domNode.firstChild;if(!this.getHighlightedOption()){this._focusOptionNode(b.style.display=="none"?b.nextSibling:b)}else{var a=this._highlighted_option.nextSibling;if(a&&a.style.display!="none"){this._focusOptionNode(a)}}dijit.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);dijit.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dijit.scrollIntoView(this._highlighted_option)},_highlightPrevOption:function(){var a=this.domNode.lastChild;if(!this.getHighlightedOption()){this._focusOptionNode(a.style.display=="none"?a.previousSibling:a)}else{var b=this._highlighted_option.previousSibling;if(b&&b.style.display!="none"){this._focusOptionNode(b)}}dijit.scrollIntoView(this._highlighted_option)},_page:function(b){var g=0;var f=this.domNode.scrollTop;var d=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption()}while(g<d){if(b){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break}this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break}this._highlightNextOption()}var a=this.domNode.scrollTop;g+=(a-f)*(b?-1:1);f=a}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){var a=this._highlighted_option;return(a&&a.parentNode)?a:null},handleKey:function(a){switch(a){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(b,a){if(!b){b=""}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,b,a)}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(a){this.root=a;dojo.query("> option",a).forEach(function(b){b.innerHTML=dojo.trim(b.innerHTML)})},getValue:function(a,d,b){return(d=="value")?a.value:(a.innerText||a.textContent||"")},isItemLoaded:function(a){return true},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true}},_fetchItems:function(b,g,f){if(!b.query){b.query={}}if(!b.query.name){b.query.name=""}if(!b.queryOptions){b.queryOptions={}}var d=dojo.data.util.filter.patternToRegExp(b.query.name,b.queryOptions.ignoreCase),a=dojo.query("> option",this.root).filter(function(h){return(h.innerText||h.textContent||"").match(d)});if(b.sort){a.sort(dojo.data.util.sorter.createSortFunction(b.sort,this))}g(a,b)},close:function(a){return},getLabel:function(a){return a.innerHTML},getIdentity:function(a){return dojo.attr(a,"value")},fetchItemByIdentity:function(a){var b=dojo.query("option[value='"+a.identity+"']",this.root)[0];a.onItem(b)},fetchSelectedItem:function(){var a=this.root,b=a.selectedIndex;return dojo.query("> option:nth-child("+(b!=-1?b+1:1)+")",a)[0]}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||(!this.required&&this.attr("displayedValue")=="")},_callbackSetLabel:function(d,b,a){if((b&&b.query[this.searchAttr]!=this._lastQuery)||(!b&&d.length&&this.store.getIdentity(d[0])!=this._lastQuery)){return}if(!d.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",a||(a===undefined&&!this._focused));this._isvalid=false;this.validate(this._focused);this.item=null}else{this._setValueFromItem(d[0],a)}},_openResultList:function(a,b){if(b.query[this.searchAttr]!=this._lastQuery){return}this._isvalid=a.length!=0;this.validate(true);dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments)},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValue:function(d,b,a){this.valueNode.value=d;dijit.form.FilteringSelect.superclass._setValueAttr.call(this,d,a,b);this._lastDisplayedValue=b},_setValueAttr:function(f,d){if(!this._onChangeActive){d=null}this._lastQuery=f;if(f===null||f===""){this._setDisplayedValueAttr("",d);return}var b=this;var a=function(g,h){if(g){if(b.store.isItemLoaded(g)){b._callbackSetLabel([g],undefined,h)}else{b.store.loadItem({item:g,onItem:function(j,i){b._callbackSetLabel(j,i,h)}})}}else{b._isvalid=false;b.validate(false)}};this.store.fetchItemByIdentity({identity:f,onItem:function(g){a(g,d)}})},_setValueFromItem:function(a,b){this._isvalid=true;this.item=a;this._setValue(this.store.getIdentity(a),this.labelFunc(a,this.store),b)},labelFunc:function(b,a){return a.getValue(b,this.searchAttr)},_doSelect:function(a){this._setValueFromItem(a.item,true)},_setDisplayedValueAttr:function(g,f){if(!this._created){f=false}if(this.store){var d=dojo.clone(this.query);this._lastQuery=d[this.searchAttr]=g.replace(/([\\\*\?])/g,"\\$1");this.textbox.value=g;this._lastDisplayedValue=g;var b=this;var a={query:d,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(i,h){dojo.hitch(b,"_callbackSetLabel")(i,h,f)},onError:function(h){console.error("dijit.form.FilteringSelect: "+h);dojo.hitch(b,"_setValue")("",g,false)}};dojo.mixin(a,this.fetchProperties);this.store.fetch(a)}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required},undo:function(){this.attr("displayedValue",this._lastDisplayedValue)}})}if(!dojo._hasResource["dijit.Declaration"]){dojo._hasResource["dijit.Declaration"]=true;dojo.provide("dijit.Declaration");dojo.declare("dijit.Declaration",dijit._Widget,{_noScript:true,widgetClass:"",defaults:null,mixins:[],buildRendering:function(){var j=this.srcNodeRef.parentNode.removeChild(this.srcNodeRef),g=dojo.query("> script[type^='dojo/method'][event]",j).orphan(),f=dojo.query("> script[type^='dojo/method']",j).orphan(),d=dojo.query("> script[type^='dojo/connect']",j).orphan(),b=j.nodeName;var a=this.defaults||{};dojo.forEach(g,function(l){var k=l.getAttribute("event"),m=dojo.parser._functionFromScript(l);a[k]=m});this.mixins=this.mixins.length?dojo.map(this.mixins,function(k){return dojo.getObject(k)}):[dijit._Widget,dijit._Templated];a.widgetsInTemplate=true;a._skipNodeCache=true;a.templateString="<"+b+" class='"+j.className+"' dojoAttachPoint='"+(j.getAttribute("dojoAttachPoint")||"")+"' dojoAttachEvent='"+(j.getAttribute("dojoAttachEvent")||"")+"' >"+j.innerHTML.replace(/\%7B/g,"{").replace(/\%7D/g,"}")+"</"+b+">";dojo.query("[dojoType]",j).forEach(function(k){k.removeAttribute("dojoType")});var h=dojo.declare(this.widgetClass,this.mixins,a);var i=d.concat(f);dojo.forEach(i,function(l){var k=l.getAttribute("event")||"postscript",m=dojo.parser._functionFromScript(l);dojo.connect(h.prototype,k,m)})}})}if(!dojo._hasResource["dojox.grid.compat._grid.lib"]){dojo._hasResource["dojox.grid.compat._grid.lib"]=true;dojo.provide("dojox.grid.compat._grid.lib");dojo.mixin(dojox.grid,{na:"...",nop:function(){},getTdIndex:function(a){return a.cellIndex>=0?a.cellIndex:dojo.indexOf(a.parentNode.cells,a)},getTrIndex:function(a){return a.rowIndex>=0?a.rowIndex:dojo.indexOf(a.parentNode.childNodes,a)},getTr:function(b,a){return b&&((b.rows||0)[a]||b.childNodes[a])},getTd:function(d,a,b){return(dojox.grid.getTr(d,a)||0)[b]},findTable:function(a){for(var b=a;b&&b.tagName!="TABLE";b=b.parentNode){}return b},ascendDom:function(b,a){for(var d=b;d&&a(d);d=d.parentNode){}return d},makeNotTagName:function(b){var a=b.toUpperCase();return function(d){return d.tagName!=a}},fire:function(a,f,b){var d=a&&f&&a[f];return d&&(b?d.apply(a,b):a[f]())},setStyleText:function(b,a){if(b.style.cssText==undefined){b.setAttribute("style",a)}else{b.style.cssText=a}},getStyleText:function(a,b){return(a.style.cssText==undefined?a.getAttribute("style"):a.style.cssText)},setStyle:function(d,b,a){if(d&&d.style[b]!=a){d.style[b]=a}},setStyleHeightPx:function(b,a){if(a>=0){dojox.grid.setStyle(b,"height",a+"px")}},mouseEvents:["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"],keyEvents:["keyup","keydown","keypress"],funnelEvents:function(a,j,h,g){var d=(g?g:dojox.grid.mouseEvents.concat(dojox.grid.keyEvents));for(var f=0,b=d.length;f<b;f++){dojo.connect(a,"on"+d[f],j,h)}},removeNode:function(a){a=dojo.byId(a);a&&a.parentNode&&a.parentNode.removeChild(a);return a},getScrollbarWidth:function(){if(this._scrollBarWidth){return this._scrollBarWidth}this._scrollBarWidth=18;try{var b=document.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";document.body.appendChild(b);this._scrollBarWidth=b.offsetWidth-b.clientWidth;document.body.removeChild(b);delete b}catch(a){}return this._scrollBarWidth},getRef:function(a,j,f){var h=f||dojo.global,d=a.split("."),k=d.pop();for(var b=0,g;h&&(g=d[b]);b++){h=(g in h?h[g]:(j?h[g]={}:undefined))}return{obj:h,prop:k}},getProp:function(name,_5e8,_5e9){with(dojox.grid.getRef(name,_5e8,_5e9)){return(obj)&&(prop)&&(prop in obj?obj[prop]:(_5e8?obj[prop]={}:undefined))}},indexInParent:function(a){var b=0,f,d=a.parentNode;while((f=d.childNodes[b++])){if(f==a){return b-1}}return-1},cleanNode:function(g){if(!g){return}var f=function(h){return h.domNode&&dojo.isDescendant(h.domNode,g,true)};var b=dijit.registry.filter(f);for(var d=0,a;(a=b[d]);d++){a.destroy()}delete b},getTagName:function(b){var a=dojo.byId(b);return(a&&a.tagName?a.tagName.toLowerCase():"")},nodeKids:function(f,b){var a=[];var d=0,g;while((g=f.childNodes[d++])){if(dojox.grid.getTagName(g)==b){a.push(g)}}return a},divkids:function(a){return dojox.grid.nodeKids(a,"div")},focusSelectNode:function(a){try{dojox.grid.fire(a,"focus");dojox.grid.fire(a,"select")}catch(b){}},whenIdle:function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)},arrayCompare:function(f,d){for(var b=0,a=f.length;b<a;b++){if(f[b]!=d[b]){return false}}return(f.length==d.length)},arrayInsert:function(d,b,a){if(d.length<=b){d[b]=a}else{d.splice(b,0,a)}},arrayRemove:function(b,a){b.splice(a,1)},arraySwap:function(d,b,a){var f=d[b];d[b]=d[a];d[a]=f},initTextSizePoll:function(_60a){var f=document.createElement("div");with(f.style){top="0px";left="0px";position="absolute";visibility="hidden"}f.innerHTML="TheQuickBrownFoxJumpedOverTheLazyDog";document.body.appendChild(f);var fw=f.offsetWidth;var job=function(){if(f.offsetWidth!=fw){fw=f.offsetWidth;dojox.grid.textSizeChanged()}};window.setInterval(job,_60a||200);dojox.grid.initTextSizePoll=dojox.grid.nop},textSizeChanged:function(){}});dojox.grid.jobs={cancel:function(a){if(a){window.clearTimeout(a)}},jobs:[],job:function(d,f,b){dojox.grid.jobs.cancelJob(d);var a=function(){delete dojox.grid.jobs.jobs[d];b()};dojox.grid.jobs.jobs[d]=setTimeout(a,f)},cancelJob:function(a){dojox.grid.jobs.cancel(dojox.grid.jobs.jobs[a])}}}if(!dojo._hasResource["dojox.grid.compat._grid.scroller"]){dojo._hasResource["dojox.grid.compat._grid.scroller"]=true;dojo.provide("dojox.grid.compat._grid.scroller");dojo.declare("dojox.grid.scroller.base",null,{constructor:function(){this.pageHeights=[];this.stack=[]},rowCount:0,defaultRowHeight:10,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,page:0,pageTop:0,init:function(d,b,a){switch(arguments.length){case 3:this.rowsPerPage=a;case 2:this.keepRows=b;case 1:this.rowCount=d}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},setKeepInfo:function(a){this.keepRows=a;this.keepPages=!this.keepRows?this.keepRows:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},invalidate:function(){this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize()},updateRowCount:function(b){this.invalidateNodes();this.rowCount=b;var a=this.pageCount;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);if(this.pageCount<a){for(var d=a-1;d>=this.pageCount;d--){this.height-=this.getPageHeight(d);delete this.pageHeights[d]}}else{if(this.pageCount>a){this.height+=this.defaultPageHeight*(this.pageCount-a-1)+this.calcLastPageHeight()}}this.resize()},pageExists:function(a){},measurePage:function(a){},positionPage:function(b,a){},repositionPages:function(a){},installPage:function(a){},preparePage:function(a,d,b){},renderPage:function(a){},removePage:function(a){},pacify:function(a){},pacifying:false,pacifyTicks:200,setPacifying:function(a){if(this.pacifying!=a){this.pacifying=a;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=new Date().getTime()},doPacify:function(){var a=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return a},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight}dojox.grid.setStyleHeightPx(this.contentNode,this.height)},calcLastPageHeight:function(){if(!this.pageCount){return 0}var a=this.pageCount-1;var b=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[a]=b;return b},updateContentHeight:function(a){this.height+=a;this.resize()},updatePageHeight:function(b){if(this.pageExists(b)){var d=this.getPageHeight(b);var a=(this.measurePage(b))||(d);this.pageHeights[b]=a;if((a)&&(d!=a)){this.updateContentHeight(a-d);this.repositionPages(b)}}},rowHeightChanged:function(a){this.updatePageHeight(Math.floor(a/this.rowsPerPage))},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage())}},createPageNode:function(){var a=document.createElement("div");a.style.position="absolute";a.style[dojo._isBodyLtr()?"left":"right"]="0";return a},getPageHeight:function(a){var b=this.pageHeights[a];return(b!==undefined?b:this.defaultPageHeight)},pushPage:function(a){return this.stack.push(a)},popPage:function(){return this.stack.shift()},findPage:function(f){var a=0,b=0;for(var d=0;a<this.pageCount;a++,b+=d){d=this.getPageHeight(a);if(b+d>=f){break}}this.page=a;this.pageTop=b},buildPage:function(b,a,d){this.preparePage(b,a);this.positionPage(b,d);this.installPage(b);this.renderPage(b);this.pushPage(b)},needPage:function(f,d){var a=this.getPageHeight(f),b=a;if(!this.pageExists(f)){this.buildPage(f,this.keepPages&&(this.stack.length>=this.keepPages),d);a=this.measurePage(f)||a;this.pageHeights[f]=a;if(a&&(b!=a)){this.updateContentHeight(a-b)}}else{this.positionPage(f,d)}return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(d){this.startPacify();this.findPage(d);var f=this.height;var a=this.getScrollBottom(d);for(var g=this.page,i=this.pageTop;(g<this.pageCount)&&((a<0)||(i<a));g++){i+=this.needPage(g,i)}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,d);this.lastVisibleRow=this.getLastVisibleRow(g-1,i,a);if(f!=this.height){this.repositionPages(g-1)}this.endPacify()},getScrollBottom:function(a){return(this.windowHeight>=0?a+this.windowHeight:-1)},processNodeEvent:function(d,f){var a=d.target;while(a&&(a!=f)&&a.parentNode&&(a.parentNode.parentNode!=f)){a=a.parentNode}if(!a||!a.parentNode||(a.parentNode.parentNode!=f)){return false}var b=a.parentNode;d.topRowIndex=b.pageIndex*this.rowsPerPage;d.rowIndex=d.topRowIndex+dojox.grid.indexInParent(a);d.rowTarget=a;return true},processEvent:function(a){return this.processNodeEvent(a,this.contentNode)},dummy:0});dojo.declare("dojox.grid.scroller",dojox.grid.scroller.base,{constructor:function(){this.pageNodes=[]},renderRow:function(a,b){},removeRow:function(a){},getDefaultNodes:function(){return this.pageNodes},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(b,a){b.style.top=a+"px"},getPageNodePosition:function(a){return a.offsetTop},repositionPageNodes:function(f,b){var d=0;for(var a=0;a<this.stack.length;a++){d=Math.max(this.stack[a],d)}var j=b[f];var h=(j?this.getPageNodePosition(j)+this.getPageHeight(f):0);for(var g=f+1;g<=d;g++){j=b[g];if(j){if(this.getPageNodePosition(j)==h){return}this.positionPage(g,h)}h+=this.getPageHeight(g)}},invalidatePageNode:function(d,b){var a=b[d];if(a){delete b[d];this.removePage(d,a);dojox.grid.cleanNode(a);a.innerHTML=""}return a},preparePageNode:function(b,a,f){var d=(a===null?this.createPageNode():this.invalidatePageNode(a,f));d.pageIndex=b;d.id=(this._pageIdPrefix||"")+"page-"+b;f[b]=d},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(g){var d=this.getDefaultPageNode(g);var b=d.offsetHeight;if(!this._defaultRowHeight){if(d){this._defaultRowHeight=8;var a=d.firstChild;if(a){var f=dojo.doc.createTextNode("T");a.appendChild(f);this._defaultRowHeight=a.offsetHeight;a.removeChild(f)}}}return(this.rowsPerPage==b)?(b*this._defaultRowHeight):b},positionPage:function(b,a){this.positionPageNode(this.getDefaultPageNode(b),a)},repositionPages:function(a){this.repositionPageNodes(a,this.getDefaultNodes())},preparePage:function(b,a){this.preparePageNode(b,(a?this.popPage():null),this.getDefaultNodes())},installPage:function(a){this.contentNode.appendChild(this.getDefaultPageNode(a))},destroyPage:function(a){var b=this.invalidatePageNode(a,this.getDefaultNodes());dojox.grid.removeNode(b)},renderPage:function(a){var f=this.pageNodes[a];for(var d=0,b=a*this.rowsPerPage;(d<this.rowsPerPage)&&(b<this.rowCount);d++,b++){this.renderRow(b,f)}},removePage:function(d){for(var b=0,a=d*this.rowsPerPage;b<this.rowsPerPage;b++,a++){this.removeRow(a)}},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRowNodes:function(h,g,d,b){var k=this.getPageRow(h);var j=dojox.grid.divkids(b[h]);for(var f=0,a=j.length;f<a&&g<d;f++,k++){g+=j[f].offsetHeight}return(k?k-1:k)},getFirstVisibleRow:function(d,a,b){if(!this.pageExists(d)){return 0}return this.getFirstVisibleRowNodes(d,a,b,this.getDefaultNodes())},getLastVisibleRowNodes:function(b,a,j,h){var g=this.getLastPageRow(b);var f=dojox.grid.divkids(h[b]);for(var d=f.length-1;d>=0&&a>j;d--,g--){a-=f[d].offsetHeight}return g+1},getLastVisibleRow:function(b,a,d){if(!this.pageExists(b)){return 0}return this.getLastVisibleRowNodes(b,a,d,this.getDefaultNodes())},findTopRowForNodes:function(k,g){var j=dojox.grid.divkids(g[this.page]);for(var d=0,a=j.length,b=this.pageTop,f;d<a;d++){f=j[d].offsetHeight;b+=f;if(b>=k){this.offset=f-(b-k);return d+this.page*this.rowsPerPage}}return-1},findScrollTopForNodes:function(f,d){var a=Math.floor(f/this.rowsPerPage);var h=0;for(var g=0;g<a;g++){h+=this.getPageHeight(g)}this.pageTop=h;this.needPage(a,this.pageTop);var k=dojox.grid.divkids(d[a]);var j=f-this.rowsPerPage*a;for(var g=0,b=k.length;g<b&&g<j;g++){h+=k[g].offsetHeight}return h},findTopRow:function(a){return this.findTopRowForNodes(a,this.getDefaultNodes())},findScrollTop:function(a){return this.findScrollTopForNodes(a,this.getDefaultNodes())},dummy:0});dojo.declare("dojox.grid.scroller.columns",dojox.grid.scroller,{constructor:function(a){this.setContentNodes(a)},setContentNodes:function(b){this.contentNodes=b;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var a=0;a<this.colCount;a++){this.pageNodes[a]=[]}},getDefaultNodes:function(){return this.pageNodes[0]||[]},scroll:function(a){if(this.colCount){dojox.grid.scroller.prototype.scroll.call(this,a)}},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight}for(var a=0;a<this.colCount;a++){dojox.grid.setStyleHeightPx(this.contentNodes[a],this.height)}},positionPage:function(d,b){for(var a=0;a<this.colCount;a++){this.positionPageNode(this.pageNodes[a][d],b)}},preparePage:function(b,a){var f=(a?this.popPage():null);for(var d=0;d<this.colCount;d++){this.preparePageNode(b,f,this.pageNodes[d])}},installPage:function(b){for(var a=0;a<this.colCount;a++){this.contentNodes[a].appendChild(this.pageNodes[a][b])}},destroyPage:function(a){for(var b=0;b<this.colCount;b++){dojox.grid.removeNode(this.invalidatePageNode(a,this.pageNodes[b]))}},renderPage:function(a){var f=[];for(var d=0;d<this.colCount;d++){f[d]=this.pageNodes[d][a]}for(var d=0,b=a*this.rowsPerPage;(d<this.rowsPerPage)&&(b<this.rowCount);d++,b++){this.renderRow(b,f)}}})}if(!dojo._hasResource["dojox.grid.compat._grid.drag"]){dojo._hasResource["dojox.grid.compat._grid.drag"]=true;dojo.provide("dojox.grid.compat._grid.drag");(function(){var a=dojox.grid.drag={};a.dragging=false;a.hysteresis=2;a.capture=function(b){if(b.setCapture){b.setCapture()}else{document.addEventListener("mousemove",b.onmousemove,true);document.addEventListener("mouseup",b.onmouseup,true);document.addEventListener("click",b.onclick,true)}};a.release=function(b){if(b.releaseCapture){b.releaseCapture()}else{document.removeEventListener("click",b.onclick,true);document.removeEventListener("mouseup",b.onmouseup,true);document.removeEventListener("mousemove",b.onmousemove,true)}};a.start=function(h,g,f,d,b){if(!h||a.dragging){return}a.dragging=true;a.elt=h;a.events={drag:g||dojox.grid.nop,end:f||dojox.grid.nop,start:b||dojox.grid.nop,oldmove:h.onmousemove,oldup:h.onmouseup,oldclick:h.onclick};a.positionX=(d&&("screenX"in d)?d.screenX:false);a.positionY=(d&&("screenY"in d)?d.screenY:false);a.started=(a.position===false);h.onmousemove=a.mousemove;h.onmouseup=a.mouseup;h.onclick=a.click;a.capture(a.elt)};a.end=function(){a.release(a.elt);a.elt.onmousemove=a.events.oldmove;a.elt.onmouseup=a.events.oldup;a.elt.onclick=a.events.oldclick;a.elt=null;try{if(a.started){a.events.end()}}finally{a.dragging=false}};a.calcDelta=function(b){b.deltaX=b.screenX-a.positionX;b.deltaY=b.screenY-a.positionY};a.hasMoved=function(b){return Math.abs(b.deltaX)+Math.abs(b.deltaY)>a.hysteresis};a.mousemove=function(b){b=dojo.fixEvent(b);dojo.stopEvent(b);a.calcDelta(b);if((!a.started)&&(a.hasMoved(b))){a.events.start(b);a.started=true}if(a.started){a.events.drag(b)}};a.mouseup=function(b){dojo.stopEvent(dojo.fixEvent(b));a.end()};a.click=function(b){dojo.stopEvent(dojo.fixEvent(b))}})()}if(!dojo._hasResource["dojox.grid.compat._grid.builder"]){dojo._hasResource["dojox.grid.compat._grid.builder"]=true;dojo.provide("dojox.grid.compat._grid.builder");dojo.declare("dojox.grid.Builder",null,{constructor:function(a){this.view=a;this.grid=a.grid},view:null,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0" role="wairole:presentation">',generateCellMarkup:function(b,h,a,g){var f=[],d;if(g){d=['<th tabIndex="-1" role="wairole:columnheader"']}else{d=['<td tabIndex="-1" role="wairole:gridcell"']}b.colSpan&&d.push(' colspan="',b.colSpan,'"');b.rowSpan&&d.push(' rowspan="',b.rowSpan,'"');d.push(' class="dojoxGrid-cell ');b.classes&&d.push(b.classes," ");a&&d.push(a," ");f.push(d.join(""));f.push("");d=['" idx="',b.index,'" style="'];d.push(b.styles,h||"");b.unitWidth&&d.push("width:",b.unitWidth,";");f.push(d.join(""));f.push("");d=['"'];b.attrs&&d.push(" ",b.attrs);d.push(">");f.push(d.join(""));f.push("");f.push("</td>");return f},isCellNode:function(a){return Boolean(a&&a.getAttribute&&a.getAttribute("idx"))},getCellNodeIndex:function(a){return a?Number(a.getAttribute("idx")):-1},getCellNode:function(g,f){for(var d=0,h;h=dojox.grid.getTr(g.firstChild,d);d++){for(var b=0,a;a=h.cells[b];b++){if(this.getCellNodeIndex(a)==f){return a}}}},findCellTarget:function(b,a){var d=b;while(d&&(!this.isCellNode(d)||(dojox.grid.gridViewTag in d.offsetParent.parentNode&&d.offsetParent.parentNode[dojox.grid.gridViewTag]!=this.view.id))&&(d!=a)){d=d.parentNode}return d!=a?d:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=(a.cellIndex>=0?this.grid.getCell(a.cellIndex):null)},findTarget:function(b,a){var d=b;while(d&&(d!=this.domNode)&&(!(a in d)||(dojox.grid.gridViewTag in d&&d[dojox.grid.gridViewTag]!=this.view.id))){d=d.parentNode}return(d!=this.domNode)?d:null},findRowTarget:function(a){return this.findTarget(a,dojox.grid.rowIndexTag)},isIntraNodeEvent:function(b){try{return(b.cellNode&&b.relatedTarget&&dojo.isDescendant(b.relatedTarget,b.cellNode))}catch(a){return false}},isIntraRowEvent:function(b){try{var d=b.relatedTarget&&this.findRowTarget(b.relatedTarget);return!d&&(b.rowIndex==-1)||d&&(b.rowIndex==d.gridRowIndex)}catch(a){return false}},dispatchEvent:function(a){if(a.dispatch in this){return this[a.dispatch](a)}},domouseover:function(a){if(a.cellNode&&(a.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=a.cellNode;this.grid.onMouseOver(a)}this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&(a.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(a,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(a);if(!this.isIntraRowEvent(a)){this.grid.onMouseOutRow(a)}}},domousedown:function(a){if(a.cellNode){this.grid.onMouseDown(a)}this.grid.onMouseDownRow(a)}});dojo.declare("dojox.grid.contentBuilder",dojox.grid.Builder,{update:function(){this.prepareHtml()},prepareHtml:function(){var g=this.grid.get,f=this.view.structure.rows;for(var b=0,h;(h=f[b]);b++){for(var d=0,a;(a=h[d]);d++){a.get=a.get||(a.value==undefined)&&g;a.markup=this.generateCellMarkup(a,a.cellStyles,a.cellClasses,false)}}},generateHtml:function(n,l){var h=[this._table],p=this.view,a=p.onBeforeRow,s=p.structure.rows;a&&a(l,s);for(var f=0,q;(q=s[f]);f++){if(q.hidden||q.header){continue}h.push(!q.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var g=0,o,d,b,k;(o=q[g]);g++){d=o.markup,b=o.customClasses=[],k=o.customStyles=[];d[5]=o.format(n);d[1]=b.join(" ");d[3]=k.join(";");h.push.apply(h,d)}h.push("</tr>")}h.push("</table>");return h.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode){return false}a.rowIndex=a.rowNode[dojox.grid.rowIndexTag];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return true}});dojo.declare("dojox.grid.headerBuilder",dojox.grid.Builder,{bogusClickTime:0,overResizeWidth:4,minColWidth:1,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0" role="wairole:presentation"',update:function(){this.tableMap=new dojox.grid.tableMap(this.view.structure.rows)},generateHtml:function(d,b){var h=[this._table],m=this.view.structure.rows;if(this.view.viewWidth){h.push([' style="width:',this.view.viewWidth,';"'].join(""))}h.push(">");dojox.grid.fire(this.view,"onBeforeRow",[-1,m]);for(var f=0,l;(l=m[f]);f++){if(l.hidden){continue}h.push(!l.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var g=0,k,a;(k=l[g]);g++){k.customClasses=[];k.customStyles=[];a=this.generateCellMarkup(k,k.headerStyles,k.headerClasses,true);a[5]=(b!=undefined?b:d(k));a[3]=k.customStyles.join(";");a[1]=k.customClasses.join(" ");h.push(a.join(""))}h.push("</tr>")}h.push("</table>");return h.join("")},getCellX:function(d){var a=d.layerX;if(dojo.isMoz){var f=dojox.grid.ascendDom(d.target,dojox.grid.makeNotTagName("th"));a-=(f&&f.offsetLeft)||0;var b=d.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()&&d.sourceView.headerNode.scrollLeft<b){a-=b}}var f=dojox.grid.ascendDom(d.target,function(){if(!f||f==d.cellNode){return false}a+=(f.offsetLeft<0?0:f.offsetLeft);return true});return a},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return true},prepareResize:function(d,b){var a=dojox.grid.getTdIndex(d.cellNode);d.cellNode=(a?d.cellNode.parentNode.cells[a+b]:null);d.cellIndex=(d.cellNode?this.getCellNodeIndex(d.cellNode):-1);return Boolean(d.cellNode)},canResize:function(b){if(!b.cellNode||b.cellNode.colSpan>1){return false}var a=this.grid.getCell(b.cellIndex);return!a.noresize&&!a.isFlex()},overLeftResizeArea:function(b){if(dojo._isBodyLtr()){return(b.cellIndex>0)&&(b.cellX<this.overResizeWidth)&&this.prepareResize(b,-1)}var a=b.cellNode&&(b.cellX<this.overResizeWidth);return},overRightResizeArea:function(a){if(dojo._isBodyLtr()){return a.cellNode&&(a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth)}return(a.cellIndex>0)&&(a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(a,-1)},domousemove:function(a){var b=(this.overRightResizeArea(a)?"e-resize":(this.overLeftResizeArea(a)?"w-resize":""));if(b&&!this.canResize(a)){b="dojoxGridColNoResize"}dojo.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize",(b=="dojoxGridColNoResize"));dojo.toggleClass(a.sourceView.headerNode,"dojoxGridColResize",(b=="dojoxGridColResize"));if(b){dojo.stopEvent(a)}},domousedown:function(a){if(!dojox.grid.drag.dragging){if((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)){this.beginColumnResize(a)}else{this.grid.onMouseDown(a);this.grid.onMouseOverRow(a)}}},doclick:function(a){if(new Date().getTime()<this.bogusClickTime){dojo.stopEvent(a);return true}},beginColumnResize:function(f){dojo.stopEvent(f);var h=[],g=this.tableMap.findOverlappingNodes(f.cellNode);for(var b=0,a;(a=g[b]);b++){h.push({node:a,index:this.getCellNodeIndex(a),width:a.offsetWidth})}var d={scrollLeft:f.sourceView.headerNode.scrollLeft,view:f.sourceView,node:f.cellNode,index:f.cellIndex,w:f.cellNode.clientWidth,spanners:h};dojox.grid.drag.start(f.cellNode,dojo.hitch(this,"doResizeColumn",d),dojo.hitch(this,"endResizeColumn",d),f)},doResizeColumn:function(j,k){var h=dojo._isBodyLtr();if(h){var b=j.w+k.deltaX}else{var b=j.w-k.deltaX}if(b>=this.minColWidth){for(var f=0,g,a;(g=j.spanners[f]);f++){if(h){a=g.width+k.deltaX}else{a=g.width-k.deltaX}g.node.style.width=a+"px";j.view.setColWidth(g.index,a)}j.node.style.width=b+"px";j.view.setColWidth(j.index,b);if(!h){j.view.headerNode.scrollLeft=(j.scrollLeft-k.deltaX)}}if(j.view.flexCells&&!j.view.testFlexCells()){var d=dojox.grid.findTable(j.node);d&&(d.style.width="")}},endResizeColumn:function(a){this.bogusClickTime=new Date().getTime()+30;setTimeout(dojo.hitch(a.view,"update"),50)}});dojo.declare("dojox.grid.tableMap",null,{constructor:function(a){this.mapRows(a)},map:null,mapRows:function(f){var m=f.length;if(!m){return}this.map=[];for(var a=0,o;(o=f[a]);a++){this.map[a]=[]}for(var a=0,o;(o=f[a]);a++){for(var b=0,k=0,l,g,d;(l=o[b]);b++){while(this.map[a][k]){k++}this.map[a][k]={c:b,r:a};d=l.rowSpan||1;g=l.colSpan||1;for(var h=0;h<d;h++){for(var n=0;n<g;n++){this.map[a+h][k+n]=this.map[a][k]}}k+=g}}},dumpMap:function(){for(var b=0,g,f="";(g=this.map[b]);b++,f=""){for(var d=0,a;(a=g[d]);d++){f+=a.r+","+a.c+"   "}}},getMapCoords:function(h,d){for(var b=0,g;(g=this.map[b]);b++){for(var f=0,a;(a=g[f]);f++){if(a.c==d&&a.r==h){return{j:b,i:f}}}}return{j:-1,i:-1}},getNode:function(d,f,b){var a=d&&d.rows[f];return a&&a.cells[b]},_findOverlappingNodes:function(_733,_734,_735){var _736=[];var m=this.getMapCoords(_734,_735);var row=this.map[m.j];for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue}with(row[m.i]){var n=this.getNode(_733,r,c);if(n){_736.push(n)}}}return _736},findOverlappingNodes:function(a){return this._findOverlappingNodes(dojox.grid.findTable(a),dojox.grid.getTrIndex(a.parentNode),dojox.grid.getTdIndex(a))}});dojox.grid.rowIndexTag="gridRowIndex";dojox.grid.gridViewTag="gridView"}if(!dojo._hasResource["dojox.grid.compat._grid.view"]){dojo._hasResource["dojox.grid.compat._grid.view"]=true;dojo.provide("dojox.grid.compat._grid.view");dojo.declare("dojox.GridView",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGrid-view">\r\n\t<div class="dojoxGrid-header" dojoAttachPoint="headerNode">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em">\r\n\t\t\t<div dojoAttachPoint="headerContentNode"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGrid-hidden-focus" dojoAttachPoint="hiddenFocusNode" />\r\n\t<input type="checkbox" class="dojoxGrid-hidden-focus" />\r\n\t<div class="dojoxGrid-scrollbox" dojoAttachPoint="scrollboxNode">\r\n\t\t<div class="dojoxGrid-content" dojoAttachPoint="contentNode" hidefocus="hidefocus"></div>\r\n\t</div>\r\n</div>\r\n',themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,postMixInProperties:function(){this.rowNodes=[]},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new dojox.grid.contentBuilder(this);this.header=new dojox.grid.headerBuilder(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width=""}},destroy:function(){dojox.grid.removeNode(this.headerNode);this.inherited("destroy",arguments)},focus:function(){if(dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus()}else{this.scrollboxNode.focus()}},setStructure:function(a){var b=(this.structure=a);if(b.width&&!isNaN(b.width)){this.viewWidth=b.width+"em"}else{this.viewWidth=b.width||this.viewWidth}this.onBeforeRow=b.onBeforeRow;this.noscroll=b.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden"}this.testFlexCells();this.updateStructure()},testFlexCells:function(){this.flexCells=false;for(var b=0,f;(f=this.structure.rows[b]);b++){for(var d=0,a;(a=f[d]);d++){a.view=this;this.flexCells=this.flexCells||a.isFlex()}}return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){return(this.noscroll?0:dojox.grid.getScrollbarWidth())},getColumnsWidth:function(){return this.headerContentNode.firstChild.offsetWidth},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader()},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent)},_getHeaderContent:function(b){var a=b.name||b.grid.getCellName(b);if(b.index!=b.grid.getSortIndex()){return a}return['<div class="',b.grid.sortInfo>0?"dojoxGrid-sort-down":"dojoxGrid-sort-up",'"><div class="gridArrowButtonChar">',b.grid.sortInfo>0?"&#9660;":"&#9650;","</div>",a,"</div>"].join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasScrollbar:function(){return(this.scrollboxNode.clientHeight!=this.scrollboxNode.offsetHeight)},adaptHeight:function(){if(!this.grid.autoHeight){var a=this.domNode.clientHeight;if(!this.hasScrollbar()){a-=dojox.grid.getScrollbarWidth()}dojox.grid.setStyleHeightPx(this.scrollboxNode,a)}},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();w=Math.max(w,this.getColumnsWidth())+"px";with(this.contentNode){style.width="";offsetWidth;style.width=w}},setSize:function(w,h){with(this.domNode.style){if(w){width=w}height=(h>=0?h+"px":"")}with(this.headerNode.style){if(w){width=w}}},renderRow:function(b,a){var d=this.createRowNode(b);this.buildRow(b,d,a);this.grid.edit.restore(this,b);return d},createRowNode:function(b){var a=document.createElement("div");a.className=this.classTag+"-row";a[dojox.grid.gridViewTag]=this.id;a[dojox.grid.rowIndexTag]=b;this.rowNodes[b]=a;return a},buildRow:function(b,a){this.buildRowContent(b,a);this.styleRow(b,a)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);if(this.flexCells){b.firstChild.style.width=this.contentWidth}},rowRemoved:function(a){this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,d){var b=this.getRowNode(a);if(b){return this.content.getCellNode(b,d)}},styleRow:function(b,a){a._style=dojox.grid.getStyleText(a);this.styleRowNode(b,a)},styleRowNode:function(b,a){if(a){this.doStyleRowNode(b,a)}},doStyleRowNode:function(b,a){this.grid.styleRowNode(b,a)},updateRow:function(f,d,b){var a=this.getRowNode(f);if(a){a.style.height="";this.buildRow(f,a)}return a},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,doscroll:function(b){var a=dojo._isBodyLtr();if(this.firstScroll<2){if((!a&&this.firstScroll==1)||(a&&this.firstScroll==0)){var d=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=d.w+this.getScrollbarWidth()+"px"}else{if(dojo.isMoz){this.headerNodeContainer.style.width=d.w-this.getScrollbarWidth()+"px";if(a){this.scrollboxNode.scrollLeft=this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}else{this.scrollboxNode.scrollLeft=this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth}}}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var f=this.scrollboxNode.scrollTop;if(f!=this.lastTop){this.grid.scrollTo(f)}},setScrollTop:function(a){this.lastTop=a;this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a)){this.grid.onContentEvent(a)}},doHeaderEvent:function(a){if(this.header.decorateEvent(a)){this.grid.onHeaderEvent(a)}},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){var a=this.scrollboxNode.scrollLeft;this.content.update();this.grid.update();this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}})}if(!dojo._hasResource["dojox.grid.compat._grid.views"]){dojo._hasResource["dojox.grid.compat._grid.views"]=true;dojo.provide("dojox.grid.compat._grid.views");dojo.declare("dojox.grid.views",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var b=0,a;a=this.views[b];b++){a.destroy()}this.views=[]},getContentNodes:function(){var d=[];for(var b=0,a;a=this.views[b];b++){d.push(a.contentNode)}return d},forEach:function(b){for(var d=0,a;a=this.views[d];d++){b(a,d)}},onEach:function(a,f){f=f||[];for(var d=0,b;b=this.views[d];d++){if(a in b){b[a].apply(b,f)}}},normalizeHeaderNodeHeight:function(){var a=[];for(var d=0,b;(b=this.views[d]);d++){if(b.headerContentNode.firstChild){a.push(b.headerContentNode)}}this.normalizeRowNodeHeights(a)},normalizeRowNodeHeights:function(g){var b=0;for(var a=0,j,f;(j=g[a]);a++){b=Math.max(b,(j.firstChild.clientHeight)||(j.firstChild.offsetHeight))}b=(b>=0?b:0);var d=b+"px";for(var a=0,j;(j=g[a]);a++){if(j.firstChild.clientHeight!=b){j.firstChild.style.height=d}}if(g&&g[0]){g[0].parentNode.offsetHeight}},resetHeaderNodeHeight:function(){for(var b=0,a,d;(a=this.views[b]);b++){d=a.headerContentNode.firstChild;if(d){d.style.height=""}}},renormalizeRow:function(d){var a=[];for(var f=0,b,g;(b=this.views[f])&&(g=b.getRowNode(d));f++){g.firstChild.style.height="";a.push(g)}this.normalizeRowNodeHeights(a)},getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(b){b.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(d){var f=this.grid.elasticView||-1;if(f<0){for(var b=1,a;(a=this.views[b]);b++){if(a.viewWidth){for(b=1;(a=this.views[b]);b++){if(!a.viewWidth){f=b;break}}break}}}if(f<0){f=Math.floor(this.views.length/2)}return f},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _79d=function(v,l){with(v.domNode.style){if(!dojo._isBodyLtr()){right=l+"px"}else{left=l+"px"}top=0+"px"}with(v.headerNode.style){if(!dojo._isBodyLtr()){right=l+"px"}else{left=l+"px"}top=0}};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_79d(v,l);vw=v.domNode.offsetWidth;l+=vw}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_79d(v,r)}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_79d(v,l)}return l},renderRow:function(b,a){var j=[];for(var f=0,d,h,g;(d=this.views[f])&&(h=a[f]);f++){g=d.renderRow(b);h.appendChild(g);j.push(g)}this.normalizeRowNodeHeights(j)},rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(f,d){for(var b=0,a;a=this.views[b];b++){a.updateRow(f,d)}this.renormalizeRow(f)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(d){var f=d;for(var b=0,a;a=this.views[b];b++){f=a.setScrollTop(d)}return f},getFirstScrollingView:function(){for(var b=0,a;(a=this.views[b]);b++){if(a.hasScrollbar()){return a}}}})}if(!dojo._hasResource["dojox.grid.compat._grid.cell"]){dojo._hasResource["dojox.grid.compat._grid.cell"]=true;dojo.provide("dojox.grid.compat._grid.cell");dojo.declare("dojox.grid.cell",null,{styles:"",constructor:function(a){dojo.mixin(this,a);if(this.editor){this.editor=new this.editor(this)}},format:function(h){var b,a=this.grid.edit.info,g=this.get?this.get(h):this.value;g=(g&&g.replace)?g.replace(/</g,"&lt;"):g;if(this.editor&&(this.editor.alwaysOn||(a.rowIndex==h&&a.cell==this))){return this.editor.format(g,h)}else{return(b=this.formatter)?b.call(this,g,h):g}},getNode:function(a){return this.view.getCellNode(a,this.index)},isFlex:function(){var a=this.unitWidth;return a&&(a=="auto"||a.slice(-1)=="%")},applyEdit:function(b,a){this.grid.edit.applyCellEdit(b,this,a)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){if(this.grid.edit.isEditCell(a,this.index)){this.grid.edit.apply()}},registerOnBlur:function(b,a){if(this.commitOnBlur){dojo.connect(b,"onblur",function(d){setTimeout(dojo.hitch(this,"_onEditBlur",a),250)})}}})}if(!dojo._hasResource["dojox.grid.compat._grid.layout"]){dojo._hasResource["dojox.grid.compat._grid.layout"]=true;dojo.provide("dojox.grid.compat._grid.layout");dojo.declare("dojox.grid.layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",setStructure:function(b){this.fieldIndex=0;this.cells=[];var f=this.structure=[];for(var d=0,a,g;(a=b[d]);d++){f.push(this.addViewDef(a))}this.cellCount=this.cells.length},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};return dojo.mixin({},a,{rows:this.addRowsDef(a.rows||a.cells)})},addRowsDef:function(b){var a=[];for(var d=0,f;b&&(f=b[d]);d++){a.push(this.addRowDef(d,f))}return a},addRowDef:function(h,f){var g=[];for(var b=0,d,a;(d=f[b]);b++){a=this.addCellDef(h,b,d);g.push(a);this.cells.push(a)}return g},addCellDef:function(g,f,d){var b=0;if(d.colSpan>1){b=0}else{if(!isNaN(d.width)){b=d.width+"em"}else{b=d.width||this.defaultWidth}}var a=d.field!=undefined?d.field:(d.get?-1:this.fieldIndex);if((d.field!=undefined)||!d.get){this.fieldIndex=(d.field>-1?d.field:this.fieldIndex)+1}return new dojox.grid.cell(dojo.mixin({},this._defaultCellProps,d,{grid:this.grid,subrow:g,layoutIndex:f,index:this.cells.length,fieldIndex:a,unitWidth:b}))}})}if(!dojo._hasResource["dojox.grid.compat._grid.rows"]){dojo._hasResource["dojox.grid.compat._grid.rows"]=true;dojo.provide("dojox.grid.compat._grid.rows");dojo.declare("dojox.grid.rows",null,{constructor:function(a){this.grid=a},linesToEms:2,defaultRowHeight:1,overRow:-2,getHeight:function(a){return""},getDefaultHeightPx:function(){return 32},prepareStylingRow:function(b,a){return{index:b,node:a,odd:Boolean(b&1),selected:this.grid.selection.isSelected(b),over:this.isOver(b),customStyles:"",customClasses:"dojoxGrid-row"}},styleRowNode:function(b,a){var d=this.prepareStylingRow(b,a);this.grid.onStyleRow(d);this.applyStyles(d)},applyStyles:function(_7e0){with(_7e0){node.className=customClasses;var h=node.style.height;dojox.grid.setStyleText(node,customStyles+";"+(node._style||""));node.style.height=h}},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(b){var a=this.overRow;this.overRow=b;if((a!=this.overRow)&&(a>=0)){this.updateStyles(a)}this.updateStyles(this.overRow)},isOver:function(a){return(this.overRow==a)}})}if(!dojo._hasResource["dojox.grid.compat._grid.focus"]){dojo._hasResource["dojox.grid.compat._grid.focus"]=true;dojo.provide("dojox.grid.compat._grid.focus");dojo.declare("dojox.grid.focus",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;dojo.connect(this.grid.domNode,"onfocus",this,"doFocus")},tabbingOut:false,focusClass:"dojoxGrid-cell-focus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()},isFocusCell:function(b,a){return(this.cell==b)&&(this.rowIndex==a)},isLastFocusCell:function(){return(this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1)},isFirstFocusCell:function(){return(this.rowIndex==0)&&(this.cell.index==0)},isNoFocusCell:function(){return(this.rowIndex<0)||!this.cell},_focusifyCellNode:function(a){var d=this.cell&&this.cell.getNode(this.rowIndex);if(d){dojo.toggleClass(d,this.focusClass,a);if(a){this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.fire(d,"focus")}}catch(b){}}}},scrollIntoView:function(){if(!this.cell){return}var h=this.cell,d=h.view.scrollboxNode,b={w:d.clientWidth,l:d.scrollLeft,t:d.scrollTop,h:d.clientHeight},g=h.getNode(this.rowIndex),f=h.view.getRowNode(this.rowIndex),a=this.grid.scroller.findScrollTop(this.rowIndex);if(g.offsetLeft+g.offsetWidth>b.l+b.w){d.scrollLeft=g.offsetLeft+g.offsetWidth-b.w}else{if(g.offsetLeft<b.l){d.scrollLeft=g.offsetLeft}}if(a+f.offsetHeight>b.t+b.h){this.grid.setScrollTop(a+f.offsetHeight-b.h)}else{if(a<b.t){this.grid.setScrollTop(a)}}},styleRow:function(a){return},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(b,a){if(b&&!this.isFocusCell(b,a)){this.tabbingOut=false;this.focusGridView();this._focusifyCellNode(false);this.cell=b;this.rowIndex=a;this._focusifyCellNode(true)}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1)}else{this.grid.onCellFocus(this.cell,this.rowIndex)}},next:function(){var d=this.rowIndex,a=this.cell.index+1,f=this.grid.layout.cellCount-1,b=this.grid.rowCount-1;if(a>f){a=0;d++}if(d>b){a=f;d=b}this.setFocusIndex(d,a)},previous:function(){var b=(this.rowIndex||0),a=(this.cell.index||0)-1;if(a<0){a=this.grid.layout.cellCount-1;b--}if(b<0){b=0;a=0}this.setFocusIndex(b,a)},move:function(g,d){var h=this.grid.rowCount-1,k=this.grid.layout.cellCount-1,f=this.rowIndex,b=this.cell.index,j=Math.min(h,Math.max(0,f+g)),a=Math.min(k,Math.max(0,b+d));this.setFocusIndex(j,a);if(g){this.grid.updateRow(f)}},previousKey:function(a){if(this.isFirstFocusCell()){this.tabOut(this.grid.domNode)}else{dojo.stopEvent(a);this.previous()}},nextKey:function(a){if(this.isLastFocusCell()){this.tabOut(this.grid.lastFocusNode)}else{dojo.stopEvent(a);this.next()}},tabOut:function(a){this.tabbingOut=true;a.focus()},focusGridView:function(){dojox.grid.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView();this._focusifyCellNode(true)},doFocus:function(a){if(a&&a.target!=a.currentTarget){return}if(!this.tabbingOut&&this.isNoFocusCell()){this.setFocusIndex(0,0)}this.tabbingOut=false}})}if(!dojo._hasResource["dojox.grid.compat._grid.selection"]){dojo._hasResource["dojox.grid.compat._grid.selection"]=true;dojo.provide("dojox.grid.compat._grid.selection");dojo.declare("dojox.grid.selection",null,{constructor:function(a){this.grid=a;this.selected=[]},multiSelect:true,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(a){return this.grid.onCanSelect(a)},onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(a){return this.grid.onSelected(a)},onDeselected:function(a){return this.grid.onDeselected(a)},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged()},isSelected:function(a){return this.selected[a]},getFirstSelected:function(){for(var b=0,a=this.selected.length;b<a;b++){if(this.selected[b]){return b}}return-1},getNextSelected:function(b){for(var d=b+1,a=this.selected.length;d<a;d++){if(this.selected[d]){return d}}return-1},getSelected:function(){var d=[];for(var b=0,a=this.selected.length;b<a;b++){if(this.selected[b]){d.push(b)}}return d},getSelectedCount:function(){var b=0;for(var a=0;a<this.selected.length;a++){if(this.selected[a]){b++}}return b},beginUpdate:function(){if(this.updating==0){this.onChanging()}this.updating++},endUpdate:function(){this.updating--;if(this.updating==0){this.onChanged()}},select:function(a){this.unselectAll(a);this.addToSelection(a)},addToSelection:function(a){a=Number(a);if(this.selected[a]){this.selectedIndex=a}else{if(this.onCanSelect(a)!==false){this.selectedIndex=a;this.beginUpdate();this.selected[a]=true;this.grid.onSelected(a);this.endUpdate()}}},deselect:function(a){a=Number(a);if(this.selectedIndex==a){this.selectedIndex=-1}if(this.selected[a]){if(this.onCanDeselect(a)===false){return}this.beginUpdate();delete this.selected[a];this.grid.onDeselected(a);this.endUpdate()}},setSelected:function(b,a){this[(a?"addToSelection":"deselect")](b)},toggleSelect:function(a){this.setSelected(a,!this.selected[a])},insert:function(a){this.selected.splice(a,0,false);if(this.selectedIndex>=a){this.selectedIndex++}},remove:function(a){this.selected.splice(a,1);if(this.selectedIndex>=a){this.selectedIndex--}},unselectAll:function(a){for(var b in this.selected){if((b!=a)&&(this.selected[b]===true)){this.deselect(b)}}},shiftSelect:function(a,f){var d=(a>=0?a:f),g=f;if(d>g){g=d;d=f}for(var b=d;b<=g;b++){this.addToSelection(b)}},clickSelect:function(b,a,f){this.beginUpdate();if(!this.multiSelect){this.select(b)}else{var d=this.selectedIndex;if(!a){this.unselectAll(b)}if(f){this.shiftSelect(d,b)}else{if(a){this.toggleSelect(b)}else{this.addToSelection(b)}}}this.endUpdate()},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.dnd.getCopyKeyState(a),a.shiftKey)},clear:function(){this.beginUpdate();this.unselectAll();this.endUpdate()}})}if(!dojo._hasResource["dojox.grid.compat._grid.edit"]){dojo._hasResource["dojox.grid.compat._grid.edit"]=true;dojo.provide("dojox.grid.compat._grid.edit");dojo.declare("dojox.grid.edit",null,{constructor:function(a){this.grid=a;this.connections=[];if(dojo.isIE){this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")))}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(b,a){if(this.grid.singleClickEdit||this.isEditRow(a)){this.setEditCell(b,a)}else{this.apply()}if(this.isEditing()||(b&&(b.editor||0).alwaysOn)){this._focusEditor(b,a)}},rowClick:function(a){if(this.isEditing()&&!this.isEditRow(a.rowIndex)){this.apply()}},styleRow:function(a){if(a.index==this.info.rowIndex){a.customClasses+=" dojoxGrid-row-editing"}},dispatchEvent:function(b){var d=b.cell,a=d&&d.editor;return a&&a.dispatchEvent(b.dispatch,b)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(b,a){return(this.info.rowIndex===b)&&(this.info.cell.index==a)},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(b,a){if(!this.isEditCell(a,b.index)&&this.grid.canEdit(b,a)){this.start(b,a,this.isEditRow(a)||b.editor)}},_focusEditor:function(b,a){dojox.grid.fire(b.editor,"focus",[a])},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex)}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow}},start:function(d,b,a){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(b)){this.applyRowEdit();this.grid.updateRow(b)}if(a){this.info={cell:d,rowIndex:b};this.grid.doStartEdit(d,b);this.grid.updateRow(b)}else{this.info={}}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(d,b);this._doCatchBoomerang()},_editorDo:function(a){var b=this.info.cell;b&&b.editor&&b.editor[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(d,b,a){if(this.grid.canEdit(b,a)){this.grid.doApplyCellEdit(d,a,b.fieldIndex)}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(b,a){var d=this.info.cell;if(this.isEditRow(b)&&(!a||d.view==a)&&d.editor){d.editor.save(d,this.info.rowIndex)}},restore:function(b,a){var d=this.info.cell;if(this.isEditRow(a)&&d.view==b&&d.editor){d.editor.restore(d,this.info.rowIndex)}}})}if(!dojo._hasResource["dojox.grid.compat._grid.rowbar"]){dojo._hasResource["dojox.grid.compat._grid.rowbar"]=true;dojo.provide("dojox.grid.compat._grid.rowbar");dojo.declare("dojox.GridRowView",dojox.GridView,{defaultWidth:"3em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(d,b){var a=this.contentNode.offsetWidth-this.padBorderWidth;b.innerHTML='<table style="width:'+a+'px;" role="wairole:presentation"><tr><td class="dojoxGrid-rowbar-inner"></td></tr></table>'},renderHeader:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){},doStyleRowNode:function(a,d){var b=["dojoxGrid-rowbar"];if(this.grid.rows.isOver(a)){b.push("dojoxGrid-rowbar-over")}if(this.grid.selection.isSelected(a)){b.push("dojoxGrid-rowbar-selected")}d.className=b.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a)){this.grid.onMouseOutRow(a)}}})}if(!dojo._hasResource["dojox.grid.compat._grid.publicEvents"]){dojo._hasResource["dojox.grid.compat._grid.publicEvents"]=true;dojo.provide("dojox.grid.compat._grid.publicEvents");dojox.grid.publicEvents={cellOverClass:"dojoxGrid-cell-over",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(_855){with(_855){customClasses+=(odd?" dojoxGrid-row-odd":"")+(selected?" dojoxGrid-row-selected":"")+(over?" dojoxGrid-row-over":"")}this.focus.styleRow(_855);this.edit.styleRow(_855)},onKeyDown:function(f){if(f.altKey||f.ctrlKey||f.metaKey){return}var d=dojo.keys;switch(f.keyCode){case d.ESCAPE:this.edit.cancel();break;case d.ENTER:if(!f.shiftKey){var b=this.edit.isEditing();this.edit.apply();if(!b){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}}break;case d.TAB:this.focus[f.shiftKey?"previousKey":"nextKey"](f);break;case d.LEFT_ARROW:case d.RIGHT_ARROW:if(!this.edit.isEditing()){dojo.stopEvent(f);var a=(f.keyCode==d.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){a*=-1}this.focus.move(0,a)}break;case d.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(f);this.focus.move(-1,0)}break;case d.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.model.count){dojo.stopEvent(f);this.focus.move(1,0)}break;case d.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(f);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case d.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.model.count){dojo.stopEvent(f);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)}}break}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){if(!this.rows.isOver(a.rowIndex)){this.rows.setOverRow(a.rowIndex);a.rowIndex==-1?this.onHeaderMouseOver(a):this.onRowMouseOver(a)}},onMouseOutRow:function(a){if(this.rows.isOver(-1)){this.onHeaderMouseOut(a)}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(a)}}},onMouseDownRow:function(a){if(a.rowIndex!=-1){this.onRowMouseDown(a)}},onCellMouseOver:function(a){dojo.addClass(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){dojo.removeClass(a.cellNode,this.cellOverClass)},onCellMouseDown:function(a){},onCellClick:function(a){this._click[0]=this._click[1];this._click[1]=a;if(!this.edit.isEditCell(a.rowIndex,a.cellIndex)){this.focus.setFocusCell(a.cell,a.rowIndex)}this.onRowClick(a)},onCellDblClick:function(a){if(dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex)}else{if(this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex)}else{this.edit.setEditCell(a.cell,a.rowIndex)}}this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(b,a){this.edit.cellFocus(b,a)},onRowClick:function(a){this.edit.rowClick(a);this.selection.clickSelectEvent(a)},onRowDblClick:function(a){},onRowMouseOver:function(a){},onRowMouseOut:function(a){},onRowMouseDown:function(a){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(a){},onHeaderMouseOut:function(a){},onHeaderCellMouseOver:function(a){dojo.addClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){dojo.removeClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(a){},onHeaderClick:function(a){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(a){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){dojo.stopEvent(a)},onStartEdit:function(a,b){},onApplyCellEdit:function(d,b,a){},onCancelEdit:function(a){},onApplyEdit:function(a){},onCanSelect:function(a){return true},onCanDeselect:function(a){return true},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}}}if(!dojo._hasResource["dojox.grid.compat.VirtualGrid"]){dojo._hasResource["dojox.grid.compat.VirtualGrid"]=true;dojo.provide("dojox.grid.compat.VirtualGrid");dojo.declare("dojox.VirtualGrid",[dijit._Widget,dijit._Templated],{templateString:'<div class="dojoxGrid" hidefocus="hidefocus" role="wairole:grid">\r\n\t<div class="dojoxGrid-master-header" dojoAttachPoint="viewsHeaderNode"></div>\r\n\t<div class="dojoxGrid-master-view" dojoAttachPoint="viewsNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',classTag:"dojoxGrid",get:function(a){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,autoHeight:false,autoRender:true,defaultHeight:"15em",structure:"",elasticView:-1,singleClickEdit:false,_click:null,sortInfo:0,themeable:true,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.VirtualGrid.prototype.get){this.get=null}if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0"}this.createScroller();this.createLayout();this.createViews();this.createManagers();dojox.grid.initTextSizePoll();this.connect(dojox.grid,"textSizeChanged","textSizeChanged");dojox.grid.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.keyEvents);this.connect(this,"onShow","renderOnIdle")},postCreate:function(){this.styleChanged=this._styleChanged;this.setStructure(this.structure);this._click=[]},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;this.edit.destroy();this.views.destroyViews();this.inherited(arguments)},styleChanged:function(){this.setStyledClass(this.domNode,"")},_styleChanged:function(){this.styleChanged();this.update()},textSizeChanged:function(){setTimeout(dojo.hitch(this,"_textSizeChanged"),1)},_textSizeChanged:function(){if(this.domNode){this.views.forEach(function(a){a.content.update()});this.render()}},sizeChange:function(){dojox.grid.jobs.job(this.id+"SizeChange",50,dojo.hitch(this,"update"))},renderOnIdle:function(){setTimeout(dojo.hitch(this,"render"),1)},createManagers:function(){this.rows=new dojox.grid.rows(this);this.focus=new dojox.grid.focus(this);this.selection=new dojox.grid.selection(this);this.edit=new dojox.grid.edit(this)},createScroller:function(){this.scroller=new dojox.grid.scroller.columns();this.scroller._pageIdPrefix=this.id+"-";this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new dojox.grid.layout(this)},createViews:function(){this.views=new dojox.grid.views(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(_886){if(dojo.isAIR){var obj=window;var _888=_886.split(".");for(var i=0;i<_888.length;i++){if(typeof obj[_888[i]]=="undefined"){var _88a=_888[0];for(var j=1;j<=i;j++){_88a+="."+_888[j]}throw new Error(_88a+" is undefined")}obj=obj[_888[i]]}var c=obj}else{var c=eval(_886)}var view=new c({grid:this});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);return view},buildViews:function(){for(var a=0,b;(b=this.layout.structure[a]);a++){this.createView(b.type||dojox._scopeName+".GridView").setStructure(b)}this.scroller.setContentNodes(this.views.getContentNodes())},setStructure:function(a){this.views.destroyViews();this.structure=a;if((this.structure)&&(dojo.isString(this.structure))){this.structure=dojox.grid.getProp(this.structure)}if(!this.structure){this.structure=window.layout}if(!this.structure){return}this.layout.setStructure(this.structure);this._structureChanged()},_structureChanged:function(){this.buildViews();if(this.autoRender){this.render()}},hasLayout:function(){return this.layout.cells.length},resize:function(a){this._sizeBox=a;this._resize();this.sizeChange()},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder},_resize:function(){if(!this.domNode.parentNode||this.domNode.parentNode.nodeType!=1||!this.hasLayout()){return}var b=this._getPadBorder();if(this.autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height=""}else{if(this.flex>0){}else{if(this.domNode.clientHeight<=b.h){if(this.domNode.parentNode==document.body){this.domNode.style.height=this.defaultHeight}else{this.fitTo="parent"}}}}if(this._sizeBox){dojo.contentBox(this.domNode,this._sizeBox)}else{if(this.fitTo=="parent"){var a=dojo._getContentBox(this.domNode.parentNode).h;dojo.marginBox(this.domNode,{h:Math.max(0,a)})}}var a=dojo._getContentBox(this.domNode).h;if(a==0&&!this.autoHeight){this.viewsHeaderNode.style.display="none"}else{this.viewsHeaderNode.style.display="block"}this.adaptWidth();this.adaptHeight();this.scroller.defaultRowHeight=this.rows.getDefaultHeightPx()+1;this.postresize()},adaptWidth:function(){var a=this.autoWidth?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w);var b=this.views.arrange(1,a);this.views.onEach("adaptWidth");if(this.autoWidth){this.domNode.style.width=b+"px"}},adaptHeight:function(){var d=this.viewsHeaderNode.style,a=d.display=="none"?0:this.views.measureHeader();d.height=a+"px";this.views.normalizeHeaderNodeHeight();var b=(this.autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0);this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");this.scroller.windowHeight=b},render:function(){if(!this.domNode){return}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return}this.update=this.defaultUpdate;this.scroller.init(this.rowCount,this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this.autoHeight?0:this.constructor.prototype.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,false)},postresize:function(){if(this.autoHeight){this.viewsNode.style.height=this.views.measureContent()+"px"}},renderRow:function(b,a){this.views.renderRow(b,a)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:false,beginUpdate:function(){if(this.invalidated==null){this.invalidated={rows:[],count:1,all:false,rowCount:undefined}}else{this.invalidated.count++}this.updating=true},endUpdate:function(){var a=this.invalidated;if(--a.count===0){this.updating=false;if(a.rows.length>0){for(var b in a.rows){this.updateRow(Number(b))}this.invalidated.rows=[]}if(a.rowCount!=undefined){this.updateRowCount(a.rowCount);a.rowCount=undefined}if(a.all){this.update();a.all=false}}},defaultUpdate:function(){if(!this.domNode){return}if(this.updating){this.invalidated.all=true;return}this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.scrollTop);this.postrender()},update:function(){this.render()},updateRow:function(a){a=Number(a);if(this.updating){this.invalidated.rows[a]=true}else{this.views.updateRow(a,this.rows.getHeight(a));this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){if(this.updating){this.invalidated.rowCount=a}else{this.rowCount=a;if(this.layout.cells.length){this.scroller.updateRowCount(a);this.setScrollTop(this.scrollTop)}this._resize()}},updateRowStyles:function(a){this.views.updateRowStyles(a)},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(b){if(!this.fastScroll){this.setScrollTop(b);return}var a=Math.abs(this.lastScrollTop-b);this.lastScrollTop=b;if(a>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=b;this.views.setScrollTop(b);dojox.grid.jobs.job("dojoxGrid-scroll",200,dojo.hitch(this,"finishScrollJob"))}else{this.setScrollTop(b)}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scrollTop=this.views.setScrollTop(a);this.scroller.scroll(this.scrollTop)},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(b,a){if(a){this.rows.styleRowNode(b,a)}},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){a=a==undefined?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==undefined?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var d=a+1;if(b!=undefined){d*=(b?1:-1)}else{if(this.getSortIndex()==a){d=-this.sortInfo}}this.setSortInfo(d)},setSortInfo:function(a){if(this.canSort(a)){this.sortInfo=a;this.sort();this.update()}},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this){return this[a](b)}},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode){this.onCellClick(a)}else{this.onRowClick(a)}},dodblclick:function(a){if(a.cellNode){this.onCellDblClick(a)}else{this.onRowDblClick(a)}},docontextmenu:function(a){if(a.cellNode){this.onCellContextMenu(a)}else{this.onRowContextMenu(a)}},doheaderclick:function(a){if(a.cellNode){this.onHeaderCellClick(a)}else{this.onHeaderClick(a)}},doheaderdblclick:function(a){if(a.cellNode){this.onHeaderCellDblClick(a)}else{this.onHeaderDblClick(a)}},doheadercontextmenu:function(a){if(a.cellNode){this.onHeaderCellContextMenu(a)}else{this.onHeaderContextMenu(a)}},doStartEdit:function(b,a){this.onStartEdit(b,a)},doApplyCellEdit:function(b,a,d){this.onApplyCellEdit(b,a,d)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.rowCount+1)},removeSelectedRows:function(){this.updateRowCount(Math.max(0,this.rowCount-this.selection.getSelected().length));this.selection.clear()}});dojo.mixin(dojox.VirtualGrid.prototype,dojox.grid.publicEvents)}if(!dojo._hasResource["dojox.grid.compat._data.fields"]){dojo._hasResource["dojox.grid.compat._data.fields"]=true;dojo.provide("dojox.grid.compat._data.fields");dojo.declare("dojox.grid.data.Mixer",null,{constructor:function(){this.defaultValue={};this.values=[]},count:function(){return this.values.length},clear:function(){this.values=[]},build:function(b){var a=dojo.mixin({owner:this},this.defaultValue);a.key=b;this.values[b]=a;return a},getDefault:function(){return this.defaultValue},setDefault:function(f){for(var d=0,b;(b=arguments[d]);d++){dojo.mixin(this.defaultValue,b)}},get:function(a){return this.values[a]||this.build(a)},_set:function(f,d){var a=this.get(f);for(var b=1;b<arguments.length;b++){dojo.mixin(a,arguments[b])}this.values[f]=a},set:function(){if(arguments.length<1){return}var d=arguments[0];if(!dojo.isArray(d)){this._set.apply(this,arguments)}else{if(d.length&&d[0]["default"]){this.setDefault(d.shift())}for(var f=0,b=d.length;f<b;f++){this._set(f,d[f])}}},insert:function(b,a){if(b>=this.values.length){this.values[b]=a}else{this.values.splice(b,0,a)}},remove:function(a){this.values.splice(a,1)},swap:function(b,a){dojox.grid.arraySwap(this.values,b,a)},move:function(b,a){dojox.grid.arrayMove(this.values,b,a)}});dojox.grid.data.compare=function(f,d){return(f>d?1:(f==d?0:-1))};dojo.declare("dojox.grid.data.Field",null,{constructor:function(a){this.name=a;this.compare=dojox.grid.data.compare},na:dojox.grid.na});dojo.declare("dojox.grid.data.Fields",dojox.grid.data.Mixer,{constructor:function(b){var a=b?b:dojox.grid.data.Field;this.defaultValue=new a()},indexOf:function(d){for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a&&a.key==d){return b}}return-1}})}if(!dojo._hasResource["dojox.grid.compat._data.model"]){dojo._hasResource["dojox.grid.compat._data.model"]=true;dojo.provide("dojox.grid.compat._data.model");dojo.declare("dojox.grid.data.Model",null,{constructor:function(b,a){this.observers=[];this.fields=new dojox.grid.data.Fields();if(b){this.fields.set(b)}this.setData(a)},count:0,updating:0,observer:function(b,a){this.observers.push({o:b,p:a||"model"})},notObserver:function(b){for(var d=0,a,f;(f=this.observers[d]);d++){if(f.o==b){this.observers.splice(d,1);return}}},notify:function(g,d){var f=d||[];for(var h=0,b,j;(j=this.observers[h]);h++){b=j.p+g;j=j.o;(b in j)&&(j[b].apply(j,f))}},clear:function(){this.fields.clear();this.clearData()},beginUpdate:function(){this.notify("BeginUpdate",arguments)},endUpdate:function(){this.notify("EndUpdate",arguments)},clearData:function(){this.setData(null)},change:function(){this.notify("Change",arguments)},insertion:function(){this.notify("Insertion",arguments);this.notify("Change",arguments)},removal:function(){this.notify("Removal",arguments);this.notify("Change",arguments)},insert:function(a){if(!this._insert.apply(this,arguments)){return false}this.insertion.apply(this,dojo._toArray(arguments,1));return true},remove:function(a){if(!this._remove.apply(this,arguments)){return false}this.removal.apply(this,arguments);return true},canSort:function(){return this.sort!=null},generateComparator:function(f,d,b,a){return function(h,g){var i=f(h[d],g[d]);return i?(b?i:-i):a&&a(h,g)}},makeComparator:function(h){var b,f,d,a=null;for(var g=h.length-1;g>=0;g--){b=h[g];f=Math.abs(b)-1;if(f>=0){d=this.fields.get(f);a=this.generateComparator(d.compare,d.key,b>0,a)}}return a},sort:null,dummy:0});dojo.declare("dojox.grid.data.Rows",dojox.grid.data.Model,{allChange:function(){this.notify("AllChange",arguments);this.notify("Change",arguments)},rowChange:function(){this.notify("RowChange",arguments)},datumChange:function(){this.notify("DatumChange",arguments)},beginModifyRow:function(a){if(!this.cache[a]){this.cache[a]=this.copyRow(a)}},endModifyRow:function(b){var a=this.cache[b];if(a){var d=this.getRow(b);if(!dojox.grid.arrayCompare(a,d)){this.update(a,d,b)}delete this.cache[b]}},cancelModifyRow:function(b){var a=this.cache[b];if(a){this.setRow(a,b);delete this.cache[b]}}});dojo.declare("dojox.grid.data.Table",dojox.grid.data.Rows,{constructor:function(){this.cache=[]},colCount:0,data:null,cache:null,measure:function(){this.count=this.getRowCount();this.colCount=this.getColCount();this.allChange()},getRowCount:function(){return(this.data?this.data.length:0)},getColCount:function(){return(this.data&&this.data.length?this.data[0].length:this.fields.count())},badIndex:function(b,a){console.error("dojox.grid.data.Table: badIndex")},isGoodIndex:function(b,a){return(b>=0&&b<this.count&&(arguments.length<2||(a>=0&&a<this.colCount)))},getRow:function(a){return this.data[a]},copyRow:function(a){return this.getRow(a).slice(0)},getDatum:function(a,b){return this.data[a][b]},get:function(){throw('Plain "get" no longer supported. Use "getRow" or "getDatum".')},setData:function(a){this.data=(a||[]);this.allChange()},setRow:function(a,b){this.data[b]=a;this.rowChange(a,b);this.change()},setDatum:function(d,b,a){this.data[b][a]=d;this.datumChange(d,b,a)},set:function(){throw('Plain "set" no longer supported. Use "setData", "setRow", or "setDatum".')},setRows:function(f,d){for(var b=0,a=f.length,g=d;b<a;b++,g++){this.setRow(f[b],g)}},update:function(a,d,b){return true},_insert:function(b,a){dojox.grid.arrayInsert(this.data,a,b);this.count++;return true},_remove:function(a){for(var b=a.length-1;b>=0;b--){dojox.grid.arrayRemove(this.data,a[b])}this.count-=a.length;return true},sort:function(){this.data.sort(this.makeComparator(arguments))},swap:function(a,b){dojox.grid.arraySwap(this.data,a,b);this.rowChange(this.getRow(a),a);this.rowChange(this.getRow(b),b);this.change()},dummy:0});dojo.declare("dojox.grid.data.Objects",dojox.grid.data.Table,{constructor:function(d,b,a){if(!d){this.autoAssignFields()}},allChange:function(){this.notify("FieldsChange");this.inherited(arguments)},autoAssignFields:function(){var h=this.data[0],b=0,a;for(var g in h){a=this.fields.get(b++);if(!dojo.isString(a.key)){a.key=g}}},setData:function(a){this.data=(a||[]);this.autoAssignFields();this.allChange()},getDatum:function(b,a){return this.data[b][this.fields.get(a).key]}});dojo.declare("dojox.grid.data.Dynamic",dojox.grid.data.Table,{constructor:function(){this.page=[];this.pages=[]},page:null,pages:null,rowsPerPage:100,requests:0,bop:-1,eop:-1,clearData:function(){this.pages=[];this.bop=this.eop=-1;this.setData([])},getRowCount:function(){return this.count},getColCount:function(){return this.fields.count()},setRowCount:function(a){this.count=a;this.change()},requestsPending:function(a){},rowToPage:function(a){return(this.rowsPerPage?Math.floor(a/this.rowsPerPage):a)},pageToRow:function(a){return(this.rowsPerPage?this.rowsPerPage*a:a)},requestRows:function(b,a){},rowsProvided:function(a,b){this.requests--;if(this.requests==0){this.requestsPending(false)}},requestPage:function(d){var b=this.pageToRow(d);var a=Math.min(this.rowsPerPage,this.count-b);if(a>0){this.requests++;this.requestsPending(true);setTimeout(dojo.hitch(this,"requestRows",b,a),1)}},needPage:function(a){if(!this.pages[a]){this.pages[a]=true;this.requestPage(a)}},preparePage:function(b,a){if(b<this.bop||b>=this.eop){var d=this.rowToPage(b);this.needPage(d);this.bop=d*this.rowsPerPage;this.eop=this.bop+(this.rowsPerPage||this.count)}},isRowLoaded:function(a){return Boolean(this.data[a])},removePages:function(d){for(var a=0,b;((b=d[a])!=undefined);a++){this.pages[this.rowToPage(b)]=false}this.bop=this.eop=-1},remove:function(a){this.removePages(a);dojox.grid.data.Table.prototype.remove.apply(this,arguments)},getRow:function(a){var b=this.data[a];if(!b){this.preparePage(a)}return b},getDatum:function(b,a){var d=this.getRow(b);return(d?d[a]:this.fields.get(a).na)},setDatum:function(f,d,a){var b=this.getRow(d);if(b){b[a]=f;this.datumChange(f,d,a)}else{console.error("["+this.declaredClass+"] dojox.grid.data.dynamic.set: cannot set data on a non-loaded row")}},canSort:function(){return false}});dojox.grid.data.table=dojox.grid.data.Table;dojox.grid.data.dynamic=dojox.grid.data.Dynamic;dojo.declare("dojox.grid.data.DojoData",dojox.grid.data.Dynamic,{constructor:function(b,g,a){this.count=1;this._rowIdentities={};this._currentlyProcessing=[];if(a){dojo.mixin(this,a)}if(this.store){var d=this.store.getFeatures();this._canNotify=d["dojo.data.api.Notification"];this._canWrite=d["dojo.data.api.Write"];this._canIdentify=d["dojo.data.api.Identity"];if(this._canNotify){dojo.connect(this.store,"onSet",this,"_storeDatumChange");dojo.connect(this.store,"onDelete",this,"_storeDatumDelete");dojo.connect(this.store,"onNew",this,"_storeDatumNew")}if(this._canWrite){dojo.connect(this.store,"revert",this,"refresh")}}},markupFactory:function(a,b){return new dojox.grid.data.DojoData(null,null,a)},query:{name:"*"},store:null,_currentlyProcessing:null,_canNotify:false,_canWrite:false,_canIdentify:false,_rowIdentities:{},clientSort:false,sortFields:null,queryOptions:null,setData:function(a){this.store=a;this.data=[];this.allChange()},setRowCount:function(a){this.count=a;this.allChange()},beginReturn:function(a){if(this.count!=a){this.setRowCount(a)}},_setupFields:function(d){if(this.fields._nameMaps){return}var a={};var b=dojo.map(this.store.getAttributes(d),function(g,f){a[g]=f;a[f+".idx"]=g;return{name:g,key:g}},this);this.fields._nameMaps=a;this.fields.set(b);this.notify("FieldsChange")},_getRowFromItem:function(a){},_createRow:function(a){var b={};b.__dojo_data_item=a;dojo.forEach(this.fields.values,function(f){var d=this.store.getValue(a,f.name);b[f.name]=(d===undefined||d===null)?"":d},this);return b},processRows:function(b,a){if(!b||b.length==0){return}this._setupFields(b[0]);dojo.forEach(b,function(f,d){var g=this._createRow(f);this._setRowId(f,a.start,d);this.setRow(g,a.start+d)},this);this.endUpdate()},requestRows:function(d,b){this.beginUpdate();var f=d||0;var a={start:f,count:this.rowsPerPage,query:this.query,sort:this.sortFields,queryOptions:this.queryOptions,onBegin:dojo.hitch(this,"beginReturn"),onComplete:dojo.hitch(this,"processRows"),onError:dojo.hitch(this,"processError")};this.store.fetch(a)},getDatum:function(d,b){var f=this.getRow(d);var a=this.fields.values[b];return f&&a?f[a.name]:a?a.na:"?"},setDatum:function(f,b,a){var d=this.fields._nameMaps[a+".idx"];if(d){this.data[b][d]=f;this.datumChange(f,b,a)}},copyRow:function(b){var g={};var f={};var d=this.getRow(b);for(var a in d){if(d[a]!=f[a]){g[a]=d[a]}}return g},_attrCompare:function(b,a){dojo.forEach(this.fields.values,function(d){if(b[d.name]!=a[d.name]){return false}},this);return true},endModifyRow:function(b){var a=this.cache[b];if(a){var d=this.getRow(b);if(!this._attrCompare(a,d)){this.update(a,d,b)}delete this.cache[b]}},cancelModifyRow:function(b){var a=this.cache[b];if(a){this.setRow(a,b);delete this.cache[b]}},_setRowId:function(f,d,a){if(this._canIdentify){this._rowIdentities[this.store.getIdentity(f)]={rowId:d+a,item:f}}else{var b=dojo.toJson(this.query)+":start:"+d+":idx:"+a+":sort:"+dojo.toJson(this.sortFields);this._rowIdentities[b]={rowId:d+a,item:f}}},_getRowId:function(f,b){var d=null;if(this._canIdentify&&!b){var a=this._rowIdentities[this.store.getIdentity(f)];if(a){d=a.rowId}}else{var g;for(g in this._rowIdentities){if(this._rowIdentities[g].item===f){d=this._rowIdentities[g].rowId;break}}}return d},_storeDatumChange:function(g,a,h,f){var d=this._getRowId(g);var i=this.getRow(d);if(i){i[a]=f;var b=this.fields._nameMaps[a];this.notify("DatumChange",[f,d,b])}},_storeDatumDelete:function(b){if(dojo.indexOf(this._currentlyProcessing,b)!=-1){return}var a=this._getRowId(b,true);if(a!=null){this._removeItems([a])}},_storeDatumNew:function(a){if(this._disableNew){return}this._insertItem(a,this.data.length)},insert:function(d,a){this._disableNew=true;var b=this.store.newItem(d);this._disableNew=false;this._insertItem(b,a)},_insertItem:function(b,a){if(!this.fields._nameMaps){this._setupFields(b)}var f=this._createRow(b);for(var d in this._rowIdentities){var g=this._rowIdentities[d];if(g.rowId>=a){g.rowId++}}this._setRowId(b,0,a);dojox.grid.data.Dynamic.prototype.insert.apply(this,[f,a])},datumChange:function(g,d,b){if(this._canWrite){var f=this.getRow(d);var a=this.fields._nameMaps[b+".idx"];this.store.setValue(f.__dojo_data_item,a,g)}else{this.notify("DatumChange",arguments)}},insertion:function(){this.notify("Insertion",arguments);this.notify("Change",arguments)},removal:function(){this.notify("Removal",arguments);this.notify("Change",arguments)},remove:function(d){for(var a=d.length-1;a>=0;a--){var b=this.data[d[a]].__dojo_data_item;this._currentlyProcessing.push(b);this.store.deleteItem(b)}this._removeItems(d);this._currentlyProcessing=[]},_removeItems:function(b){dojox.grid.data.Dynamic.prototype.remove.apply(this,arguments);this._rowIdentities={};for(var a=0;a<this.data.length;a++){this._setRowId(this.data[a].__dojo_data_item,0,a)}},canSort:function(){return true},sort:function(b){var a=Math.abs(b)-1;this.sortFields=[{attribute:this.fields.values[a].name,descending:(b>0)}];this.refresh()},refresh:function(){this.clearData(true);this.requestRows()},clearData:function(a){this._rowIdentities={};this.pages=[];this.bop=this.eop=-1;this.count=0;this.setData((a?this.store:[]))},processError:function(b,a){}})}if(!dojo._hasResource["dojox.grid.compat._data.editors"]){dojo._hasResource["dojox.grid.compat._data.editors"]=true;dojo.provide("dojox.grid.compat._data.editors");dojo.provide("dojox.grid.compat.editors");dojo.declare("dojox.grid.editors.Base",null,{constructor:function(a){this.cell=a},_valueProp:"value",_formatPending:false,format:function(b,a){},needFormatNode:function(b,a){this._formatPending=true;dojox.grid.whenIdle(this,"_formatNode",b,a)},cancelFormatNode:function(){this._formatPending=false},_formatNode:function(b,a){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.cell.grid.domNode,true);this.formatNode(this.getNode(a),b,a)}},getNode:function(a){return(this.cell.getNode(a)||0).firstChild||0},formatNode:function(d,b,a){if(dojo.isIE){dojox.grid.whenIdle(this,"focus",a,d)}else{this.focus(a,d)}},dispatchEvent:function(a,b){if(a in this){return this[a](b)}},getValue:function(a){return this.getNode(a)[this._valueProp]},setValue:function(b,a){var d=this.getNode(b);if(d){d[this._valueProp]=a}},focus:function(b,a){dojox.grid.focusSelectNode(a||this.getNode(b))},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){dojo.setSelectable(this.cell.grid.domNode,false);this.cancelFormatNode(this.cell)},apply:function(a){this.cell.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cell.cancelEdit(a);this._finish(a)}});dojox.grid.editors.base=dojox.grid.editors.Base;dojo.declare("dojox.grid.editors.Input",dojox.grid.editors.Base,{constructor:function(a){this.keyFilter=this.keyFilter||this.cell.keyFilter},keyFilter:null,format:function(a,b){this.needFormatNode(a,b);return'<input class="dojoxGrid-input" type="text" value="'+a+'">'},formatNode:function(b,d,a){this.inherited(arguments);this.cell.registerOnBlur(b,a)},doKey:function(b){if(this.keyFilter){var a=String.fromCharCode(b.charCode);if(a.search(this.keyFilter)==-1){dojo.stopEvent(b)}}},_finish:function(a){this.inherited(arguments);var d=this.getNode(a);try{dojox.grid.fire(d,"blur")}catch(b){}}});dojox.grid.editors.input=dojox.grid.editors.Input;dojo.declare("dojox.grid.editors.Select",dojox.grid.editors.Input,{constructor:function(a){this.options=this.options||this.cell.options;this.values=this.values||this.cell.values||this.options},format:function(d,b){this.needFormatNode(d,b);var g=['<select class="dojoxGrid-select">'];for(var f=0,j,a;((j=this.options[f])!==undefined)&&((a=this.values[f])!==undefined);f++){g.push("<option",(d==a?" selected":""),' value="'+a+'"',">",j,"</option>")}g.push("</select>");return g.join("")},getValue:function(a){var f=this.getNode(a);if(f){var b=f.selectedIndex,d=f.options[b];return this.cell.returnIndex?b:d.value||d.innerHTML}}});dojox.grid.editors.select=dojox.grid.editors.Select;dojo.declare("dojox.grid.editors.AlwaysOn",dojox.grid.editors.Input,{alwaysOn:true,_formatNode:function(a,b){this.formatNode(this.getNode(b),a,b)},applyStaticValue:function(b){var a=this.cell.grid.edit;a.applyCellEdit(this.getValue(b),this.cell,b);a.start(this.cell,b,true)}});dojox.grid.editors.alwaysOn=dojox.grid.editors.AlwaysOn;dojo.declare("dojox.grid.editors.Bool",dojox.grid.editors.AlwaysOn,{_valueProp:"checked",format:function(b,a){return'<input class="dojoxGrid-input" type="checkbox"'+(b?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){if(a.target.tagName=="INPUT"){this.applyStaticValue(a.rowIndex)}}});dojox.grid.editors.bool=dojox.grid.editors.Bool}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(b){var a={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,sy:4};var d=dojo.cldr.supplemental._region(b);var f=a[d];return(f===undefined)?1:f};dojo.cldr.supplemental._region=function(d){d=dojo.i18n.normalizeLocale(d);var b=d.split("-");var a=b[1];if(!a){a={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[b[0]]}else{if(a.length==4){a=b[2]}}return a};dojo.cldr.supplemental.getWeekend=function(g){var h={eg:5,il:5,sy:5,"in":0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4};var f={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6};var d=dojo.cldr.supplemental._region(g);var a=h[d];var b=f[d];if(a===undefined){a=6}if(b===undefined){b=0}return{start:a,end:b}}}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(b){var a=b.getMonth();var d=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==1&&dojo.date.isLeapYear(b)){return 29}return d[a]};dojo.date.isLeapYear=function(b){var a=b.getFullYear();return!(a%400)||(!(a%4)&&!!(a%100))};dojo.date.getTimezoneName=function(f){var d=f.toString();var h="";var b;var g=d.indexOf("(");if(g>-1){h=d.substring(++g,d.indexOf(")"))}else{var a=/([A-Z\/]+) \d{4}$/;if((b=d.match(a))){h=b[1]}else{d=f.toLocaleString();a=/ ([A-Z\/]+)$/;if((b=d.match(a))){h=b[1]}}}return(h=="AM"||h=="PM")?"":h};dojo.date.compare=function(d,b,a){d=new Date(Number(d));b=new Date(Number(b||new Date()));if(a!=="undefined"){if(a=="date"){d.setHours(0,0,0,0);b.setHours(0,0,0,0)}else{if(a=="time"){d.setFullYear(0,0,0);b.setFullYear(0,0,0)}}}if(d>b){return 1}if(d<b){return-1}return 0};dojo.date.add=function(a,l,k){var d=new Date(Number(a));var j=false;var h="Date";switch(l){case"day":break;case"weekday":var m,n;var i=k%5;if(!i){m=(k>0)?5:-5;n=(k>0)?((k-5)/5):((k+5)/5)}else{m=i;n=parseInt(k/5)}var b=a.getDay();var g=0;if(b==6&&k>0){g=1}else{if(b==0&&k<0){g=-1}}var f=b+m;if(f==0||f==6){g=(k>0)?2:-2}k=(7*n)+m+g;break;case"year":h="FullYear";j=true;break;case"week":k*=7;break;case"quarter":k*=3;case"month":j=true;h="Month";break;case"hour":case"minute":case"second":case"millisecond":h="UTC"+l.charAt(0).toUpperCase()+l.substring(1)+"s"}if(h){d["set"+h](d["get"+h]()+k)}if(j&&(d.getDate()<a.getDate())){d.setDate(0)}return d};dojo.date.difference=function(o,l,j){l=l||new Date();j=j||"day";var h=l.getFullYear()-o.getFullYear();var g=1;switch(j){case"quarter":var t=o.getMonth();var s=l.getMonth();var m=Math.floor(t/3)+1;var k=Math.floor(s/3)+1;k+=(h*4);g=k-m;break;case"weekday":var q=Math.round(dojo.date.difference(o,l,"day"));var a=parseInt(dojo.date.difference(o,l,"week"));var p=q%7;if(p==0){q=a*5}else{var n=0;var i=o.getDay();var f=l.getDay();a=parseInt(q/7);p=q%7;var d=new Date(o);d.setDate(d.getDate()+(a*7));var b=d.getDay();if(q>0){switch(true){case i==6:n=-1;break;case i==0:n=0;break;case f==6:n=-1;break;case f==0:n=-2;break;case(b+p)>5:n=-2}}else{if(q<0){switch(true){case i==6:n=0;break;case i==0:n=1;break;case f==6:n=2;break;case f==0:n=1;break;case(b+p)<0:n=2}}}q+=n;q-=(a*2)}g=q;break;case"year":g=h;break;case"month":g=(l.getMonth()-o.getMonth())+(h*12);break;case"week":g=parseInt(dojo.date.difference(o,l,"day")/7);break;case"day":g/=24;case"hour":g/=60;case"minute":g/=60;case"second":g/=1000;case"millisecond":g*=l.getTime()-o.getTime()}return Math.round(g)}}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");(function(){function b(h,g,f,i){return i.replace(/([a-z])\1*/ig,function(z){var B,k;var u=z.charAt(0);var o=z.length;var j=["abbr","wide","narrow"];switch(u){case"G":B=g[(o<4)?"eraAbbr":"eraNames"][h.getFullYear()<0?0:1];break;case"y":B=h.getFullYear();switch(o){case 1:break;case 2:if(!f){B=String(B);B=B.substr(B.length-2);break}default:k=true}break;case"Q":case"q":B=Math.ceil((h.getMonth()+1)/3);k=true;break;case"M":var n=h.getMonth();if(o<3){B=n+1;k=true}else{var A=["months","format",j[o-3]].join("-");B=g[A][n]}break;case"w":var y=0;B=dojo.date.locale._getWeekOfYear(h,y);k=true;break;case"d":B=h.getDate();k=true;break;case"D":B=dojo.date.locale._getDayOfYear(h);k=true;break;case"E":var t=h.getDay();if(o<3){B=t+1;k=true}else{var x=["days","format",j[o-3]].join("-");B=g[x][t]}break;case"a":var w=(h.getHours()<12)?"am":"pm";B=g[w];break;case"h":case"H":case"K":case"k":var q=h.getHours();switch(u){case"h":B=(q%12)||12;break;case"H":B=q;break;case"K":B=(q%12);break;case"k":B=q||24;break}k=true;break;case"m":B=h.getMinutes();k=true;break;case"s":B=h.getSeconds();k=true;break;case"S":B=Math.round(h.getMilliseconds()*Math.pow(10,o-3));k=true;break;case"v":case"z":B=dojo.date.getTimezoneName(h);if(B){break}o=4;case"Z":var v=h.getTimezoneOffset();var p=[(v<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(v)/60),2),dojo.string.pad(Math.abs(v)%60,2)];if(o==4){p.splice(0,0,"GMT");p.splice(3,0,":")}B=p.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+i)}if(k){B=dojo.string.pad(B,o)}return B})}dojo.date.locale.format=function(m,l){l=l||{};var j=dojo.i18n.normalizeLocale(l.locale);var i=l.formatLength||"short";var g=dojo.date.locale._getGregorianBundle(j);var n=[];var p=dojo.hitch(this,b,m,g,l.fullYear);if(l.selector=="year"){var o=m.getFullYear();if(j.match(/^zh|^ja/)){o+="年"}return o}if(l.selector!="time"){var k=l.datePattern||g["dateFormat-"+i];if(k){n.push(d(k,p))}}if(l.selector!="date"){var h=l.timePattern||g["timeFormat-"+i];if(h){n.push(d(h,p))}}var f=n.join(" ");return f};dojo.date.locale.regexp=function(f){return dojo.date.locale._parseInfo(f).regexp};dojo.date.locale._parseInfo=function(m){m=m||{};var l=dojo.i18n.normalizeLocale(m.locale);var k=dojo.date.locale._getGregorianBundle(l);var j=m.formatLength||"short";var i=m.datePattern||k["dateFormat-"+j];var h=m.timePattern||k["timeFormat-"+j];var g;if(m.selector=="date"){g=i}else{if(m.selector=="time"){g=h}else{g=i+" "+h}}var f=[];var n=d(g,dojo.hitch(this,a,f,k,m));return{regexp:n,tokens:f,bundle:k}};dojo.date.locale.parse=function(l,k){var j=dojo.date.locale._parseInfo(k);var i=j.tokens,h=j.bundle;var u=new RegExp("^"+j.regexp+"$",j.strict?"":"i");var g=u.exec(l);if(!g){return null}var f=["abbr","wide","narrow"];var v=[1970,0,1,0,0,0,0];var s="";var t=dojo.every(g,function(F,y){if(!y){return true}var D=i[y-1];var x=D.length;switch(D.charAt(0)){case"y":if(x!=2&&k.strict){v[0]=F}else{if(F<100){F=Number(F);var C=""+new Date().getFullYear();var I=C.substring(0,2)*100;var H=Math.min(Number(C.substring(2,4))+20,99);var z=(F<H)?I+F:I-100+F;v[0]=z}else{if(k.strict){return false}v[0]=F}}break;case"M":if(x>2){var E=h["months-format-"+f[x-3]].concat();if(!k.strict){F=F.replace(".","").toLowerCase();E=dojo.map(E,function(J){return J.replace(".","").toLowerCase()})}F=dojo.indexOf(E,F);if(F==-1){return false}}else{F--}v[1]=F;break;case"E":case"e":var G=h["days-format-"+f[x-3]].concat();if(!k.strict){F=F.toLowerCase();G=dojo.map(G,function(J){return J.toLowerCase()})}F=dojo.indexOf(G,F);if(F==-1){return false}break;case"D":v[1]=0;case"d":v[2]=F;break;case"a":var A=k.am||h.am;var w=k.pm||h.pm;if(!k.strict){var B=/\./g;F=F.replace(B,"").toLowerCase();A=A.replace(B,"").toLowerCase();w=w.replace(B,"").toLowerCase()}if(k.strict&&F!=A&&F!=w){return false}s=(F==w)?"p":(F==A)?"a":"";break;case"K":if(F==24){F=0}case"h":case"H":case"k":if(F>23){return false}v[3]=F;break;case"m":v[4]=F;break;case"s":v[5]=F;break;case"S":v[6]=F}return true});var q=+v[3];if(s==="p"&&q<12){v[3]=q+12}else{if(s==="a"&&q==12){v[3]=0}}var p=new Date(v[0],v[1],v[2],v[3],v[4],v[5],v[6]);if(k.strict){p.setFullYear(v[0])}var o=i.join(""),n=o.indexOf("d")!=-1,m=o.indexOf("M")!=-1;if(!t||(m&&p.getMonth()>v[1])||(n&&p.getDate()>v[2])){return null}if((m&&p.getMonth()<v[1])||(n&&p.getDate()<v[2])){p=dojo.date.add(p,"hour",1)}return p};function d(l,k,j,i){var h=function(m){return m};k=k||h;j=j||h;i=i||h;var g=l.match(/(''|[^'])+/g);var f=l.charAt(0)=="'";dojo.forEach(g,function(m,n){if(!m){g[n]=""}else{g[n]=(f?j:k)(m);f=!f}});return i(g.join(""))}function a(i,h,g,f){f=dojo.regexp.escapeString(f);if(!g.strict){f=f.replace(" a"," ?a")}return f.replace(/([a-z])\1*/ig,function(n){var m;var t=n.charAt(0);var j=n.length;var q="",p="";if(g.strict){if(j>1){q="0{"+(j-1)+"}"}if(j>2){p="0{"+(j-2)+"}"}}else{q="0?";p="0{0,2}"}switch(t){case"y":m="\\d{2,4}";break;case"M":m=(j>2)?"\\S+?":q+"[1-9]|1[0-2]";break;case"D":m=q+"[1-9]|"+p+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case"d":m="[12]\\d|"+q+"[1-9]|3[01]";break;case"w":m=q+"[1-9]|[1-4][0-9]|5[0-3]";break;case"E":m="\\S+";break;case"h":m=q+"[1-9]|1[0-2]";break;case"k":m=q+"\\d|1[01]";break;case"H":m=q+"\\d|1\\d|2[0-3]";break;case"K":m=q+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":m="[0-5]\\d";break;case"S":m="\\d{"+j+"}";break;case"a":var o=g.am||h.am||"AM";var k=g.pm||h.pm||"PM";if(g.strict){m=o+"|"+k}else{m=o+"|"+k;if(o!=o.toLowerCase()){m+="|"+o.toLowerCase()}if(k!=k.toLowerCase()){m+="|"+k.toLowerCase()}if(m.indexOf(".")!=-1){m+="|"+m.replace(/\./g,"")}}m=m.replace(/\./g,"\\.");break;default:m=".*"}if(i){i.push(n)}return"("+m+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}})();(function(){var a=[];dojo.date.locale.addCustomFormats=function(d,b){a.push({pkg:d,name:b})};dojo.date.locale._getGregorianBundle=function(d){var b={};dojo.forEach(a,function(g){var f=dojo.i18n.getLocalization(g.pkg,g.name,d);b=dojo.mixin(b,f)},this);return b}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(f,b,d,j){var i;var h=dojo.date.locale._getGregorianBundle(j);var g=[f,d,b];if(d=="standAlone"){var a=g.join("-");i=h[a];if(i[0]==1){i=undefined}}g[1]="format";return(i||h[g.join("-")]).concat()};dojo.date.locale.isWeekend=function(d,f){var b=dojo.cldr.supplemental.getWeekend(f);var a=(d||new Date()).getDay();if(b.end<b.start){b.end+=7;if(a<b.start){a+=7}}return a>=b.start&&a<=b.end};dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};dojo.date.locale._getWeekOfYear=function(f,b){if(arguments.length==1){b=0}var a=new Date(f.getFullYear(),0,1).getDay();var d=(a-b+7)%7;var g=Math.floor((dojo.date.locale._getDayOfYear(f)+d-1)/7);if(a==b){g++}return g}}if(!dojo._hasResource["dijit._Calendar"]){dojo._hasResource["dijit._Calendar"]=true;dojo.provide("dijit._Calendar");dojo.declare("dijit._Calendar",[dijit._Widget,dijit._Templated],{templateString:'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer">\r\n\t<thead>\r\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\r\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="decrementMonth">\r\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" waiRole="presentation">\r\n\t\t\t\t<span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset\' colspan="5">\r\n\t\t\t\t<div dojoAttachPoint="monthLabelSpacer" class="dijitCalendarMonthLabelSpacer"></div>\r\n\t\t\t\t<div dojoAttachPoint="monthLabelNode" class="dijitCalendarMonthLabel"></div>\r\n\t\t\t</th>\r\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="incrementMonth">\r\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" waiRole="presentation">\r\n\t\t\t\t<span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow">+</span>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate"><span class="dijitCalendarDayLabel"></span></th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody dojoAttachEvent="onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut" class="dijitReset dijitCalendarBodyContainer">\r\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate">\r\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate"><span class="dijitCalendarDateLabel"></span></td>\r\n\t\t</tr>\r\n\t</tbody>\r\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\r\n\t\t<tr>\r\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\r\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\r\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\r\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear"></span>\r\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\r\n\t\t\t\t</h3>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tfoot>\r\n</table>\t\r\n',value:new Date(),dayWidth:"narrow",setValue:function(a){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");this.attr("value",a)},_getValueAttr:function(a){var a=new Date(this.value);a.setHours(0,0,0,0);if(a.getDate()<this.value.getDate()){a=dojo.date.add(a,"hour",1)}return a},_setValueAttr:function(a){if(!this.value||dojo.date.compare(a,this.value)){a=new Date(a);a.setHours(1);this.displayMonth=new Date(a);if(!this.isDisabledDate(a,this.lang)){this.value=a;this.onChange(this.attr("value"))}this._populateGrid()}},_setText:function(a,b){while(a.firstChild){a.removeChild(a.firstChild)}a.appendChild(dojo.doc.createTextNode(b))},_populateGrid:function(){var m=this.displayMonth;m.setDate(1);var k=m.getDay();var j=dojo.date.getDaysInMonth(m);var h=dojo.date.getDaysInMonth(dojo.date.add(m,"month",-1));var g=new Date();var f=this.value;var b=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(b>k){b-=7}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(u,v){v+=b;var t=new Date(m);var d,w="dijitCalendar",s=0;if(v<k){d=h-k+v+1;s=-1;w+="Previous"}else{if(v>=(k+j)){d=v-k-j+1;s=1;w+="Next"}else{d=v-k+1;w+="Current"}}if(s){t=dojo.date.add(t,"month",s)}t.setDate(d);if(!dojo.date.compare(t,g,"date")){w="dijitCalendarCurrentDate "+w}if(!dojo.date.compare(t,f,"date")){w="dijitCalendarSelectedDate "+w}if(this.isDisabledDate(t,this.lang)){w="dijitCalendarDisabledDate "+w}var q=this.getClassForDate(t,this.lang);if(q){w=q+" "+w}u.className=w+"Month dijitCalendarDateTemplate";u.dijitDateValue=t.valueOf();var p=dojo.query(".dijitCalendarDateLabel",u)[0];this._setText(p,t.getDate())},this);var a=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,a[m.getMonth()]);var o=m.getFullYear()-1;var n=new Date();dojo.forEach(["previous","current","next"],function(d){n.setFullYear(o++);this._setText(this[d+"YearLabelNode"],dojo.date.locale.format(n,{selector:"year",locale:this.lang}))},this);var l=this;var i=function(q,p,d){l._connects.push(dijit.typematic.addMouseListener(l[q],l,function(s){if(s>=0){l._adjustDisplay(p,d)}},0.8,500))};i("incrementMonth","month",1);i("decrementMonth","month",-1);i("nextYearLabelNode","year",1);i("previousYearLabelNode","year",-1)},goToToday:function(){this.attr("value",new Date())},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var f=dojo.hitch(this,function(g,k){var j=dojo.query(g,this.domNode)[0];for(var h=0;h<k;h++){j.parentNode.appendChild(j.cloneNode(true))}});f(".dijitCalendarDayLabelTemplate",6);f(".dijitCalendarDateTemplate",6);f(".dijitCalendarWeekTemplate",5);var d=dojo.date.locale.getNames("days",this.dayWidth,"standAlone",this.lang);var b=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(g,h){this._setText(g,d[(h+b)%7])},this);var a=dojo.date.locale.getNames("months","wide","standAlone",this.lang);dojo.forEach(a,function(h){var g=dojo.create("div",null,this.monthLabelSpacer);this._setText(g,h)},this);this.value=null;this.attr("value",new Date())},_adjustDisplay:function(a,b){this.displayMonth=dojo.date.add(this.displayMonth,a,b);this._populateGrid()},_onDayClick:function(a){dojo.stopEvent(a);for(var b=a.target;b&&!b.dijitDateValue;b=b.parentNode){}if(b&&!dojo.hasClass(b,"dijitCalendarDisabledDate")){this.attr("value",b.dijitDateValue);this.onValueSelected(this.attr("value"))}},_onDayMouseOver:function(a){var b=a.target;if(b&&(b.dijitDateValue||b==this.previousYearLabelNode||b==this.nextYearLabelNode)){dojo.addClass(b,"dijitCalendarHoveredDate");this._currentNode=b}},_onDayMouseOut:function(b){if(!this._currentNode){return}for(var d=b.relatedTarget;d;){if(d==this._currentNode){return}try{d=d.parentNode}catch(a){d=null}}dojo.removeClass(this._currentNode,"dijitCalendarHoveredDate");this._currentNode=null},onValueSelected:function(a){},onChange:function(a){},isDisabledDate:function(b,a){},getClassForDate:function(a,b){}})}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");dojo.declare("dijit.form._DateTimeTextBox",dijit.form.RangeBoundTextBox,{regExpGen:dojo.date.locale.regexp,compare:dojo.date.compare,format:function(b,a){if(!b){return""}return dojo.date.locale.format(b,a)},parse:function(b,a){return dojo.date.locale.parse(b,a)||(this._isEmpty(b)?null:undefined)},serialize:dojo.date.stamp.toISOString,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",postMixInProperties:function(){this.inherited(arguments);if(!this.value||this.value.toString()==dijit.form._DateTimeTextBox.prototype.value.toString()){this.value=null}var b=this.constraints;b.selector=this._selector;b.fullYear=true;var a=dojo.date.stamp.fromISOString;if(typeof b.min=="string"){b.min=a(b.min)}if(typeof b.max=="string"){b.max=a(b.max)}},_onFocus:function(a){this._open()},_setValueAttr:function(b,a,d){this.inherited(arguments);if(this._picker){if(!b){b=new Date()}this._picker.attr("value",b)}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return}var b=this;if(!this._picker){var a=dojo.getObject(this.popupClass,false);this._picker=new a({onValueSelected:function(d){if(b._tabbingAway){delete b._tabbingAway}else{b.focus()}setTimeout(dojo.hitch(b,"_close"),1);dijit.form._DateTimeTextBox.superclass._setValueAttr.call(b,d,true)},lang:b.lang,constraints:b.constraints,isDisabledDate:function(d){var f=dojo.date.compare;var g=b.constraints;return g&&(g.min&&(f(g.min,d,"date")>0)||(g.max&&f(g.max,d,"date")<0))}});this._picker.attr("value",this.attr("value")||new Date())}if(!this._opened){dijit.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:dojo.hitch(this,this._close),onClose:function(){b._opened=false}});this._opened=true}dojo.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth})},_close:function(){if(this._opened){dijit.popup.close(this._picker);this._opened=false}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,a){this._setValueAttr(this.parse(b,this.constraints),a,b)},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.focusNode,"onkeypress",this._onKeyPress)},_onKeyPress:function(d){var b=this._picker,a=dojo.keys;if(b&&this._opened&&b.handleKey){if(b.handleKey(d)===false){return}}if(this._opened&&d.charOrCode==a.ESCAPE&&!d.shiftKey&&!d.ctrlKey&&!d.altKey){this._close();dojo.stopEvent(d)}else{if(!this._opened&&d.charOrCode==a.DOWN_ARROW){this._open();dojo.stopEvent(d)}else{if(d.charOrCode===a.TAB){this._tabbingAway=true}else{if(this._opened&&(d.keyChar||d.charOrCode===a.BACKSPACE||d.charOrCode==a.DELETE)){setTimeout(dojo.hitch(this,function(){dijit.placeOnScreenAroundElement(b.domNode.parentNode,this.domNode,{BL:"TL",TL:"BL"},b.orient?dojo.hitch(b,"orient"):null)}),1)}}}}}})}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitDateTextBox",popupClass:"dijit._Calendar",_selector:"date",value:new Date("")})}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:'<div id="widget_${id}" class="dijitMenu ${baseClass}"\r\n    ><div dojoAttachPoint="upArrow" class="dijitButtonNode dijitUpArrowButton" dojoAttachEvent="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\r\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" wairole="presentation" role="presentation">&nbsp;</div\r\n\t\t><div class="dijitArrowButtonChar">&#9650;</div></div\r\n    ><div dojoAttachPoint="timeMenu,focusNode" dojoAttachEvent="onclick:_onOptionSelected,onmouseover,onmouseout"></div\r\n    ><div dojoAttachPoint="downArrow" class="dijitButtonNode dijitDownArrowButton" dojoAttachEvent="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\r\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" wairole="presentation" role="presentation">&nbsp;</div\r\n\t\t><div class="dijitArrowButtonChar">&#9660;</div></div\r\n></div>\r\n',baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,_filterString:"",setValue:function(a){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use attr('value') instead.","","2.0");this.attr("value",a)},_setValueAttr:function(a){this.value=a;this._showText()},onOpen:function(d){if(this._beenOpened&&this.domNode.parentNode){var a=dijit.byId(this.domNode.parentNode.dijitPopupParent);if(a){var b=a.getDisplayedValue();if(b&&!a.parse(b,a.constraints)){this._filterString=b}else{this._filterString=""}this._showText()}}this._beenOpened=true},isDisabledDate:function(a,b){return false},_getFilteredNodes:function(f,d,b){var a=[],g,k=f,m=this._maxIncrement+Math.abs(k),l=b?-1:1,j=b?1:0,h=b?0:1;do{k=k-j;g=this._createOption(k);if(g){a.push(g)}k=k+h}while(a.length<d&&(k*l)<m);if(b){a.reverse()}return a},_showText:function(){this.timeMenu.innerHTML="";var d=dojo.date.stamp.fromISOString;this._clickableIncrementDate=d(this.clickableIncrement);this._visibleIncrementDate=d(this.visibleIncrement);this._visibleRangeDate=d(this.visibleRange);var a=function(k){return k.getHours()*60*60+k.getMinutes()*60+k.getSeconds()};var g=a(this._clickableIncrementDate);var f=a(this._visibleIncrementDate);var b=a(this._visibleRangeDate);var h=this.value.getTime();this._refDate=new Date(h-h%(f*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=b/g;this._visibleIncrement=f/g;this._maxIncrement=(60*60*24)/g;var j=this._getFilteredNodes(0,this._totalIncrements>>1,true);var i=this._getFilteredNodes(0,this._totalIncrements>>1,false);if(j.length<this._totalIncrements>>1){j=j.slice(j.length/2);i=i.slice(0,i.length/2)}dojo.forEach(j.concat(i),function(k){this.timeMenu.appendChild(k)},this)},postCreate:function(){if(this.constraints===dijit._TimePicker.prototype.constraints){this.constraints={}}dojo.mixin(this,this.constraints);if(!this.constraints.locale){this.constraints.locale=this.lang}this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var f=this;var d=function(){f._connects.push(dijit.typematic.addMouseListener.apply(null,arguments))};d(this.upArrow,this,this._onArrowUp,1,50);d(this.downArrow,this,this._onArrowDown,1,50);var b=function(g){return function(h){if(h>0){g.call(this,arguments)}}};var a=function(h,g){return function(i){dojo.stopEvent(i);dijit.typematic.trigger(i,this,h,b(g),h,1,50)}};this.connect(this.upArrow,"onmouseover",a(this.upArrow,this._onArrowUp));this.connect(this.downArrow,"onmouseover",a(this.downArrow,this._onArrowDown));this.inherited(arguments)},_buttonMouse:function(a){dojo.toggleClass(a.currentTarget,"dijitButtonNodeHover",a.type=="mouseover")},_createOption:function(f){var d=new Date(this._refDate);var b=this._clickableIncrementDate;d.setHours(d.getHours()+b.getHours()*f,d.getMinutes()+b.getMinutes()*f,d.getSeconds()+b.getSeconds()*f);var a=dojo.date.locale.format(d,this.constraints);if(this._filterString&&a.toLowerCase().indexOf(this._filterString)!==0){return null}var g=dojo.create("div",{"class":this.baseClass+"Item"});g.date=d;g.index=f;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:a},g);if(f%this._visibleIncrement<1&&f%this._visibleIncrement>-1){dojo.addClass(g,this.baseClass+"Marker")}else{if(!(f%this._clickableIncrement)){dojo.addClass(g,this.baseClass+"Tick")}}if(this.isDisabledDate(d)){dojo.addClass(g,this.baseClass+"ItemDisabled")}if(!dojo.date.compare(this.value,d,this.constraints.selector)){g.selected=true;dojo.addClass(g,this.baseClass+"ItemSelected");if(dojo.hasClass(g,this.baseClass+"Marker")){dojo.addClass(g,this.baseClass+"MarkerSelected")}else{dojo.addClass(g,this.baseClass+"TickSelected")}}return g},_onOptionSelected:function(b){var a=b.target.date||b.target.parentNode.date;if(!a||this.isDisabledDate(a)){return}this._highlighted_option=null;this.attr("value",a);this.onValueSelected(a)},onValueSelected:function(a){},_highlightOption:function(b,a){if(!b){return}if(a){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false)}this._highlighted_option=b}else{if(this._highlighted_option!==b){return}else{this._highlighted_option=null}}dojo.toggleClass(b,this.baseClass+"ItemHover",a);if(dojo.hasClass(b,this.baseClass+"Marker")){dojo.toggleClass(b,this.baseClass+"MarkerHover",a)}else{dojo.toggleClass(b,this.baseClass+"TickHover",a)}},onmouseover:function(b){var a=(b.target.parentNode===this.timeMenu)?b.target:b.target.parentNode;if(!dojo.hasClass(a,this.baseClass+"Item")){return}this._highlightOption(a,true)},onmouseout:function(b){var a=(b.target.parentNode===this.timeMenu)?b.target:b.target.parentNode;this._highlightOption(a,false)},_mouseWheeled:function(b){dojo.stopEvent(b);var a=(dojo.isIE?b.wheelDelta:-b.detail);this[(a>0?"_onArrowUp":"_onArrowDown")]()},_onArrowUp:function(b){if(typeof b=="number"&&b==-1){return}if(!this.timeMenu.childNodes.length){return}var a=this.timeMenu.childNodes[0].index;var d=this._getFilteredNodes(a,1,true);if(d.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(d[0],this.timeMenu.childNodes[0])}},_onArrowDown:function(d){if(typeof d=="number"&&d==-1){return}if(!this.timeMenu.childNodes.length){return}var b=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var a=this._getFilteredNodes(b,1,false);if(a.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(a[0])}},handleKey:function(d){var a=dojo.keys;if(d.keyChar||d.charOrCode===a.BACKSPACE||d.charOrCode==a.DELETE){setTimeout(dojo.hitch(this,function(){this._filterString=d.target.value.toLowerCase();this._showText()}),1)}else{if(d.charOrCode==a.DOWN_ARROW||d.charOrCode==a.UP_ARROW){dojo.stopEvent(d);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null}var b=this.timeMenu,f=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",b)[0];if(!f){f=b.childNodes[0]}else{if(b.childNodes.length){if(d.charOrCode==a.DOWN_ARROW&&!f.nextSibling){this._onArrowDown()}else{if(d.charOrCode==a.UP_ARROW&&!f.previousSibling){this._onArrowUp()}}if(d.charOrCode==a.DOWN_ARROW){f=f.nextSibling}else{f=f.previousSibling}}}this._highlightOption(f,true)}else{if(this._highlighted_option&&(d.charOrCode==a.ENTER||d.charOrCode===a.TAB)){if(d.charOrCode==a.ENTER){dojo.stopEvent(d)}setTimeout(dojo.hitch(this,function(){this._onOptionSelected({target:this._highlighted_option})}),1)}}}}})}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date("")})}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=a.url;this._jsonData=a.data;this._datatypeMap=a.typeMap||{};if(!this._datatypeMap.Date){this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}}}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(a.urlPreventCache!==undefined){this.urlPreventCache=a.urlPreventCache?true:false}if(a.clearOnClose){this.clearOnClose=true}},url:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,_assertIsItem:function(a){if(!this.isItem(a)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.")}},_assertIsAttribute:function(a){if(typeof a!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.")}},getValue:function(f,d,b){var a=this.getValues(f,d);return(a.length>0)?a[0]:b},getValues:function(b,a){this._assertIsItem(b);this._assertIsAttribute(a);return b[a]||[]},getAttributes:function(d){this._assertIsItem(d);var a=[];for(var b in d){if((b!==this._storeRefPropName)&&(b!==this._itemNumPropName)&&(b!==this._rootItemPropName)&&(b!==this._reverseRefMap)){a.push(b)}}return a},hasAttribute:function(a,b){return this.getValues(a,b).length>0},containsValue:function(d,f,b){var a=undefined;if(typeof b==="string"){a=dojo.data.util.filter.patternToRegExp(b,false)}return this._containsValue(d,f,b,a)},_containsValue:function(d,a,f,b){return dojo.some(this.getValues(d,a),function(g){if(g!==null&&!dojo.isObject(g)&&b){if(g.toString().match(b)){return true}}else{if(f===g){return true}}})},isItem:function(a){if(a&&a[this._storeRefPropName]===this){if(this._arrayOfAllItems[a[this._itemNumPropName]]===a){return true}}return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a)){return this.getValue(a,this._labelAttr)}return undefined},getLabelAttributes:function(a){if(this._labelAttr){return[this._labelAttr]}return null},_fetchItems:function(j,h,g){var k=this;var f=function(p,o){var l=[];var t,v;if(p.query){var u;var s=p.queryOptions?p.queryOptions.ignoreCase:false;var q={};for(v in p.query){u=p.query[v];if(typeof u==="string"){q[v]=dojo.data.util.filter.patternToRegExp(u,s)}}for(t=0;t<o.length;++t){var n=true;var m=o[t];if(m===null){n=false}else{for(v in p.query){u=p.query[v];if(!k._containsValue(m,v,u,q[v])){n=false}}}if(n){l.push(m)}}h(l,p)}else{for(t=0;t<o.length;++t){var w=o[t];if(w!==null){l.push(w)}}h(l,p)}};if(this._loadFinished){f(j,this._getItemsArray(j.queryOptions))}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:j,filter:f})}else{this._loadInProgress=true;var d={url:k._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var b=dojo.xhrGet(d);b.addCallback(function(l){try{k._getItemsFromLoadedData(l);k._loadFinished=true;k._loadInProgress=false;f(j,k._getItemsArray(j.queryOptions));k._handleQueuedFetches()}catch(m){k._loadFinished=true;k._loadInProgress=false;g(m,j)}});b.addErrback(function(l){k._loadInProgress=false;g(l,j)});var a=null;if(j.abort){a=j.abort}j.abort=function(){var l=b;if(l&&l.fired===-1){l.cancel();l=null}if(a){a.call(j)}}}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;f(j,this._getItemsArray(j.queryOptions))}catch(i){g(i,j)}}else{g(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),j)}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var b=0;b<this._queuedFetches.length;b++){var d=this._queuedFetches[b];var a=d.args;var f=d.filter;if(f){f(a,this._getItemsArray(a.queryOptions))}else{this.fetchItemByIdentity(a)}}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep){return this._arrayOfAllItems}return this._arrayOfTopLevelItems},close:function(a){if(this.clearOnClose&&(this._jsonFileUrl!=="")){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(A){var z=false;function g(j){var i=((j!==null)&&(typeof j==="object")&&(!dojo.isArray(j)||z)&&(!dojo.isFunction(j))&&(j.constructor==Object||dojo.isArray(j))&&(typeof j._reference==="undefined")&&(typeof j._type==="undefined")&&(typeof j._value==="undefined"));return i}var m=this;function f(E){m._arrayOfAllItems.push(E);for(var j in E){var i=E[j];if(i){if(dojo.isArray(i)){var F=i;for(var D=0;D<F.length;++D){var C=F[D];if(g(C)){f(C)}}}else{if(g(i)){f(i)}}}}}this._labelAttr=A.label;var x;var y;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=A.items;for(x=0;x<this._arrayOfTopLevelItems.length;++x){y=this._arrayOfTopLevelItems[x];if(dojo.isArray(y)){z=true}f(y);y[this._rootItemPropName]=true}var d={};var B;for(x=0;x<this._arrayOfAllItems.length;++x){y=this._arrayOfAllItems[x];for(B in y){if(B!==this._rootItemPropName){var b=y[B];if(b!==null){if(!dojo.isArray(b)){y[B]=[b]}}else{y[B]=[null]}}d[B]=B}}while(d[this._storeRefPropName]){this._storeRefPropName+="_"}while(d[this._itemNumPropName]){this._itemNumPropName+="_"}while(d[this._reverseRefMap]){this._reverseRefMap+="_"}var v;var t=A.identifier;if(t){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=t;for(x=0;x<this._arrayOfAllItems.length;++x){y=this._arrayOfAllItems[x];v=y[t];var s=v[0];if(!this._itemsByIdentity[s]){this._itemsByIdentity[s]=y}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+t+"].  Value collided: ["+s+"]")}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+t+"].  Value collided: ["+s+"]")}}}}}else{this._features["dojo.data.api.Identity"]=Number}for(x=0;x<this._arrayOfAllItems.length;++x){y=this._arrayOfAllItems[x];y[this._storeRefPropName]=this;y[this._itemNumPropName]=x}for(x=0;x<this._arrayOfAllItems.length;++x){y=this._arrayOfAllItems[x];for(B in y){v=y[B];for(var w=0;w<v.length;++w){b=v[w];if(b!==null&&typeof b=="object"){if(b._type&&b._value){var a=b._type;var o=this._datatypeMap[a];if(!o){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+a+"'")}else{if(dojo.isFunction(o)){v[w]=new o(b._value)}else{if(dojo.isFunction(o.deserialize)){v[w]=o.deserialize(b._value)}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function")}}}}if(b._reference){var n=b._reference;if(!dojo.isObject(n)){v[w]=this._itemsByIdentity[n]}else{for(var u=0;u<this._arrayOfAllItems.length;++u){var l=this._arrayOfAllItems[u];var h=true;for(var q in n){if(l[q]!=n[q]){h=false}}if(h){v[w]=l}}}if(this.referenceIntegrity){var p=v[w];if(this.isItem(p)){this._addReferenceToMap(p,y,B)}}}else{if(this.isItem(b)){if(this.referenceIntegrity){this._addReferenceToMap(b,y,B)}}}}}}}},_addReferenceToMap:function(d,b,a){},getIdentity:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return b[this._itemNumPropName]}else{var d=b[a];if(d){return d[0]}}return null},fetchItemByIdentity:function(h){var f;var g;if(!this._loadFinished){var a=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:h})}else{this._loadInProgress=true;var d={url:a._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var b=dojo.xhrGet(d);b.addCallback(function(k){var i=h.scope?h.scope:dojo.global;try{a._getItemsFromLoadedData(k);a._loadFinished=true;a._loadInProgress=false;f=a._getItemByIdentity(h.identity);if(h.onItem){h.onItem.call(i,f)}a._handleQueuedFetches()}catch(j){a._loadInProgress=false;if(h.onError){h.onError.call(i,j)}}});b.addErrback(function(j){a._loadInProgress=false;if(h.onError){var i=h.scope?h.scope:dojo.global;h.onError.call(i,j)}})}}else{if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true;f=a._getItemByIdentity(h.identity);if(h.onItem){g=h.scope?h.scope:dojo.global;h.onItem.call(g,f)}}}}else{f=this._getItemByIdentity(h.identity);if(h.onItem){g=h.scope?h.scope:dojo.global;h.onItem.call(g,f)}}},_getItemByIdentity:function(a){var b=null;if(this._itemsByIdentity){b=this._itemsByIdentity[a]}else{b=this._arrayOfAllItems[a]}if(b===undefined){b=null}return b},getIdentityAttributes:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return null}else{return[a]}},_forceLoad:function(){var d=this;if(this._jsonFileUrl){var b={url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,sync:true};var a=dojo.xhrGet(b);a.addCallback(function(f){try{if(d._loadInProgress!==true&&!d._loadFinished){d._getItemsFromLoadedData(f);d._loadFinished=true}else{if(d._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.")}}}catch(g){throw g}});a.addErrback(function(f){throw f})}else{if(this._jsonData){d._getItemsFromLoadedData(d._jsonData);d._jsonData=null;d._loadFinished=true}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:'<div class="dijitReset dijitInline" waiRole="presentation"\r\n\t><input\r\n\t \t${nameAttrSetting} type="${type}" ${checkedAttrSetting}\r\n\t\tclass="dijitReset dijitCheckBoxInput"\r\n\t\tdojoAttachPoint="focusNode"\r\n\t \tdojoAttachEvent="onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick"\r\n/></div>\r\n',baseClass:"dijitCheckBox",type:"checkbox",value:"on",_setValueAttr:function(a){if(typeof a=="string"){this.value=a;dojo.attr(this.focusNode,"value",a);a=true}if(this._created){this.attr("checked",a)}},_getValueAttr:function(){return(this.checked?this.value:false)},postMixInProperties:function(){if(this.value==""){this.value="on"}this.checkedAttrSetting=this.checked?"checked":"";this.inherited(arguments)},_fillContent:function(a){},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);this.value=this.params.value||"on";dojo.attr(this.focusNode,"value",this.value)},_onFocus:function(){if(this.id){dojo.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel")}},_onBlur:function(){if(this.id){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel")}}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(b){this.inherited(arguments);if(!this._created){return}if(b){var a=this;dojo.query("INPUT[type=radio]",this.focusNode.form||dojo.doc).forEach(function(d){if(d.name==a.name&&d!=a.focusNode&&d.form==a.focusNode.form){var f=dijit.getEnclosingWidget(d);if(f&&f.checked){f.attr("checked",false)}}})}},_clicked:function(a){if(!this.checked){this.attr("checked",true)}}})}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\r\n\tid="widget_${id}"\r\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\r\n\t><div class="dijitInputLayoutContainer"\r\n\t\t><div class="dijitReset dijitSpinnerButtonContainer"\r\n\t\t\t>&nbsp;<div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\t\tdojoAttachPoint="upArrowNode"\r\n\t\t\t\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse"\r\n\t\t\t\tstateModifier="UpArrow"\r\n\t\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\r\n\t\t\t\t><div class="dijitArrowButtonChar">&#9650;</div\r\n\t\t\t></div\r\n\t\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\t\tdojoAttachPoint="downArrowNode"\r\n\t\t\t\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse"\r\n\t\t\t\tstateModifier="DownArrow"\r\n\t\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\r\n\t\t\t\t><div class="dijitArrowButtonChar">&#9660;</div\r\n\t\t\t></div\r\n\t\t></div\r\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\r\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\r\n\t\t><div class="dijitReset dijitInputField"\r\n\t\t\t><input class=\'dijitReset\' dojoAttachPoint="textbox,focusNode" type="${type}" dojoAttachEvent="onkeypress:_onKeyPress"\r\n\t\t\t\twaiRole="spinbutton" autocomplete="off" ${nameAttrSetting}\r\n\t\t/></div\r\n\t></div\r\n></div>\r\n',baseClass:"dijitSpinner",adjust:function(b,a){return b},_arrowState:function(b,a){this._active=a;this.stateModifier=b.getAttribute("stateModifier")||"";this._setStateClass()},_arrowPressed:function(d,b,a){if(this.disabled||this.readOnly){return}this._arrowState(d,true);this._setValueAttr(this.adjust(this.attr("value"),b*a),false);dijit.selectInputText(this.textbox,this.textbox.value.length)},_arrowReleased:function(a){this._wheelTimer=null;if(this.disabled||this.readOnly){return}this._arrowState(a,false)},_typematicCallback:function(a,g,b){var h=this.smallDelta;if(g==this.textbox){var d=dojo.keys;var f=b.charOrCode;h=(f==d.PAGE_UP||f==d.PAGE_DOWN)?this.largeDelta:this.smallDelta;g=(f==d.UP_ARROW||f==d.PAGE_UP)?this.upArrowNode:this.downArrowNode}if(a==-1){this._arrowReleased(g)}else{this._arrowPressed(g,(g==this.upArrowNode)?1:-1,h)}},_wheelTimer:null,_mouseWheeled:function(a){dojo.stopEvent(a);var d=a.detail?(a.detail*-1):(a.wheelDelta/120);if(d!==0){var b=this[(d>0?"upArrowNode":"downArrowNode")];this._arrowPressed(b,d,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer)}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",b),50)}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));if(dojo.isIE){var a=this;this.connect(this.domNode,"onresize",function(){setTimeout(dojo.hitch(a,function(){var b=this.upArrowNode.parentNode.offsetHeight;if(b){this.upArrowNode.style.height=b>>1;this.downArrowNode.style.height=b-(b>>1);this.focusNode.parentNode.style.height=b}this._setStateClass()}),0)})}}})}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.number.format=function(d,g){g=dojo.mixin({},g||{});var f=dojo.i18n.normalizeLocale(g.locale);var b=dojo.i18n.getLocalization("dojo.cldr","number",f);g.customs=b;var a=g.pattern||b[(g.type||"decimal")+"Format"];if(isNaN(d)||Math.abs(d)==Infinity){return null}return dojo.number._applyPattern(d,a,g)};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(j,i,h){h=h||{};var f=h.customs.group;var b=h.customs.decimal;var a=i.split(";");var k=a[0];i=a[(j<0)?1:0]||("-"+k);if(i.indexOf("%")!=-1){j*=100}else{if(i.indexOf("‰")!=-1){j*=1000}else{if(i.indexOf("¤")!=-1){f=h.customs.currencyGroup||f;b=h.customs.currencyDecimal||b;i=i.replace(/\u00a4{1,3}/,function(l){var m=["symbol","currency","displayName"][l.length-1];return h[m]||h.currency||""})}else{if(i.indexOf("E")!=-1){throw new Error("exponential notation not supported")}}}}var g=dojo.number._numberPatternRE;var d=k.match(g);if(!d){throw new Error("unable to find a number expression in pattern: "+i)}if(h.fractional===false){h.places=0}return i.replace(g,dojo.number._formatAbsolute(j,d[0],{decimal:b,group:f,places:h.places,round:h.round}))};dojo.number.round=function(d,f,b){var a=10/(b||10);return(a*+d).toFixed(f)/a};if((0.9).toFixed()==0){(function(){var a=dojo.number.round;dojo.number.round=function(g,h,b){var i=Math.pow(10,-h||0),f=Math.abs(g);if(!g||f>=i||f*Math.pow(10,h+1)<5){i=0}return a(g,h,b)+(g>0?i:-i)}})()}dojo.number._formatAbsolute=function(b,j,i){i=i||{};if(i.places===true){i.places=0}if(i.places===Infinity){i.places=6}var h=j.split(".");var g=(i.places>=0)?i.places:(h[1]&&h[1].length)||0;if(!(i.round<0)){b=dojo.number.round(b,g,i.round)}var f=String(Math.abs(b)).split(".");var d=f[1]||"";if(i.places){var a=dojo.isString(i.places)&&i.places.indexOf(",");if(a){i.places=i.places.substring(a+1)}f[1]=dojo.string.pad(d.substr(0,i.places),i.places,"0",true)}else{if(h[1]&&i.places!==0){var l=h[1].lastIndexOf("0")+1;if(l>d.length){f[1]=dojo.string.pad(d,l,"0",true)}var u=h[1].length;if(u<d.length){f[1]=d.substr(0,u)}}else{if(f[1]){f.pop()}}}var t=h[0].replace(",","");l=t.indexOf("0");if(l!=-1){l=t.length-l;if(l>f[0].length){f[0]=dojo.string.pad(f[0],l)}if(t.indexOf("#")==-1){f[0]=f[0].substr(f[0].length-l)}}var s=h[0].lastIndexOf(",");var p,o;if(s!=-1){p=h[0].length-s-1;var n=h[0].substr(0,s);s=n.lastIndexOf(",");if(s!=-1){o=n.length-s-1}}var m=[];for(var k=f[0];k;){var q=k.length-p;m.push((q>0)?k.substr(q):k);k=(q>0)?k.slice(0,q):"";if(o){p=o;delete o}}f[0]=m.reverse().join(i.group||",");return f.join(i.decimal||".")};dojo.number.regexp=function(a){return dojo.number._parseInfo(a).regexp};dojo.number._parseInfo=function(k){k=k||{};var j=dojo.i18n.normalizeLocale(k.locale);var i=dojo.i18n.getLocalization("dojo.cldr","number",j);var h=k.pattern||i[(k.type||"decimal")+"Format"];var g=i.group;var f=i.decimal;var d=1;if(h.indexOf("%")!=-1){d/=100}else{if(h.indexOf("‰")!=-1){d/=1000}else{var b=h.indexOf("¤")!=-1;if(b){g=i.currencyGroup||g;f=i.currencyDecimal||f}}}var a=h.split(";");if(a.length==1){a.push("-"+a[0])}var l=dojo.regexp.buildGroupRE(a,function(m){m="(?:"+dojo.regexp.escapeString(m,".")+")";return m.replace(dojo.number._numberPatternRE,function(p){var o={signed:false,separator:k.strict?g:[g,""],fractional:k.fractional,decimal:f,exponent:false};var n=p.split(".");var s=k.places;if(n.length==1||s===0){o.fractional=false}else{if(s===undefined){s=k.pattern?n[1].lastIndexOf("0")+1:Infinity}if(s&&k.fractional==undefined){o.fractional=true}if(!k.places&&(s<n[1].length)){s+=","+n[1].length}o.places=s}var q=n[0].split(",");if(q.length>1){o.groupSize=q.pop().length;if(q.length>1){o.groupSize2=q.pop().length}}return"("+dojo.number._realNumberRegexp(o)+")"})},true);if(b){l=l.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(q,p,o,n){var s=["symbol","currency","displayName"][o.length-1];var m=dojo.regexp.escapeString(k[s]||k.currency||"");p=p?"[\\s\\xa0]":"";n=n?"[\\s\\xa0]":"";if(!k.strict){if(p){p+="*"}if(n){n+="*"}return"(?:"+p+m+n+")?"}return p+m+n})}return{regexp:l.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:f,factor:d}};dojo.number.parse=function(b,a){var d=dojo.number._parseInfo(a);var g=(new RegExp("^"+d.regexp+"$")).exec(b);if(!g){return NaN}var f=g[1];if(!g[1]){if(!g[2]){return NaN}f=g[2];d.factor*=-1}f=f.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return f*d.factor};dojo.number._realNumberRegexp=function(g){g=g||{};if(!("places"in g)){g.places=Infinity}if(typeof g.decimal!="string"){g.decimal="."}if(!("fractional"in g)||/^0/.test(g.places)){g.fractional=[true,false]}if(!("exponent"in g)){g.exponent=[true,false]}if(!("eSigned"in g)){g.eSigned=[true,false]}var d=dojo.number._integerRegexp(g);var b=dojo.regexp.buildGroupRE(g.fractional,function(i){var h="";if(i&&(g.places!==0)){h="\\"+g.decimal;if(g.places==Infinity){h="(?:"+h+"\\d+)?"}else{h+="\\d{"+g.places+"}"}}return h},true);var f=dojo.regexp.buildGroupRE(g.exponent,function(h){if(h){return"([eE]"+dojo.number._integerRegexp({signed:g.eSigned})+")"}return""});var a=d+b;if(b){a="(?:(?:"+a+")|(?:"+b+"))"}return a+f};dojo.number._integerRegexp=function(b){b=b||{};if(!("signed"in b)){b.signed=[true,false]}if(!("separator"in b)){b.separator=""}else{if(!("groupSize"in b)){b.groupSize=3}}var d=dojo.regexp.buildGroupRE(b.signed,function(f){return f?"[-+]":""},true);var a=dojo.regexp.buildGroupRE(b.separator,function(i){if(!i){return"(?:\\d+)"}i=dojo.regexp.escapeString(i);if(i==" "){i="\\s"}else{if(i==" "){i="\\s\\xa0"}}var g=b.groupSize,h=b.groupSize2;if(h){var f="(?:0|[1-9]\\d{0,"+(h-1)+"}(?:["+i+"]\\d{"+h+"})*["+i+"]\\d{"+g+"})";return((g-h)>0)?"(?:"+f+"|(?:0|[1-9]\\d{0,"+(g-1)+"}))":f}return"(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+i+"]\\d{"+g+"})*)"},true);return d+a}}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,postMixInProperties:function(){if(typeof this.constraints.max!="number"){this.constraints.max=9000000000000000}this.inherited(arguments)},_onFocus:function(){if(this.disabled){return}var b=this.attr("value");if(typeof b=="number"&&!isNaN(b)){var a=this.format(b,this.constraints);if(a!==undefined){this.textbox.value=a}}this.inherited(arguments)},format:function(b,a){if(typeof b!="number"){return String(b)}if(isNaN(b)){return""}if(("rangeCheck"in this)&&!this.rangeCheck(b,a)){return String(b)}if(this.editOptions&&this._focused){a=dojo.mixin(dojo.mixin({},this.editOptions),a)}return this._formatter(b,a)},parse:dojo.number.parse,_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){return(a===null||a===""||a===undefined)?NaN:this.inherited(arguments)},serialize:function(b,a){return(typeof b!="number"||isNaN(b))?"":this.inherited(arguments)},_setValueAttr:function(d,b,a){if(d!==undefined&&a===undefined){if(typeof d=="number"){if(isNaN(d)){a=""}else{if(("rangeCheck"in this)&&!this.rangeCheck(d,this.constraints)){a=String(d)}}}else{if(!d){a="";d=NaN}else{a=String(d);d=undefined}}}this.inherited(arguments,[d,b,a])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&this.textbox.value!==""){var b=Number(this.textbox.value);return(String(b)===this.textbox.value)?b:undefined}else{return a}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{})}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{required:true,adjust:function(g,i){var a=this.constraints,b=isNaN(g),f=!isNaN(a.max),d=!isNaN(a.min);if(b&&i!=0){g=(i>0)?d?a.min:f?a.max:0:f?this.constraints.max:d?a.min:0}var h=g+i;if(b||isNaN(h)){return g}if(f&&(h>a.max)){h=a.max}if(d&&(h<a.min)){h=a.min}return h},_onKeyPress:function(b){if((b.charOrCode==dojo.keys.HOME||b.charOrCode==dojo.keys.END)&&!b.ctrlKey&&!b.altKey){var a=this.constraints[(b.charOrCode==dojo.keys.HOME?"min":"max")];if(a){this._setValueAttr(a,true)}dojo.stopEvent(b)}}})}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.cldr.monetary.getData=function(g){var f={ADP:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,DJF:0,ESP:0,GNF:0,IQD:3,ITL:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LUF:0,LYD:3,MGA:0,MGF:0,OMR:3,PYG:0,RWF:0,TND:3,TRL:0,VUV:0,XAF:0,XOF:0,XPF:0};var b={CHF:5};var d=f[g],a=b[g];if(typeof d=="undefined"){d=2}if(typeof a=="undefined"){a=0}return{places:d,round:a}}}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.currency._mixInDefaults=function(b){b=b||{};b.type="currency";var a=dojo.i18n.getLocalization("dojo.cldr","currency",b.locale)||{};var d=b.currency;var f=dojo.cldr.monetary.getData(d);dojo.forEach(["displayName","symbol","group","decimal"],function(g){f[g]=a[d+"_"+g]});f.fractional=[true,false];return dojo.mixin(f,b)};dojo.currency.format=function(b,a){return dojo.number.format(b,dojo.currency._mixInDefaults(a))};dojo.currency.regexp=function(a){return dojo.number.regexp(dojo.currency._mixInDefaults(a))};dojo.currency.parse=function(b,a){return dojo.number.parse(b,dojo.currency._mixInDefaults(a))}}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",regExpGen:dojo.currency.regexp,_formatter:dojo.currency.format,parse:dojo.currency.parse,postMixInProperties:function(){this.constraints.currency=this.currency;this.inherited(arguments)}})}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._isMac=navigator.appVersion.indexOf("Macintosh")>=0;dojo.dnd._copyKey=dojo.dnd._isMac?"metaKey":"ctrlKey";dojo.dnd.getCopyKeyState=function(a){return a[dojo.dnd._copyKey]};dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do{a=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId)}while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(b){var a=b.target;if(a.nodeType==3){a=a.parentNode}return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0};dojo.dnd._lmb=dojo.isIE?1:0;dojo.dnd._isLmbPressed=dojo.isIE?function(a){return a.button&1}:function(a){return a.button===0}}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var h=dojo.doc,f=h.documentElement,g=window,a=dojo.body();if(dojo.isMozilla){return{w:f.clientWidth,h:g.innerHeight}}else{if(!dojo.isOpera&&g.innerWidth){return{w:g.innerWidth,h:g.innerHeight}}else{if(!dojo.isOpera&&f&&f.clientWidth){return{w:f.clientWidth,h:f.clientHeight}}else{if(a.clientWidth){return{w:a.clientWidth,h:a.clientHeight}}}}}return null};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(f){var d=dojo.dnd.getViewport(),b=0,a=0;if(f.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){b=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(f.clientX>d.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){b=dojo.dnd.H_AUTOSCROLL_VALUE}}if(f.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){a=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(f.clientY>d.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){a=dojo.dnd.V_AUTOSCROLL_VALUE}}window.scrollBy(b,a)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(i){for(var f=i.target;f;){if(f.nodeType==1&&(f.tagName.toLowerCase()in dojo.dnd._validNodes)){var v=dojo.getComputedStyle(f);if(v.overflow.toLowerCase()in dojo.dnd._validOverflow){var l=dojo._getContentBox(f,v),q=dojo._abs(f,true);var o=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,l.w/2),g=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,l.h/2),d=i.pageX-q.x,a=i.pageY-q.y,u=0,p=0;if(dojo.isWebKit||dojo.isOpera){d+=dojo.body().scrollLeft,a+=dojo.body().scrollTop}if(d>0&&d<l.w){if(d<o){u=-o}else{if(d>l.w-o){u=o}}}if(a>0&&a<l.h){if(a<g){p=-g}else{if(a>l.h-g){p=g}}}var k=f.scrollLeft,j=f.scrollTop;f.scrollLeft=f.scrollLeft+u;f.scrollTop=f.scrollTop+p;if(k!=f.scrollLeft||j!=f.scrollTop){return}}}try{f=f.parentNode}catch(m){f=null}}dojo.dnd.autoScroll(i)}}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(g,i,f){this.node=dojo.byId(g);this.marginBox={l:i.pageX,t:i.pageY};this.mouseButton=i.button;var b=this.host=f,j=g.ownerDocument,a=dojo.connect(j,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(j,"onmousemove",this,"onMouseMove"),dojo.connect(j,"onmouseup",this,"onMouseUp"),dojo.connect(j,"ondragstart",dojo.stopEvent),dojo.connect(j.body,"onselectstart",dojo.stopEvent),a];if(b&&b.onMoveStart){b.onMoveStart(this)}},onMouseMove:function(b){dojo.dnd.autoScroll(b);var a=this.marginBox;this.host.onMove(this,{l:a.l+b.pageX,t:a.t+b.pageY});dojo.stopEvent(b)},onMouseUp:function(a){if(dojo.isWebKit&&dojo.dnd._isMac&&this.mouseButton==2?a.button==0:this.mouseButton==a.button){this.destroy()}dojo.stopEvent(a)},onFirstMove:function(){var o=this.node.style,f,n,g=this.host;switch(o.position){case"relative":case"absolute":f=Math.round(parseFloat(o.left));n=Math.round(parseFloat(o.top));break;default:o.position="absolute";var d=dojo.marginBox(this.node);var j=dojo.doc.body;var k=dojo.getComputedStyle(j);var a=dojo._getMarginBox(j,k);var i=dojo._getContentBox(j,k);f=d.l-(i.l-a.l);n=d.t-(i.t-a.t);break}this.marginBox.l=f-this.marginBox.l;this.marginBox.t=n-this.marginBox.t;if(g&&g.onFirstMove){g.onFirstMove(this)}dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop){a.onMoveStop(this)}this.events=this.node=this.host=null}})}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(b,a){this.node=dojo.byId(b);if(!a){a={}}this.handle=a.handle?dojo.byId(a.handle):null;if(!this.handle){this.handle=this.node}this.delay=a.delay>0?a.delay:0;this.skip=a.skip;this.mover=a.mover?a.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(a,b){return new dojo.dnd.Moveable(b,a)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(this.skip&&dojo.dnd.isFormElement(a)){return}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=a.pageY}else{this.onDragDetected(a)}dojo.stopEvent(a)},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);this.onDragDetected(a)}dojo.stopEvent(a)},onMouseUp:function(b){for(var a=0;a<2;++a){dojo.disconnect(this.events.pop())}dojo.stopEvent(b)},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){dojo.publish("/dnd/move/start",[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(a){},onMove:function(d,b){this.onMoving(d,b);var a=d.node.style;a.left=b.l+"px";a.top=b.t+"px";this.onMoved(d,b)},onMoving:function(b,a){},onMoved:function(b,a){}})}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(a,b){return new dojo.dnd.move.constrainedMoveable(b,a)},constructor:function(b,a){if(!a){a={}}this.constraints=a.constraints;this.within=a.within},onFirstMove:function(a){var d=this.constraintBox=this.constraints.call(this,a);d.r=d.l+d.w;d.b=d.t+d.h;if(this.within){var b=dojo.marginBox(a.node);d.r-=b.w;d.b-=b.h}},onMove:function(a,f){var d=this.constraintBox,b=a.node.style;b.left=(f.l<d.l?d.l:d.r<f.l?d.r:f.l)+"px";b.top=(f.t<d.t?d.t:d.b<f.t?d.b:f.t)+"px"}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(b,a){return new dojo.dnd.move.boxConstrainedMoveable(a,b)},constructor:function(b,d){var a=d&&d.box;this.constraints=function(){return a}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(b,a){return new dojo.dnd.move.parentConstrainedMoveable(a,b)},constructor:function(d,b){var a=b&&b.area;this.constraints=function(){var i=this.node.parentNode,g=dojo.getComputedStyle(i),h=dojo._getMarginBox(i,g);if(a=="margin"){return h}var f=dojo._getMarginExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;if(a=="border"){return h}f=dojo._getBorderExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;if(a=="padding"){return h}f=dojo._getPadExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;return h}}});dojo.dnd.move.constrainedMover=function(a,d){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var b=function(g,h,f){dojo.dnd.Mover.call(this,g,h,f)};dojo.extend(b,dojo.dnd.Mover.prototype);dojo.extend(b,{onMouseMove:function(i){dojo.dnd.autoScroll(i);var f=this.marginBox,j=this.constraintBox,g=f.l+i.pageX,h=f.t+i.pageY;g=g<j.l?j.l:j.r<g?j.r:g;h=h<j.t?j.t:j.b<h?j.b:h;this.host.onMove(this,{l:g,t:h})},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var g=this.constraintBox=a.call(this);g.r=g.l+g.w;g.b=g.t+g.h;if(d){var f=dojo.marginBox(this.node);g.r-=f.w;g.b-=f.h}}});return b};dojo.dnd.move.boxConstrainedMover=function(b,a){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return b},a)};dojo.dnd.move.parentConstrainedMover=function(d,b){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var a=function(){var i=this.node.parentNode,g=dojo.getComputedStyle(i),h=dojo._getMarginBox(i,g);if(d=="margin"){return h}var f=dojo._getMarginExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;if(d=="border"){return h}f=dojo._getBorderExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;if(d=="padding"){return h}f=dojo._getPadExtents(i,g);h.l+=f.l,h.t+=f.t,h.w-=f.w,h.h-=f.h;return h};return dojo.dnd.move.constrainedMover(a,b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:'<table class="dijit dijitReset dijitSlider" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress"\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td dojoAttachPoint="containerNode,topDecoration" class="dijitReset" style="text-align:center;width:100%;"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t><div class="dijitSliderDecrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${nameAttrSetting}\r\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" waiRole="presentation" dojoAttachPoint="sliderBarContainer"\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"\r\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH" \r\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachEvent="onmousedown:_onHandleClick" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\r\n\t\t\t></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\r\n\t\t></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH" style="right:0px;"\r\n\t\t\t><div class="dijitSliderIncrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\r\n\t\t></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset" style="text-align:center;"></td\r\n\t\t><td class="dijitReset" colspan="2"></td\r\n\t></tr\r\n></table>\r\n',value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyPress:function(a){if(this.disabled||this.readOnly||a.altKey||a.ctrlKey){return}switch(a.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,true);break;case dojo.keys.END:this._setValueAttr(this.maximum,true);break;case((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case(this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case(this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(a);break;case((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case(this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case(this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(a);break;default:return}dojo.stopEvent(a)},_onHandleClick:function(a){if(this.disabled||this.readOnly){return}if(!dojo.isIE){dijit.focus(this.sliderHandle)}dojo.stopEvent(a)},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(b){if(this.disabled||this.readOnly||!this.clickSelect){return}dijit.focus(this.sliderHandle);dojo.stopEvent(b);var a=dojo.coords(this.sliderBarContainer,true);var d=b[this._mousePixelCoord]-a[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(a[this._pixelCount]-d):d,a[this._pixelCount],true);this._movable.onMouseDown(b)},_setPixelValue:function(h,g,f){if(this.disabled||this.readOnly){return}h=h<0?0:g<h?g:h;var d=this.discreteValues;if(d<=1||d==Infinity){d=g}d--;var b=g/d;var a=Math.round(h/b);this._setValueAttr((this.maximum-this.minimum)*a/d+this.minimum,f)},_setValueAttr:function(b,a){this.valueNode.value=this.value=b;dijit.setWaiState(this.focusNode,"valuenow",b);this.inherited(arguments);var j=(b-this.minimum)/(this.maximum-this.minimum);var i=(this._descending===false)?this.remainingBar:this.progressBar;var h=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true)}if(a&&this.slideDuration>0&&i.style[this._progressPixelSize]){var g=this;var f={};var d=parseFloat(i.style[this._progressPixelSize]);var k=this.slideDuration*(j-d/100);if(k==0){return}if(k<0){k=0-k}f[this._progressPixelSize]={start:d,end:j*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:i,duration:k,onAnimate:function(l){h.style[g._progressPixelSize]=(100-parseFloat(l[g._progressPixelSize]))+"%"},onEnd:function(){delete g._inProgressAnim},properties:f});this._inProgressAnim.play()}else{i.style[this._progressPixelSize]=(j*100)+"%";h.style[this._progressPixelSize]=((1-j)*100)+"%"}},_bumpValue:function(a){if(this.disabled||this.readOnly){return}var b=dojo.getComputedStyle(this.sliderBarContainer);var g=dojo._getContentBox(this.sliderBarContainer,b);var f=this.discreteValues;if(f<=1||f==Infinity){f=g[this._pixelCount]}f--;var d=(this.value-this.minimum)*f/(this.maximum-this.minimum)+a;if(d<0){d=0}if(d>f){d=f}d=d*(this.maximum-this.minimum)/f+this.minimum;this._setValueAttr(d,true)},_onClkBumper:function(a){if(this.disabled||this.readOnly||!this.clickSelect){return}this._setValueAttr(a,true)},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){dojo.stopEvent(a);var d=!dojo.isMozilla;var b=a[(d?"wheelDelta":"detail")]*(d?1:-1);this[(b<0?"decrement":"increment")](a)},startup:function(){dojo.forEach(this.getChildren(),function(a){if(this[a.container]!=this.containerNode){this[a.container].appendChild(a.domNode)}},this)},_typematicCallback:function(b,a,d){if(b==-1){return}this[(a==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](d)},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500))}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var d=this;var b=function(){dijit.form._SliderMover.apply(this,arguments);this.widget=d};dojo.extend(b,dijit.form._SliderMover.prototype);this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:b});var a=dojo.query('label[for="'+this.id+'"]');if(a.length){a[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",a[0].id)}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments)},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true)}this.inherited(arguments)}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(b){var a=this.widget;var f=a._abspos;if(!f){f=a._abspos=dojo.coords(a.sliderBarContainer,true);a._setPixelValue_=dojo.hitch(a,"_setPixelValue");a._isReversed_=a._isReversed()}var d=b[a._mousePixelCoord]-f[a._startingPixelCoord];a._setPixelValue_(a._isReversed_?(f[a._pixelCount]-d):d,f[a._pixelCount],false)},destroy:function(b){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._setValueAttr(a.value,true)}})}if(!dojo._hasResource["dijit.form.VerticalSlider"]){dojo._hasResource["dijit.form.VerticalSlider"]=true;dojo.provide("dijit.form.VerticalSlider");dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:'<table class="dijitReset dijitSlider" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress"\r\n><tbody class="dijitReset"\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t><div class="dijitSliderIncrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">+</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper dijitSliderTopBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div></center\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td dojoAttachPoint="leftDecoration" class="dijitReset" style="text-align:center;height:100%;"></td\r\n\t\t><td class="dijitReset" style="height:100%;"\r\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${nameAttrSetting}\r\n\t\t\t/><center class="dijitReset dijitSliderBarContainerV" waiRole="presentation" dojoAttachPoint="sliderBarContainer"\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent="onmousedown:_onBarClick"><!--#5629--></div\r\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent="onmousedown:_onBarClick"\r\n\t\t\t\t\t><div class="dijitSliderMoveable" style="vertical-align:top;" \r\n\t\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachEvent="onmousedown:_onHandleClick" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t></center\r\n\t\t></td\r\n\t\t><td dojoAttachPoint="containerNode,rightDecoration" class="dijitReset" style="text-align:center;height:100%;"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset"\r\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper dijitSliderBottomBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div></center\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n\t><tr class="dijitReset"\r\n\t\t><td class="dijitReset"></td\r\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t><div class="dijitSliderDecrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">-</span></div\r\n\t\t></td\r\n\t\t><td class="dijitReset"></td\r\n\t></tr\r\n></tbody></table>\r\n',_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,startup:function(){if(this._started){return}if(!this.isLeftToRight()&&dojo.isMoz){if(this.leftDecoration){this._rtlRectify(this.leftDecoration)}if(this.rightDecoration){this._rtlRectify(this.rightDecoration)}}this.inherited(arguments)},_isReversed:function(){return this._descending},_rtlRectify:function(a){var d=[];while(a.firstChild){d.push(a.firstChild);a.removeChild(a.firstChild)}for(var b=d.length-1;b>=0;b--){if(d[b]){a.appendChild(d[b])}}}})}if(!dojo._hasResource["dijit.form.HorizontalRule"]){dojo._hasResource["dijit.form.HorizontalRule"]=true;dojo.provide("dijit.form.HorizontalRule");dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkH" style="left:',_positionSuffix:"%;",_suffix:'"></div>',_genHTML:function(b,a){return this._positionPrefix+b+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:true,postCreate:function(){var d;if(this.count==1){d=this._genHTML(50,0)}else{var a;var b=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){d=this._genHTML(0,0);for(a=1;a<this.count-1;a++){d+=this._genHTML(b*a,a)}d+=this._genHTML(100,this.count-1)}else{d=this._genHTML(100,0);for(a=1;a<this.count-1;a++){d+=this._genHTML(100-b*a,a)}d+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=d}})}if(!dojo._hasResource["dijit.form.VerticalRule"]){dojo._hasResource["dijit.form.VerticalRule"]=true;dojo.provide("dijit.form.VerticalRule");dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV"></div>',_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkV" style="top:',_isHorizontal:false})}if(!dojo._hasResource["dijit.form.HorizontalRuleLabels"]){dojo._hasResource["dijit.form.HorizontalRuleLabels"]=true;dojo.provide("dijit.form.HorizontalRuleLabels");dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"></div>',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerH" style="left:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelH">',_suffix:"</span></div>",_calcPosition:function(a){return a},_genHTML:function(b,a){return this._positionPrefix+this._calcPosition(b)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[a]+this._suffix},getLabels:function(){var b=this.labels;if(!b.length){b=dojo.query("> li",this.srcNodeRef).map(function(g){return String(g.innerHTML)})}this.srcNodeRef.innerHTML="";if(!b.length&&this.count>1){var a=this.minimum;var f=(this.maximum-a)/(this.count-1);for(var d=0;d<this.count;d++){b.push((d<this.numericMargin||d>=(this.count-this.numericMargin))?"":dojo.number.format(a,this.constraints));a+=f}}return b},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}})}if(!dojo._hasResource["dijit.form.VerticalRuleLabels"]){dojo._hasResource["dijit.form.VerticalRuleLabels"]=true;dojo.provide("dijit.form.VerticalRuleLabels");dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV"></div>',_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerV" style="top:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelV">',_calcPosition:function(a){return 100-a},_isHorizontal:false})}if(!dojo._hasResource["dijit.form.Slider"]){dojo._hasResource["dijit.form.Slider"]=true;dojo.provide("dijit.form.Slider");dojo.deprecated("Call require() for HorizontalSlider / VerticalRule, explicitly rather than 'dijit.form.Slider' itself","","2.0")}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.doc.selection){return dojo.doc.selection.type.toLowerCase()}else{var b="text";var a;try{a=dojo.global.getSelection()}catch(d){}if(a&&a.rangeCount==1){var f=a.getRangeAt(0);if((f.startContainer==f.endContainer)&&((f.endOffset-f.startOffset)==1)&&(f.startContainer.nodeType!=3)){b="control"}}return b}},getSelectedText:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null}return dojo.doc.selection.createRange().text}else{var a=dojo.global.getSelection();if(a){return a.toString()}}return""},getSelectedHtml:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null}return dojo.doc.selection.createRange().htmlText}else{var a=dojo.global.getSelection();if(a&&a.rangeCount){var d=a.getRangeAt(0).cloneContents();var b=dojo.doc.createElement("div");b.appendChild(d);return b.innerHTML}return null}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.doc.selection){var b=dojo.doc.selection.createRange();if(b&&b.item){return dojo.doc.selection.createRange().item(0)}}else{var a=dojo.global.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}}return null},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var f=this.getSelectedElement();if(f){return f.parentNode}}else{if(dojo.doc.selection){var d=dojo.doc.selection.createRange();d.collapse(true);return d.parentElement()}else{var a=dojo.global.getSelection();if(a){var b=a.anchorNode;while(b&&(b.nodeType!=1)){b=b.parentNode}return b}}}return null},hasAncestorElement:function(a){return this.getAncestorElement.apply(this,arguments)!=null},getAncestorElement:function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)},isTag:function(f,a){if(f&&f.tagName){var g=f.tagName.toLowerCase();for(var b=0;b<a.length;b++){var d=String(a[b]).toLowerCase();if(g==d){return d}}}return""},getParentOfType:function(b,a){while(b){if(this.isTag(b,a).length){return b}b=b.parentNode}return null},collapse:function(d){if(window.getSelection){var b=dojo.global.getSelection();if(b.removeAllRanges){if(d){b.collapseToStart()}else{b.collapseToEnd()}}else{b.collapse(d)}}else{if(dojo.doc.selection){var a=dojo.doc.selection.createRange();a.collapse(d);a.select()}}},remove:function(){var a=dojo.doc.selection;if(a){if(a.type.toLowerCase()!="none"){a.clear()}return a}else{a=dojo.global.getSelection();a.deleteFromDocument();return a}},selectElementChildren:function(g,d){var b=dojo.global;var a=dojo.doc;g=dojo.byId(g);if(a.selection&&dojo.body().createTextRange){var h=g.ownerDocument.body.createTextRange();h.moveToElementText(g);if(!d){try{h.select()}catch(i){}}}else{if(b.getSelection){var f=b.getSelection();if(f.setBaseAndExtent){f.setBaseAndExtent(g,0,g,g.innerText.length-1)}else{if(f.selectAllChildren){f.selectAllChildren(g)}}}}},selectElement:function(g,f){var d,a=dojo.doc;g=dojo.byId(g);if(a.selection&&dojo.body().createTextRange){try{d=dojo.body().createControlRange();d.addElement(g);if(!f){d.select()}}catch(h){this.selectElementChildren(g,f)}}else{if(dojo.global.getSelection){var b=dojo.global.getSelection();if(b.removeAllRanges){d=a.createRange();d.selectNode(g);b.removeAllRanges();b.addRange(d)}}}}})}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(d,a){var h=[],f=[];var j=a;var l=d;var k,b;while(d!=j){var g=0;k=d.parentNode;while((b=k.childNodes[g++])){if(b===d){--g;break}}if(g>=k.childNodes.length){dojo.debug("Error finding index of a node in dijit.range.getIndex")}h.unshift(g);f.unshift(g-k.childNodes.length);d=k}if(h.length>0&&l.nodeType==3){b=l.previousSibling;while(b&&b.nodeType==3){h[h.length-1]--;b=b.previousSibling}b=l.nextSibling;while(b&&b.nodeType==3){f[f.length-1]++;b=b.nextSibling}}return{o:h,r:f}};dijit.range.getNode=function(d,b){if(!dojo.isArray(d)||d.length==0){return b}var a=b;dojo.every(d,function(f){if(f>=0&&f<a.childNodes.length){a=a.childNodes[f]}else{a=null;return false}return true});return a};dijit.range.getCommonAncestor=function(j,h){var b=function(l){var i=[];while(l){i.unshift(l);if(l.nodeName!="BODY"){l=l.parentNode}else{break}}return i};var f=b(j);var k=b(h);var a=Math.min(f.length,k.length);var d=f[0];for(var g=1;g<a;g++){if(f[g]===k[g]){d=f[g]}else{break}}return d};dijit.range.getAncestor=function(f,b,a){a=a||f.ownerDocument.body;while(f&&f!==a){var d=f.nodeName.toUpperCase();if(b.test(d)){return f}f=f.parentNode}return null};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(h,g,b){b=b||h.ownerDocument.body;g=g||dijit.range.BlockTagNames;var a=null,d;while(h&&h!==b){var f=h.nodeName.toUpperCase();if(!a&&g.test(f)){a=h}if(!d&&(/^(?:BODY|TD|TH|CAPTION)$/).test(f)){d=h}h=h.parentNode}return{blockNode:a,blockContainer:d||h.ownerDocument.body}};dijit.range.atBeginningOfContainer=function(a,d,h){var g=false;var f=(h==0);if(!f&&d.nodeType==3){if(dojo.trim(d.nodeValue.substr(0,h))==0){f=true}}if(f){var b=d;g=true;while(b&&b!==a){if(b.previousSibling){g=false;break}b=b.parentNode}}return g};dijit.range.atEndOfContainer=function(b,f,h){var g=false;var d=(h==(f.length||f.childNodes.length));if(!d&&f.nodeType==3){if(dojo.trim(f.nodeValue.substr(h))==0){d=true}}if(d){var a=f;g=true;while(a&&a!==b){if(a.nextSibling){g=false;break}a=a.parentNode}}return g};dijit.range.adjacentNoneTextNode=function(b,d){var f=b;var a=(0-b.length)||0;var g=d?"nextSibling":"previousSibling";while(f){if(f.nodeType!=3){break}a+=f.length;f=f[g]}return[f,a]};dijit.range._w3c=Boolean(window.getSelection);dijit.range.create=function(){if(dijit.range._w3c){return dojo.doc.createRange()}else{return new dijit.range.W3CRange}};dijit.range.getSelection=function(d,a){if(dijit.range._w3c){return d.getSelection()}else{var b=new dijit.range.ie.selection(d);if(!a){b._getCurrentSelection()}return b}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(b){this._ranges=[];this.addRange=function(d,f){this._ranges.push(d);if(!f){d._select()}this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};var a=function(){var f=b.document.selection.createRange();var d=b.document.selection.type.toUpperCase();if(d=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(f))}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(f))}};this.getRangeAt=function(d){return this._ranges[d]};this._getCurrentSelection=function(){this.removeAllRanges();var d=a();if(d){this.addRange(d,true)}}},decomposeControlRange:function(i){var g=i.item(0),h=i.item(i.length-1);var f=g.parentNode,d=h.parentNode;var b=dijit.range.getIndex(g,f).o;var a=dijit.range.getIndex(h,d).o+1;return[f,b,d,a]},getEndPoint:function(f,d){var j=f.duplicate();j.collapse(!d);var h="EndTo"+(d?"End":"Start");var g=j.parentElement();var b,a,i;if(g.childNodes.length>0){dojo.every(g.childNodes,function(m,k){var o;if(m.nodeType!=3){j.moveToElementText(m);if(j.compareEndPoints(h,f)>0){b=m.previousSibling;if(i&&i.nodeType==3){b=i;o=true}else{b=g;a=k;return false}}else{if(k==g.childNodes.length-1){b=g;a=g.childNodes.length;return false}}}else{if(k==g.childNodes.length-1){b=m;o=true}}if(o&&b){var p=dijit.range.adjacentNoneTextNode(b)[0];if(p){b=p.nextSibling}else{b=g.firstChild}var n=dijit.range.adjacentNoneTextNode(b);p=n[0];var l=n[1];if(p){j.moveToElementText(p);j.collapse(false)}else{j.moveToElementText(g)}j.setEndPoint(h,f);a=j.text.length-l;return false}i=m;return true})}else{b=g;a=0}if(!d&&b.nodeType!=3&&a==b.childNodes.length){if(b.nextSibling&&b.nextSibling.nodeType==3){b=b.nextSibling;a=0}}return[b,a]},setEndPoint:function(j,i,f){var d=j.duplicate(),a,g;if(i.nodeType!=3){if(f>0){a=i.childNodes[f-1];if(a.nodeType==3){i=a;f=a.length}else{if(a.nextSibling&&a.nextSibling.nodeType==3){i=a.nextSibling;f=0}else{d.moveToElementText(a.nextSibling?a:i);var b=a.parentNode.insertBefore(document.createTextNode(" "),a.nextSibling);d.collapse(false);b.parentNode.removeChild(b)}}}else{d.moveToElementText(i);d.collapse(true)}}if(i.nodeType==3){var k=dijit.range.adjacentNoneTextNode(i);var h=k[0];g=k[1];if(h){d.moveToElementText(h);d.collapse(false);if(h.contentEditable!="inherit"){g++}}else{d.moveToElementText(i.parentNode);d.collapse(true)}f+=g;if(f>0){if(d.move("character",f)!=f){console.error("Error when moving!")}}}return d},decomposeTextRange:function(b){var a=dijit.range.ie.getEndPoint(b);var h=a[0],f=a[1];var g=a[0],d=a[1];if(b.htmlText.length){if(b.htmlText==b.text){d=f+b.text.length}else{a=dijit.range.ie.getEndPoint(b,true);g=a[0],d=a[1]}}return[h,f,g,d]},setRange:function(j,i,h,g,f,d){var b=dijit.range.ie.setEndPoint(j,i,h);j.setEndPoint("StartToStart",b);if(!d){var a=dijit.range.ie.setEndPoint(j,g,f)}j.setEndPoint("EndToEnd",a||b);return j}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3])}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer)}else{this.commonAncestorContainer=this.startContainer}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset)},setStart:function(b,a){a=parseInt(a);if(this.startContainer===b&&this.startOffset==a){return}delete this._cachedBookmark;this.startContainer=b;this.startOffset=a;if(!this.endContainer){this.setEnd(b,a)}else{this._updateInternal()}},setEnd:function(b,a){a=parseInt(a);if(this.endContainer===b&&this.endOffset==a){return}delete this._cachedBookmark;this.endContainer=b;this.endOffset=a;if(!this.startContainer){this.setStart(b,a)}else{this._updateInternal()}},setStartAfter:function(b,a){this._setPoint("setStart",b,a,1)},setStartBefore:function(b,a){this._setPoint("setStart",b,a,0)},setEndAfter:function(a,b){this._setPoint("setEnd",a,b,1)},setEndBefore:function(a,b){this._setPoint("setEnd",a,b,0)},_setPoint:function(g,d,a,b){var f=dijit.range.getIndex(d,d.parentNode).o;this[g](d.parentNode,f.pop()+b)},_getIERange:function(){var a=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(a,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return a},getBookmark:function(a){this._getIERange();return this._cachedBookmark},_select:function(){var a=this._getIERange();a.select()},deleteContents:function(){var a=this._getIERange();a.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true},cloneRange:function(){var a=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);a._body=this._body;return a},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true}})}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dijit._editor.escapeXml=function(b,a){b=b.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!a){b=b.replace(/'/gm,"&#39;")}return b};dijit._editor.getNodeHtml=function(f){var p;switch(f.nodeType){case 1:p="<"+f.nodeName.toLowerCase();var l=[];if(dojo.isIE&&f.outerHTML){var u=f.outerHTML;u=u.substr(0,u.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var a=/([^\s=]+)=/g;var g,t;while((g=a.exec(u))){t=g[1];if(t.substr(0,3)!="_dj"){if(t=="src"||t=="href"){if(f.getAttribute("_djrealurl")){l.push([t,f.getAttribute("_djrealurl")]);continue}}var d;switch(t){case"style":d=f.style.cssText.toLowerCase();break;case"class":d=f.className;break;default:d=f.getAttribute(t)}l.push([t,d.toString()])}}}else{var o,k=0;while((o=f.attributes[k++])){var b=o.name;if(b.substr(0,3)!="_dj"){var q=o.value;if(b=="src"||b=="href"){if(f.getAttribute("_djrealurl")){q=f.getAttribute("_djrealurl")}}l.push([b,q])}}}l.sort(function(j,i){return j[0]<i[0]?-1:(j[0]==i[0]?0:1)});var h=0;while((o=l[h++])){p+=" "+o[0]+'="'+(dojo.isString(o[1])?dijit._editor.escapeXml(o[1],true):o[1])+'"'}if(f.childNodes.length){p+=">"+dijit._editor.getChildrenHtml(f)+"</"+f.nodeName.toLowerCase()+">"}else{p+=" />"}break;case 3:p=dijit._editor.escapeXml(f.nodeValue,true);break;case 8:p="<!--"+dijit._editor.escapeXml(f.nodeValue,true)+"-->";break;default:p="<!-- Element not recognized - Type: "+f.nodeType+" Name: "+f.nodeName+"-->"}return p};dijit._editor.getChildrenHtml=function(h){var d="";if(!h){return d}var b=h.childNodes||h;var a=!dojo.isIE||b!==h;var g,f=0;while((g=b[f++])){if(!a||g.parentNode==h){d+=dijit._editor.getNodeHtml(g)}}return d}}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave){if(dojo._postLoad){(function(){var a=dojo.doc.createElement("textarea");a.id=dijit._scopeName+"._editor.RichText.savedContent";dojo.style(a,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(a)})()}else{try{dojo.doc.write('<textarea id="'+dijit._scopeName+'._editor.RichText.savedContent" style="display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;"></textarea>')}catch(e){}}}dojo.declare("dijit._editor.RichText",dijit._Widget,{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this._keyHandlers={};this.contentPreFilters.push(dojo.hitch(this,"_preFixUrlAttributes"));if(dojo.isMoz){this.contentPreFilters.push(this._fixContentForMoz);this.contentPostFilters.push(this._removeMozBogus)}if(dojo.isSafari){this.contentPostFilters.push(this._removeSafariBogus)}this.onLoadDeferred=new dojo.Deferred()},inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",_content:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.")}dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=dojo.hitch(this,function(g,f){return function(){return!this.execCommand(g,f)}});var d={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(true)},m:function(){this.isTabIndent=!this.isTabIndent},"1":a("formatblock","h1"),"2":a("formatblock","h2"),"3":a("formatblock","h3"),"4":a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!dojo.isIE){d.Z=a("redo")}for(var b in d){this.addKeyHandler(b,true,false,d[b])}},events:["onKeyPress","onKeyDown","onKeyUp","onClick"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(this._editorCommandsLocalized){return}this._editorCommandsLocalized=true;var h=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var f="",g,b=0;while((g=h[b++])){if(g.charAt(1)!="l"){f+="<"+g+"><span>content</span></"+g+"><br/>"}else{f+="<"+g+"><li>content</li></"+g+"><br/>"}}var j=dojo.doc.createElement("div");dojo.style(j,{position:"absolute",top:"-2000px"});dojo.doc.body.appendChild(j);j.innerHTML=f;var d=j.firstChild;while(d){dijit._editor.selection.selectElement(d.firstChild);dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[d.firstChild]);var a=d.tagName.toLowerCase();this._local2NativeFormatNames[a]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[a]]=a;d=d.nextSibling.nextSibling}dojo.body().removeChild(j)},open:function(l){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred()}if(!this.isClosed){this.close()}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);this._content="";if(arguments.length==1&&l.nodeName){this.domNode=l}var g=this.domNode;var h;if(g.nodeName&&g.nodeName.toLowerCase()=="textarea"){var f=(this.textarea=g);this.name=f.name;h=this._preFilterContent(f.value);g=this.domNode=dojo.doc.createElement("div");g.setAttribute("widgetId",this.id);f.removeAttribute("widgetId");g.cssText=f.cssText;g.className+=" "+f.className;dojo.place(g,f,"before");var j=dojo.hitch(this,function(){dojo.style(f,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var i=f.style;this.__overflow=i.overflow;i.overflow="hidden"}});if(dojo.isIE){setTimeout(j,10)}else{j()}if(f.form){dojo.connect(f.form,"onsubmit",this,function(){f.value=this.getValue()})}}else{h=this._preFilterContent(dijit._editor.getChildrenHtml(g));g.innerHTML=""}var n=dojo.contentBox(g);this._oldHeight=n.h;this._oldWidth=n.w;this.savedContent=h;if(g.nodeName&&g.nodeName=="LI"){g.innerHTML=" <br>"}this.editingArea=g.ownerDocument.createElement("div");g.appendChild(this.editingArea);if(this.name!=""&&(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)){var m=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");if(m.value!=""){var k=m.value.split(this._SEPARATOR),d=0,o;while((o=k[d++])){var b=o.split(":");if(b[0]==this.name){h=b[1];k.splice(d,1);break}}}this.connect(window,"onbeforeunload","_saveContent")}this.isClosed=false;if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var a=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));a.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt(h);a.style.border="none";a.style.width="100%";if(this._layoutMode){a.style.height="100%"}else{if(dojo.isIE>=7){if(this.height){a.style.height=this.height}if(this.minHeight){a.style.minHeight=this.minHeight}}else{a.style.height=this.height?this.height:this.minHeight}}a.frameBorder=0;a._loadFunc=dojo.hitch(this,function(i){this.window=i;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands()}this.onLoad();this.savedContent=this.getValue(true)});var p="javascript:parent."+dijit._scopeName+'.byId("'+this.id+'")._iframeSrc';a.setAttribute("src",p);this.editingArea.appendChild(a);if(dojo.isWebKit){setTimeout(function(){a.setAttribute("src",p)},0)}}else{this._drawIframe(h);this.savedContent=this.getValue(true)}if(g.nodeName=="LI"){g.lastChild.style.marginTop="-1.2em"}if(this.domNode.nodeName=="LI"){this.domNode.lastChild.style.marginTop="-1.2em"}dojo.addClass(this.domNode,"RichTextEditable")},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_localizedIframeTitles:null,_getIframeDocTxt:function(h){var j=dojo.getComputedStyle(this.domNode);if(dojo.isIE||(!this.height&&!dojo.isMoz)){h="<div>"+h+"</div>"}var b=[j.fontWeight,j.fontSize,j.fontFamily].join(" ");var f=j.lineHeight;if(f.indexOf("px")>=0){f=parseFloat(f)/parseFloat(j.fontSize)}else{if(f.indexOf("em")>=0){f=parseFloat(f)}else{f="1.0"}}var a="";this.style.replace(/(^|;)(line-|font-?)[^;]+/g,function(d){a+=d.replace(/^;/g,"")+";"});var i=dojo.doc;var g=i.charset||i.characterSet||i.defaultCharset||"UTF-8";return[this.isLeftToRight()?"<html><head>":"<html dir='rtl'><head>",(dojo.isMoz?"<title>"+this._localizedIframeTitles.iframeEditTitle+"</title>":""),"<meta http-equiv='Content-Type' content='text/html; charset="+g+"'>","<style>","body,html {","\tbackground:transparent;","\tpadding: 1em 0 0 0;","\tmargin: -1em 0 0 0;","}","body{","\ttop:0px; left:0px; right:0px;","\tfont:",b,";",((this.height||dojo.isOpera)?"":"position: fixed;"),"\tmin-height:",this.minHeight,";","\tline-height:",f,"}","p{ margin: 1em 0 !important; }",(this.height?"":"body,html{overflow-y:hidden;/*for IE*/} body > div {overflow-x:auto;/*FF:horizontal scrollbar*/ overflow-y:hidden;/*safari*/ min-height:"+this.minHeight+";/*safari*/}"),"li > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; } ","li{ min-height:1.2em; }","</style>",this._applyEditingAreaStyleSheets(),"</head><body onload='frameElement._loadFunc(window,document)' style='"+a+"'>"+h+"</body></html>"].join("")},_drawIframe:function(d){if(!this.iframe){var h=(this.iframe=dojo.doc.createElement("iframe"));h.id=this.id+"_iframe";var f=h.style;f.border="none";f.lineHeight="0";f.verticalAlign="bottom";this.editorObject=this.iframe;this._localizedIframeTitles=dojo.i18n.getLocalization("dijit.form","Textarea");var b=dojo.query('label[for="'+this.id+'"]');if(b.length){this._localizedIframeTitles.iframeEditTitle=b[0].innerHTML+" "+this._localizedIframeTitles.iframeEditTitle}h._loadFunc=function(i){}}this.iframe.style.width=this.inheritWidth?this._oldWidth:"100%";if(this._layoutMode){this.iframe.style.height="100%"}else{if(this.height){this.iframe.style.height=this.height}else{this.iframe.height=this._oldHeight}}var a;if(this.textarea){a=this.srcNodeRef}else{a=dojo.doc.createElement("div");a.style.display="none";a.innerHTML=d;this.editingArea.appendChild(a)}this.editingArea.appendChild(this.iframe);var g=dojo.hitch(this,function(){if(!this.editNode){if(!this.document){try{if(this.iframe.contentWindow){this.window=this.iframe.contentWindow;this.document=this.iframe.contentWindow.document}else{if(this.iframe.contentDocument){this.window=this.iframe.contentDocument.window;this.document=this.iframe.contentDocument}}}catch(i){}if(!this.document){setTimeout(g,50);return}var j=this.document;j.open();if(dojo.isAIR){j.body.innerHTML=d}else{j.write(this._getIframeDocTxt(d))}j.close();dojo.destroy(a)}if(!this.document.body){setTimeout(g,50);return}this.onLoad()}else{dojo.destroy(a);this.editNode.innerHTML=d;this.onDisplayChanged()}this._preDomFilterContent(this.editNode)});g()},_applyEditingAreaStyleSheets:function(){var f=[];if(this.styleSheets){f=this.styleSheets.split(";");this.styleSheets=""}f=f.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var g="",d=0,a;while((a=f[d++])){var b=(new dojo._Url(dojo.global.location,a)).toString();this.editingAreaStyleSheets.push(b);g+='<link rel="stylesheet" type="text/css" href="'+b+'"/>'}return g},addStyleSheet:function(f){var a=f.toString();if(a.charAt(0)=="."||(a.charAt(0)!="/"&&!f.host)){a=(new dojo._Url(dojo.global.location,a)).toString()}if(dojo.indexOf(this.editingAreaStyleSheets,a)>-1){return}this.editingAreaStyleSheets.push(a);if(this.document.createStyleSheet){this.document.createStyleSheet(a)}else{var b=this.document.getElementsByTagName("head")[0];var d=this.document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=a;b.appendChild(d)}},removeStyleSheet:function(d){var b=d.toString();if(b.charAt(0)=="."||(b.charAt(0)!="/"&&!d.host)){b=(new dojo._Url(dojo.global.location,b)).toString()}var a=dojo.indexOf(this.editingAreaStyleSheets,b);if(a==-1){return}delete this.editingAreaStyleSheets[a];dojo.withGlobal(this.window,"query",dojo,['link:[href="'+b+'"]']).orphan()},disabled:false,_mozSettingProps:{styleWithCSS:false},_setDisabledAttr:function(d){this.disabled=d;if(!this.isLoaded){return}d=!!d;if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var b=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(b){this.editNode.unselectable="on"}this.editNode.contentEditable=!d;if(b){var a=this;setTimeout(function(){a.editNode.unselectable="off"},0)}}else{try{this.document.designMode=(d?"off":"on")}catch(f){return}if(!d&&this._mozSettingProps){var g=this._mozSettingProps;for(var h in g){if(g.hasOwnProperty(h)){try{this.document.execCommand(h,false,g[h])}catch(f){}}}}}this._disabledOK=true},_isResized:function(){return false},onLoad:function(g){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;dijit.registerIframe(this.iframe)}if(!dojo.isIE&&(this.height||dojo.isMoz)){this.editNode=this.document.body}else{this.editNode=this.document.body.firstChild;var f=this;if(dojo.isIE){var d=(this.tabStop=dojo.doc.createElement("<div tabIndex=-1>"));this.editingArea.appendChild(d);this.iframe.onfocus=function(){f.editNode.setActive()}}}this.focusNode=this.editNode;this._preDomFilterContent(this.editNode);var b=this.events.concat(this.captureEvents);var a=this.iframe?this.document:this.editNode;dojo.forEach(b,function(h){this.connect(a,h.toLowerCase(),h)},this);if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged")}this.isLoaded=true;this.attr("disabled",this.disabled);if(this.onLoadDeferred){this.onLoadDeferred.callback(true)}this.onDisplayChanged(g);if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval)}))}},onKeyDown:function(b){if(b.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(b);if(this.queryCommandEnabled((b.shiftKey?"outdent":"indent"))){this.execCommand((b.shiftKey?"outdent":"indent"))}}if(dojo.isIE){if(b.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(b.shiftKey&&!b.ctrlKey&&!b.altKey){this.iframe.focus()}else{if(!b.shiftKey&&!b.ctrlKey&&!b.altKey){this.tabStop.focus()}}}else{if(b.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(b);this.execCommand("delete")}else{if((65<=b.keyCode&&b.keyCode<=90)||(b.keyCode>=37&&b.keyCode<=40)){b.charCode=b.keyCode;this.onKeyPress(b)}}}}else{if(dojo.isMoz&&!this.isTabIndent){if(b.keyCode==dojo.keys.TAB&&!b.shiftKey&&!b.ctrlKey&&!b.altKey&&this.iframe){var a=dojo.isFF<3?this.iframe.contentDocument:this.iframe;a.title=this._localizedIframeTitles.iframeFocusTitle;this.iframe.focus();dojo.stopEvent(b)}else{if(b.keyCode==dojo.keys.TAB&&b.shiftKey){if(this.toolbar){this.toolbar.focus()}dojo.stopEvent(b)}}}}return true},onKeyUp:function(a){return},setDisabled:function(a){dojo.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.attr("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_getDisableSpellCheckAttr:function(){return!dojo.attr(this.document.body,"spellcheck")},_setDisableSpellCheckAttr:function(a){if(this.document){dojo.attr(this.document.body,"spellcheck",!a)}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!a)}))}},onKeyPress:function(d){var f=(d.keyChar&&d.keyChar.toLowerCase())||d.keyCode;var a=this._keyHandlers[f];var b=arguments;if(a&&!d.altKey){dojo.forEach(a,function(g){if((!!g.shift==!!d.shiftKey)&&(!!g.ctrl==!!d.ctrlKey)){if(!g.handler.apply(this,b)){d.preventDefault()}}},this)}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed")}setTimeout(this._onKeyHitch,1);return true},addKeyHandler:function(a,d,f,b){if(!dojo.isArray(this._keyHandlers[a])){this._keyHandlers[a]=[]}this._keyHandlers[a].push({shift:f||false,ctrl:d||false,handler:b})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(a){if(!this._focused&&!this.disabled){this.focus()}},_onBlur:function(d){this.inherited(arguments);var a=this.getValue(true);if(a!=this.savedContent){this.onChange(a);this.savedContent=a}if(dojo.isMoz&&this.iframe){var b=dojo.isFF<3?this.iframe.contentDocument:this.iframe;b.title=this._localizedIframeTitles.iframeEditTitle}},_onFocus:function(a){if(!this.disabled){if(!this._disabledOK){this.attr("disabled",false)}this.inherited(arguments)}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus()}else{if(dojo.doc.body.focus){dojo.doc.body.focus()}}},focus:function(){if(!dojo.isIE){dijit.focus(this.iframe)}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject())}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(a){if(this._updateTimer){clearTimeout(this._updateTimer)}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged")}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(a){},_normalizeCommand:function(b){var a=b.toLowerCase();if(a=="formatblock"){if(dojo.isSafari){a="heading"}}else{if(a=="hilitecolor"&&!dojo.isMoz){a="backcolor"}}return a},_qcaCache:{},queryCommandAvailable:function(b){var a=this._qcaCache[b];if(a!=undefined){return a}return(this._qcaCache[b]=this._queryCommandAvailable(b))},_queryCommandAvailable:function(h){var a=1;var f=1<<1;var b=1<<2;var k=1<<3;var j=1<<4;var i=dojo.isWebKit;function g(l){return{ie:Boolean(l&a),mozilla:Boolean(l&f),webkit:Boolean(l&b),webkit420:Boolean(l&j),opera:Boolean(l&k)}}var d=null;switch(h.toLowerCase()){case"bold":case"italic":case"underline":case"subscript":case"superscript":case"fontname":case"fontsize":case"forecolor":case"hilitecolor":case"justifycenter":case"justifyfull":case"justifyleft":case"justifyright":case"delete":case"selectall":case"toggledir":d=g(f|a|b|k);break;case"createlink":case"unlink":case"removeformat":case"inserthorizontalrule":case"insertimage":case"insertorderedlist":case"insertunorderedlist":case"indent":case"outdent":case"formatblock":case"inserthtml":case"undo":case"redo":case"strikethrough":case"tabindent":d=g(f|a|k|j);break;case"blockdirltr":case"blockdirrtl":case"dirltr":case"dirrtl":case"inlinedirltr":case"inlinedirrtl":d=g(a);break;case"cut":case"copy":case"paste":d=g(a|f|j);break;case"inserttable":d=g(f|a);break;case"insertcell":case"insertcol":case"insertrow":case"deletecells":case"deletecols":case"deleterows":case"mergecells":case"splitcell":d=g(a|f);break;default:return false}return(dojo.isIE&&d.ie)||(dojo.isMoz&&d.mozilla)||(dojo.isWebKit&&d.webkit)||(dojo.isWebKit>420&&d.webkit420)||(dojo.isOpera&&d.opera)},execCommand:function(h,g){var f;this.focus();h=this._normalizeCommand(h);if(g!=undefined){if(h=="heading"){throw new Error("unimplemented")}else{if((h=="formatblock")&&dojo.isIE){g="<"+g+">"}}}if(h=="inserthtml"){g=this._preFilterContent(g);f=true;if(dojo.isIE){var d=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var i=d.item(0);while(d.length){d.remove(d.item(0))}i.outerHTML=g}else{d.pasteHTML(g)}d.select()}else{if(dojo.isMoz&&!g.length){this._sCall("remove")}else{f=this.document.execCommand(h,false,g)}}}else{if((h=="unlink")&&(this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var b=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[b]);f=this.document.execCommand("unlink",false,null)}else{if((h=="hilitecolor")&&(dojo.isMoz)){this.document.execCommand("styleWithCSS",false,true);f=this.document.execCommand(h,false,g);this.document.execCommand("styleWithCSS",false,false)}else{if((dojo.isIE)&&((h=="backcolor")||(h=="forecolor"))){g=arguments.length>1?g:null;f=this.document.execCommand(h,false,g)}else{g=arguments.length>1?g:null;if(g||h!="createlink"){f=this.document.execCommand(h,false,g)}}}}}this.onDisplayChanged();return f},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK){return false}a=this._normalizeCommand(a);if(dojo.isMoz||dojo.isWebKit){if(a=="unlink"){this._sCall("hasAncestorElement",["a"])}else{if(a=="inserttable"){return true}}}if(dojo.isWebKit){if(a=="copy"){a="cut"}else{if(a=="paste"){return true}}}var b=dojo.isIE?this.document.selection.createRange():this.document;return b.queryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK){return false}a=this._normalizeCommand(a);return this.document.queryCommandState(a)},queryCommandValue:function(a){if(this.disabled||!this._disabledOK){return false}var b;a=this._normalizeCommand(a);if(dojo.isIE&&a=="formatblock"){b=this._native2LocalFormatNames[this.document.queryCommandValue(a)]}else{b=this.document.queryCommandValue(a)}return b},_sCall:function(b,a){return dojo.withGlobal(this.window,b,dijit._editor.selection,a)},placeCursorAtStart:function(){this.focus();var b=false;if(dojo.isMoz){var a=this.editNode.firstChild;while(a){if(a.nodeType==3){if(a.nodeValue.replace(/^\s+|\s+$/g,"").length>0){b=true;this._sCall("selectElement",[a]);break}}else{if(a.nodeType==1){b=true;this._sCall("selectElementChildren",[a]);break}}a=a.nextSibling}}else{b=true;this._sCall("selectElementChildren",[this.editNode])}if(b){this._sCall("collapse",[true])}},placeCursorAtEnd:function(){this.focus();var b=false;if(dojo.isMoz){var a=this.editNode.lastChild;while(a){if(a.nodeType==3){if(a.nodeValue.replace(/^\s+|\s+$/g,"").length>0){b=true;this._sCall("selectElement",[a]);break}}else{if(a.nodeType==1){b=true;if(a.lastChild){this._sCall("selectElement",[a.lastChild])}else{this._sCall("selectElement",[a])}break}}a=a.previousSibling}}else{b=true;this._sCall("selectElementChildren",[this.editNode])}if(b){this._sCall("collapse",[false])}},getValue:function(a){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value}}return this._postFilterContent(null,a)},_getValueAttr:function(){return this.getValue()},setValue:function(a){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(a)}));return}if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=a}else{a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged()},replaceValue:function(a){if(this.isClosed){this.setValue(a)}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(a)}else{if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(dojo.isMoz&&!a){a="&nbsp;"}this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else{if(this.document&&this.document.selection){this.setValue(a)}}}}},_preFilterContent:function(b){var a=b;dojo.forEach(this.contentPreFilters,function(d){if(d){a=d(a)}});return a},_preDomFilterContent:function(a){a=a||this.editNode;dojo.forEach(this.contentDomPreFilters,function(b){if(b&&dojo.isFunction(b)){b(a)}},this)},_postFilterContent:function(d,a){var b;if(!dojo.isString(d)){d=d||this.editNode;if(this.contentDomPostFilters.length){if(a){d=dojo.clone(d)}dojo.forEach(this.contentDomPostFilters,function(f){d=f(d)})}b=dijit._editor.getChildrenHtml(d)}else{b=d}if(!dojo.trim(b.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){b=""}dojo.forEach(this.contentPostFilters,function(f){b=f(b)});return b},_saveContent:function(a){var b=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");b.value+=this._SEPARATOR+this.name+":"+this.getValue()},escapeXml:function(b,a){b=b.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!a){b=b.replace(/'/gm,"&#39;")}return b},getNodeHtml:function(a){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(a)},getNodeChildrenHtml:function(a){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(a)},close:function(f,b){if(this.isClosed){return false}if(!arguments.length){f=true}this._content=this.getValue();var a=(this.savedContent!=this._content);if(this.interval){clearInterval(this.interval)}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener}if(dojo.isIE){this.iframe.onfocus=null}this.iframe._loadFunc=null;if(this.textarea){var d=this.textarea.style;d.position="";d.left=d.top="";if(dojo.isIE){d.overflow=this.__overflow;this.__overflow=null}this.textarea.value=f?this._content:this.savedContent;dojo.destroy(this.domNode);this.domNode=this.textarea}else{this.domNode.innerHTML=f?this._content:this.savedContent}dojo.removeClass(this.domNode,"RichTextEditable");this.isClosed=true;this.isLoaded=false;delete this.editNode;if(this.window&&this.window._frameElement){this.window._frameElement=null}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;return a},destroyRendering:function(){},destroy:function(){this.destroyRendering();if(!this.isClosed){this.close(false)}this.inherited(arguments)},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"")},_removeSafariBogus:function(a){return a.replace(/\sclass="webkit-block-placeholder"/gi,"")},_fixContentForMoz:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")}})}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline"></div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW])},startup:function(){if(this._started){return}this.startupKeyNavChildren();this.inherited(arguments)}})}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(a,b){if(a){dojo.mixin(this,a)}this._connects=[]},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,queryCommand:null,command:"",commandArg:null,useDefaultCommand:true,buttonClass:dijit.form.Button,getLabel:function(a){return this.editor.commands[a]},_initButton:function(a){if(this.command.length){var d=this.getLabel(this.command);var b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){a=dojo.mixin({label:d,showLabel:false,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},a||{});this.button=new this.buttonClass(a)}}},destroy:function(a){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive()}},connect:function(d,a,b){this._connects.push(dojo.connect(d,a,this,b))},updateState:function(){var d=this.editor,f=this.command,a,b;if(!d||!d.isLoaded||!f.length){return}if(this.button){try{b=d.queryCommandEnabled(f);if(this.enabled!==b){this.enabled=b;this.button.attr("disabled",!b)}if(typeof this.button.checked=="boolean"){a=d.queryCommandState(f);if(this.checked!==a){this.checked=a;this.button.attr("checked",d.queryCommandState(f))}}}catch(d){}}},setEditor:function(a){this.editor=a;this._initButton();if(this.command.length&&!this.editor.queryCommandAvailable(this.command)){if(this.button){this.button.domNode.style.display="none"}}if(this.button&&this.useDefaultCommand){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg))}this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(a){if(this.button){a.addChild(this.button)}}})}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(a){if(a){dojo.mixin(this,a)}},setEditor:function(a){this.editor=a;if(this.blockNodeForEnter=="BR"){if(dojo.isIE){a.contentDomPreFilters.push(dojo.hitch(this,"regularPsToSingleLinePs"));a.contentDomPostFilters.push(dojo.hitch(this,"singleLinePsToRegularPs"));a.onLoadDeferred.addCallback(dojo.hitch(this,"_fixNewLineBehaviorForIE"))}else{a.onLoadDeferred.addCallback(dojo.hitch(this,function(g){try{this.editor.document.execCommand("insertBrOnReturn",false,true)}catch(f){}return g}))}}else{if(this.blockNodeForEnter){dojo.require("dijit._editor.range");var b=dojo.hitch(this,this.handleEnterKey);a.addKeyHandler(13,0,0,b);a.addKeyHandler(13,0,1,b);this.connect(this.editor,"onKeyPressed","onKeyPressed")}}},connect:function(d,a,b){if(!this._connects){this._connects=[]}this._connects.push(dojo.connect(d,a,this,b))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this._connects=[]},onKeyPressed:function(i){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var h=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!h){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var f=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(f){f.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var d=this.editor.document.selection.createRange();d.move("character",-1);d.select()}}else{alert("onKeyPressed: Can not find the new block node")}}else{if(dojo.isMoz){if(h.parentNode.parentNode.nodeName=="LI"){h=h.parentNode.parentNode}}var b=h.firstChild;if(b&&b.nodeType==1&&(b.nodeName=="UL"||b.nodeName=="OL")){h.insertBefore(b.ownerDocument.createTextNode(" "),b);var a=dijit.range.create();a.setStart(h.firstChild,0);var g=dijit.range.getSelection(this.editor.window,true);g.removeAllRanges();g.addRange(a)}}}this._checkListLater=false}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling)}delete this._pressedEnterInBlock}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(f){if(!this.blockNodeForEnter){return true}var d,b,a,j=this.editor.document,m;if(f.shiftKey||this.blockNodeForEnter=="BR"){var n=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var l=dijit.range.getAncestor(n,this.blockNodes);if(l){if(!f.shiftKey&&l.tagName=="LI"){return true}d=dijit.range.getSelection(this.editor.window);b=d.getRangeAt(0);if(!b.collapsed){b.deleteContents()}if(dijit.range.atBeginningOfContainer(l,b.startContainer,b.startOffset)){if(f.shiftKey){m=j.createElement("br");a=dijit.range.create();l.insertBefore(m,l.firstChild);a.setStartBefore(m.nextSibling);d.removeAllRanges();d.addRange(a)}else{dojo.place(m,l,"before")}}else{if(dijit.range.atEndOfContainer(l,b.startContainer,b.startOffset)){a=dijit.range.create();m=j.createElement("br");if(f.shiftKey){l.appendChild(m);l.appendChild(j.createTextNode(" "));a.setStart(l.lastChild,0)}else{dojo.place(m,l,"after");a.setStartAfter(l)}d.removeAllRanges();d.addRange(a)}else{return true}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>")}return false}var k=true;d=dijit.range.getSelection(this.editor.window);b=d.getRangeAt(0);if(!b.collapsed){b.deleteContents()}var i=dijit.range.getBlockAncestor(b.endContainer,null,this.editor.editNode);var h=i.blockNode;if((this._checkListLater=(h&&(h.nodeName=="LI"||h.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=h}if(/^(?:\s|&nbsp;)$/.test(h.innerHTML)){h.innerHTML=""}return true}if(!i.blockNode||i.blockNode===this.editor.editNode){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);i={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(i.blockNode){if(!(i.blockNode.textContent||i.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length){this.removeTrailingBr(i.blockNode);return false}}else{i.blockNode=this.editor.editNode}d=dijit.range.getSelection(this.editor.window);b=d.getRangeAt(0)}var g=j.createElement(this.blockNodeForEnter);g.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(i.blockNode);if(dijit.range.atEndOfContainer(i.blockNode,b.endContainer,b.endOffset)){if(i.blockNode===i.blockContainer){i.blockNode.appendChild(g)}else{dojo.place(g,i.blockNode,"after")}k=false;a=dijit.range.create();a.setStart(g,0);d.removeAllRanges();d.addRange(a);if(this.editor.height){g.scrollIntoView(false)}}else{if(dijit.range.atBeginningOfContainer(i.blockNode,b.startContainer,b.startOffset)){dojo.place(g,i.blockNode,i.blockNode===i.blockContainer?"first":"before");if(g.nextSibling&&this.editor.height){g.nextSibling.scrollIntoView(false)}k=false}else{if(dojo.isMoz){this._pressedEnterInBlock=i.blockNode}}}return k},removeTrailingBr:function(b){var a=/P|DIV|LI/i.test(b.tagName)?b:dijit._editor.selection.getParentOfType(b,["P","DIV","LI"]);if(!a){return}if(a.lastChild){if((a.childNodes.length>1&&a.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue))||(a.lastChild&&a.lastChild.tagName=="BR")){dojo.destroy(a.lastChild)}}if(!a.childNodes.length){a.innerHTML=this.bogusHtmlContent}},_fixNewLineBehaviorForIE:function(b){if(this.editor.document.__INSERTED_EDITIOR_NEWLINE_CSS===undefined){var f="p{margin:0 !important;}";var a=function(l,k,d){if(!l){return null}if(!k){k=document}var j=k.createElement("style");j.setAttribute("type","text/css");var h=k.getElementsByTagName("head")[0];if(!h){return null}else{h.appendChild(j)}if(j.styleSheet){var i=function(){try{j.styleSheet.cssText=l}catch(m){}};if(j.styleSheet.disabled){setTimeout(i,10)}else{i()}}else{var g=k.createTextNode(l);j.appendChild(g)}return j};a(f,this.editor.document);this.editor.document.__INSERTED_EDITIOR_NEWLINE_CSS=true;return b}return null},regularPsToSingleLinePs:function(f,d){function b(j){function n(p){var o=p[0].ownerDocument.createElement("p");p[0].parentNode.insertBefore(o,p[0]);dojo.forEach(p,function(q){o.appendChild(q)})}var i=0;var m=[];var l;while(i<j.childNodes.length){l=j.childNodes[i];if(l.nodeType==3||(l.nodeType==1&&l.nodeName!="BR"&&dojo.style(l,"display")!="block")){m.push(l)}else{var k=l.nextSibling;if(m.length){n(m);i=(i+1)-m.length;if(l.nodeName=="BR"){dojo.destroy(l)}}m=[]}i++}if(m.length){n(m)}}function g(l){var o=null;var n=[];var k=l.childNodes.length-1;for(var j=k;j>=0;j--){o=l.childNodes[j];if(o.nodeName=="BR"){var m=o.ownerDocument.createElement("p");dojo.place(m,l,"after");if(n.length==0&&j!=k){m.innerHTML="&nbsp;"}dojo.forEach(n,function(i){m.appendChild(i)});dojo.destroy(o);n=[]}else{n.unshift(o)}}}var a=[];var h=f.getElementsByTagName("p");dojo.forEach(h,function(i){a.push(i)});dojo.forEach(a,function(j){if((j.previousSibling)&&(j.previousSibling.nodeName=="P"||dojo.style(j.previousSibling,"display")!="block")){var i=j.parentNode.insertBefore(this.document.createElement("p"),j);i.innerHTML=d?"":"&nbsp;"}g(j)},this.editor);b(f);return f},singleLinePsToRegularPs:function(b){function a(o){var t=o.getElementsByTagName("p");var u=[];for(var n=0;n<t.length;n++){var s=t[n];var q=false;for(var m=0;m<u.length;m++){if(u[m]===s.parentNode){q=true;break}}if(!q){u.push(s.parentNode)}}return u}function k(i){if(i.nodeType!=1||i.tagName!="P"){return dojo.style(i,"display")=="block"}else{if(!i.childNodes.length||i.innerHTML=="&nbsp;"){return true}}return false}var h=a(b);for(var f=0;f<h.length;f++){var g=h[f];var l=null;var d=g.firstChild;var j=null;while(d){if(d.nodeType!="1"||d.tagName!="P"){l=null}else{if(k(d)){j=d;l=null}else{if(l==null){l=d}else{if((!l.lastChild||l.lastChild.nodeName!="BR")&&(d.firstChild)&&(d.firstChild.nodeName!="BR")){l.appendChild(this.editor.document.createElement("br"))}while(d.firstChild){l.appendChild(d.firstChild)}j=d}}}d=d.nextSibling;if(j){dojo.destroy(j);j=null}}}return b}})}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"]}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate")}},postCreate:function(){if(this.customUndo){dojo.require("dijit._editor.range");this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0)}if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins)}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({});dojo.place(this.toolbar.domNode,this.editingArea,"before")}dojo.forEach(this.plugins,this.addPlugin,this);this.onNormalizedDisplayChanged();this.toolbar.startup()},destroy:function(){dojo.forEach(this._plugins,function(a){if(a&&a.destroy){a.destroy()}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(b,a){var f=dojo.isString(b)?{name:b}:b;if(!f.setEditor){var g={args:f,plugin:null,editor:this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[g]);if(!g.plugin){var d=dojo.getObject(f.name);if(d){g.plugin=new d(f)}}if(!g.plugin){console.warn("Cannot find plugin",b);return}b=g.plugin}if(arguments.length>1){this._plugins[a]=b}else{this._plugins.push(b)}b.setEditor(this);if(dojo.isFunction(b.setToolbar)){b.setToolbar(this.toolbar)}},startup:function(){},resize:function(a){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments)},layout:function(){this.editingArea.style.height=(this._contentBox.h-dojo.marginBox(this.toolbar.domNode).h)+"px";if(this.iframe){this.iframe.style.height="100%"}this._layoutMode=true},_onIEMouseDown:function(a){delete this._savedSelection;if(a.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0)}this.inherited(arguments)},onBeforeDeactivate:function(a){if(this.customUndo){this.endEditing(true)}this._saveSelection()},customUndo:dojo.isIE,editActionInterval:3,beginEditing:function(a){if(!this._inEditing){this._inEditing=true;this._beginEditing(a)}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer)}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval)}},_steps:[],_undoedSteps:[],execCommand:function(g){if(this.customUndo&&(g=="undo"||g=="redo")){return this[g]()}else{if(this.customUndo){this.endEditing();this._beginEditing()}try{var d=this.inherited("execCommand",arguments);if(dojo.isWebKit&&g=="paste"&&!d){throw{code:1011}}}catch(h){if(h.code==1011&&/copy|cut|paste/.test(g)){var a=dojo.string.substitute,f={cut:"X",copy:"C",paste:"V"},b=navigator.userAgent.indexOf("Macintosh")!=-1;alert(a(this.commands.systemShortcut,[this.commands[g],a(this.commands[b?"appleKey":"ctrlKey"],[f[g]])]))}d=false}if(this.customUndo){this._endEditing()}return d}},queryCommandEnabled:function(a){if(this.customUndo&&(a=="undo"||a=="redo")){return a=="undo"?(this._steps.length>1):(this._undoedSteps.length>0)}else{return this.inherited("queryCommandEnabled",arguments)}},focus:function(){var a=0;if(this._savedSelection&&dojo.isIE){a=dijit._curFocus!=this.editNode}this.inherited(arguments);if(a){this._restoreSelection()}},_moveToBookmark:function(a){var d=a;if(dojo.isIE){if(dojo.isArray(a)){d=[];dojo.forEach(a,function(b){d.push(dijit.range.getNode(b,this.editNode))},this)}}else{var f=dijit.range.create();f.setStart(dijit.range.getNode(a.startContainer,this.editNode),a.startOffset);f.setEnd(dijit.range.getNode(a.endContainer,this.editNode),a.endOffset);d=f}dojo.withGlobal(this.window,"moveToBookmark",dijit,[d])},_changeToStep:function(f,d){this.setValue(d.text);var a=d.bookmark;if(!a){return}this._moveToBookmark(a)},undo:function(){this.endEditing(true);var a=this._steps.pop();if(this._steps.length>0){this.focus();this._changeToStep(a,this._steps[this._steps.length-1]);this._undoedSteps.push(a);this.onDisplayChanged();return true}return false},redo:function(){this.endEditing(true);var a=this._undoedSteps.pop();if(a&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],a);this._steps.push(a);this.onDisplayChanged();return true}return false},endEditing:function(a){if(this._editTimer){clearTimeout(this._editTimer)}if(this._inEditing){this._endEditing(a);this._inEditing=false}},_getBookmark:function(){var a=dojo.withGlobal(this.window,dijit.getBookmark);var d=[];if(dojo.isIE){if(dojo.isArray(a)){dojo.forEach(a,function(b){d.push(dijit.range.getIndex(b,this.editNode).o)},this);a=d}}else{d=dijit.range.getIndex(a.startContainer,this.editNode).o;a={startContainer:d,startOffset:a.startOffset,endContainer:a.endContainer===a.startContainer?d:dijit.range.getIndex(a.endContainer,this.editNode).o,endOffset:a.endOffset}}return a},_beginEditing:function(a){if(this._steps.length===0){this._steps.push({text:this.savedContent,bookmark:this._getBookmark()})}},_endEditing:function(b){var a=this.getValue(true);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(b){if(!dojo.isIE&&!this.iframe&&b.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection()}if(!this.customUndo){this.inherited(arguments);return}var a=b.keyCode,d=dojo.keys;if(b.ctrlKey&&!b.altKey){if(a==90||a==122){dojo.stopEvent(b);this.undo();return}else{if(a==89||a==121){dojo.stopEvent(b);this.redo();return}}}this.inherited(arguments);switch(a){case d.ENTER:case d.BACKSPACE:case d.DELETE:this.beginEditing();break;case 88:case 86:if(b.ctrlKey&&!b.altKey&&!b.metaKey){this.endEditing();if(b.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1)}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1)}break}default:if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&(b.keyCode<dojo.keys.F1||b.keyCode>dojo.keys.F15)){this.beginEditing();break}case d.ALT:this.endEditing();break;case d.UP_ARROW:case d.DOWN_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:case d.HOME:case d.END:case d.PAGE_UP:case d.PAGE_DOWN:this.endEditing(true);break;case d.CTRL:case d.SHIFT:case d.TAB:break}},_onBlur:function(){this.inherited("_onBlur",arguments);this.endEditing(true)},_saveSelection:function(){this._savedSelection=this._getBookmark()},_restoreSelection:function(){if(this._savedSelection){if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection)}delete this._savedSelection}},_onFocus:function(){setTimeout(dojo.hitch(this,"_restoreSelection"),0);this.inherited(arguments)},onClick:function(){this.endEditing(true);this.inherited(arguments)}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(g){if(g.plugin){return}var d=g.args,f;var a=dijit._editor._Plugin;var b=d.name;switch(b){case"undo":case"redo":case"cut":case"copy":case"paste":case"insertOrderedList":case"insertUnorderedList":case"indent":case"outdent":case"justifyCenter":case"justifyFull":case"justifyLeft":case"justifyRight":case"delete":case"selectAll":case"removeFormat":case"unlink":case"insertHorizontalRule":f=new a({command:b});break;case"bold":case"italic":case"underline":case"strikethrough":case"subscript":case"superscript":f=new a({buttonClass:dijit.form.ToggleButton,command:b});break;case"|":f=new a({button:new dijit.ToolbarSeparator()})}g.plugin=f})}if(!dojo._hasResource["dojox.grid.compat._data.dijitEditors"]){dojo._hasResource["dojox.grid.compat._data.dijitEditors"]=true;dojo.provide("dojox.grid.compat._data.dijitEditors");dojo.declare("dojox.grid.editors.Dijit",dojox.grid.editors.base,{editorClass:"dijit.form.TextBox",constructor:function(a){this.editor=null;this.editorClass=dojo.getObject(this.cell.editorClass||this.editorClass)},format:function(b,a){this.needFormatNode(b,a);return"<div></div>"},getValue:function(a){return this.editor.getValue()},setValue:function(b,a){if(this.editor&&this.editor.setValue){if(this.editor.onLoadDeferred){var d=this;this.editor.onLoadDeferred.addCallback(function(){d.editor.setValue(a==null?"":a)})}else{this.editor.setValue(a)}}else{this.inherited(arguments)}},getEditorProps:function(a){return dojo.mixin({},this.cell.editorProps||{},{constraints:dojo.mixin({},this.cell.constraint)||{},value:a})},createEditor:function(d,a,b){return new this.editorClass(this.getEditorProps(a),d)},attachEditor:function(d,b,a){d.appendChild(this.editor.domNode);this.setValue(a,b)},formatNode:function(d,b,a){if(!this.editorClass){return b}if(!this.editor){this.editor=this.createEditor.apply(this,arguments)}else{this.attachEditor.apply(this,arguments)}this.sizeEditor.apply(this,arguments);this.cell.grid.rowHeightChanged(a);this.focus()},sizeEditor:function(b,a,g){var f=this.cell.getNode(g),d=dojo.contentBox(f);dojo.marginBox(this.editor.domNode,{w:d.w})},focus:function(b,a){if(this.editor){setTimeout(dojo.hitch(this.editor,function(){dojox.grid.fire(this,"focus")}),0)}},_finish:function(a){this.inherited(arguments);dojox.grid.removeNode(this.editor.domNode)}});dojo.declare("dojox.grid.editors.ComboBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.ComboBox",getEditorProps:function(b){var d=[];dojo.forEach(this.cell.options,function(f){d.push({name:f,value:f})});var a=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:d}});return dojo.mixin({},this.cell.editorProps||{},{value:b,store:a})},getValue:function(){var a=this.editor;a.setDisplayedValue(a.getDisplayedValue());return a.getValue()}});dojo.declare("dojox.grid.editors.DateTextBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.DateTextBox",setValue:function(b,a){if(this.editor){this.editor.setValue(new Date(a))}else{this.inherited(arguments)}},getEditorProps:function(a){return dojo.mixin(this.inherited(arguments),{value:new Date(a)})}});dojo.declare("dojox.grid.editors.CheckBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.CheckBox",getValue:function(){return this.editor.checked},setValue:function(b,a){if(this.editor&&this.editor.setAttribute){this.editor.setAttribute("checked",a)}else{this.inherited(arguments)}},sizeEditor:function(a,d,b){return}});dojo.declare("dojox.grid.editors.Editor",dojox.grid.editors.Dijit,{editorClass:"dijit.Editor",getEditorProps:function(a){return dojo.mixin({},this.cell.editorProps||{},{height:this.cell.editorHeight||"100px"})},createEditor:function(f,d,a){var b=new this.editorClass(this.getEditorProps(d),f);dojo.connect(b,"onLoad",dojo.hitch(this,"populateEditor"));return b},formatNode:function(a,f,d){this.content=f;this.inherited(arguments);if(dojo.isMoz){var b=this.editor;b.open();if(this.cell.editorToolbar){dojo.place(b.toolbar.domNode,b.editingArea,"before")}}},populateEditor:function(){this.editor.setValue(this.content);this.editor.placeCursorAtEnd()}})}if(!dojo._hasResource["dojox.grid.compat.Grid"]){dojo._hasResource["dojox.grid.compat.Grid"]=true;dojo.provide("dojox.grid.compat.Grid");dojo.declare("dojox.Grid",dojox.VirtualGrid,{model:"dojox.grid.data.Table",postCreate:function(){if(this.model){var a=this.model;if(dojo.isString(a)){a=dojo.getObject(a)}this.model=(dojo.isFunction(a))?new a():a;this._setModel(this.model)}this.inherited(arguments)},destroy:function(){this.setModel(null);this.inherited(arguments)},_structureChanged:function(){this.indexCellFields();this.inherited(arguments)},_setModel:function(a){this.model=a;if(this.model){this.model.observer(this);this.model.measure();this.indexCellFields()}},setModel:function(a){if(this.model){this.model.notObserver(this)}this._setModel(a)},get:function(a){return this.grid.model.getDatum(a,this.fieldIndex)},modelAllChange:function(){this.rowCount=(this.model?this.model.getRowCount():0);this.updateRowCount(this.rowCount)},modelBeginUpdate:function(){this.beginUpdate()},modelEndUpdate:function(){this.endUpdate()},modelRowChange:function(a,b){this.updateRow(b)},modelDatumChange:function(d,b,a){this.updateRow(b)},modelFieldsChange:function(){this.indexCellFields();this.render()},modelInsertion:function(a){this.updateRowCount(this.model.getRowCount())},modelRemoval:function(a){this.updateRowCount(this.model.getRowCount())},getCellName:function(b){var a=this.model.fields.values,d=b.fieldIndex;return d>=0&&d<a.length&&a[d].name||this.inherited(arguments)},indexCellFields:function(){var a=this.layout.cells;for(var b=0,d;a&&(d=a[b]);b++){if(dojo.isString(d.field)){d.fieldIndex=this.model.fields.indexOf(d.field)}}},refresh:function(){this.edit.cancel();this.model.measure()},canSort:function(b){var a=this.getSortField(b);return a&&this.model.canSort(a)},getSortField:function(a){var b=this.getCell(this.getSortIndex(a));return(b.fieldIndex+1)*(this.sortInfo>0?1:-1)},sort:function(){this.edit.apply();this.model.sort(this.getSortField())},addRow:function(f,d){this.edit.apply();var b=d||-1;if(b<0){b=this.selection.getFirstSelected()||0}if(b<0){b=0}this.model.insert(f,b);this.model.beginModifyRow(b);for(var a=0,g;((g=this.getCell(a))&&!g.editor);a++){}if(g&&g.editor){this.edit.setEditCell(g,b);this.focus.setFocusCell(g,b)}else{this.focus.setFocusCell(this.getCell(0),b)}},removeSelectedRows:function(){this.edit.apply();var a=this.selection.getSelected();if(a.length){this.model.remove(a);this.selection.clear()}},canEdit:function(b,a){return(this.model.canModify?this.model.canModify(a):true)},doStartEdit:function(b,a){this.model.beginModifyRow(a);this.onStartEdit(b,a)},doApplyCellEdit:function(b,a,d){this.model.setDatum(b,a,d);this.onApplyCellEdit(b,a,d)},doCancelEdit:function(a){this.model.cancelModifyRow(a);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.model.endModifyRow(a);this.onApplyEdit(a)},styleRowState:function(g){if(this.model.getState){var a=this.model.getState(g.index),h="";for(var d=0,b=["inflight","error","inserting"],f;f=b[d];d++){if(a[f]){h=" dojoxGrid-row-"+f;break}}g.customClasses+=h}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)}});dojox.Grid.markupFactory=function(a,f,b){var h=dojo;var i=function(j){var d=h.attr(j,"width")||"auto";if((d!="auto")&&(d.substr(-2)!="em")){d=parseInt(d)+"px"}return d};if(!a.model&&h.hasAttr(f,"store")){var g=f.cloneNode(false);h.attr(g,{jsId:null,dojoType:h.attr(f,"dataModelClass")||"dojox.grid.data.DojoData"});a.model=h.parser.instantiate([g])[0]}if(!a.structure&&f.nodeName.toLowerCase()=="table"){a.structure=h.query("> colgroup",f).map(function(k){var d=h.attr(k,"span");var j={noscroll:(h.attr(k,"noscroll")=="true")?true:false,__span:(!!d?parseInt(d):1),cells:[]};if(h.hasAttr(k,"width")){j.width=i(k)}return j});if(!a.structure.length){a.structure.push({__span:Infinity,cells:[]})}h.query("thead > tr",f).forEach(function(n,m){var l=0;var k=0;var d;var j=null;h.query("> th",n).map(function(q){if(!j){d=0;j=a.structure[0]}else{if(l>=(d+j.__span)){k++;d+=j.__span;var p=j;j=a.structure[k]}}var o={name:h.trim(h.attr(q,"name")||q.innerHTML),field:h.trim(h.attr(q,"field")||""),colSpan:parseInt(h.attr(q,"colspan")||1)};l+=o.colSpan;o.field=o.field||o.name;o.width=i(q);if(!j.cells[m]){j.cells[m]=[]}j.cells[m].push(o)})})}return new dojox.Grid(a,f)};dojox.grid.Grid=dojox.Grid}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit")}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var b=dojox.html.metrics;b.getFontMeasurements=function(){var h={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%"}var k=dojo.doc.createElement("div");var i=k.style;i.position="absolute";i.left="-100px";i.top="0";i.width="30px";i.height="1000em";i.border="0";i.margin="0";i.padding="0";i.outline="0";i.lineHeight="1";i.overflow="hidden";dojo.body().appendChild(k);for(var j in h){i.fontSize=j;h[j]=Math.round(k.offsetHeight*12/16)*16/12/1000}dojo.body().removeChild(k);k=null;return h};var d=null;b.getCachedFontMeasurements=function(h){if(h||!d){d=b.getFontMeasurements()}return d};var g=null,f={};b.getTextBox=function(n,l,k){var h;if(!g){h=g=dojo.doc.createElement("div");h.style.position="absolute";h.style.left="-10000px";h.style.top="0";dojo.body().appendChild(h)}else{h=g}h.className="";h.style.border="0";h.style.margin="0";h.style.padding="0";h.style.outline="0";if(arguments.length>1&&l){for(var j in l){if(j in f){continue}h.style[j]=l[j]}}if(arguments.length>2&&k){h.className=k}h.innerHTML=n;return dojo.marginBox(h)};var a={w:16,h:16};b.getScrollbar=function(){return{w:a.w,h:a.h}};b._fontResizeNode=null;b.initOnFontResize=function(i){var j=b._fontResizeNode=dojo.doc.createElement("iframe");var h=j.style;h.position="absolute";h.width="5em";h.height="10em";h.top="-10000px";if(dojo.isIE){j.onreadystatechange=function(){if(j.contentWindow.document.readyState=="complete"){j.onresize=j.contentWindow.parent[dojox._scopeName].html.metrics._fontresize}}}else{j.onload=function(){j.contentWindow.onresize=j.contentWindow.parent[dojox._scopeName].html.metrics._fontresize}}j.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");dojo.body().appendChild(j);b.initOnFontResize=function(){}};b.onFontResize=function(){};b._fontresize=function(){b.onFontResize()};dojo.addOnUnload(function(){var h=b._fontResizeNode;if(h){if(dojo.isIE&&h.onresize){h.onresize=null}else{if(h.contentWindow&&h.contentWindow.onresize){h.contentWindow.onresize=null}}b._fontResizeNode=null}});dojo.addOnLoad(function(){try{var i=dojo.doc.createElement("div");i.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(i);a.w=i.offsetWidth-i.clientWidth;a.h=i.offsetHeight-i.clientHeight;dojo.body().removeChild(i);delete i}catch(h){}if("fontSizeWatch"in dojo.config&&!!dojo.config.fontSizeWatch){b.initOnFontResize()}})})()}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var a=dojox.grid.util;a.na="...";a.rowIndexTag="gridRowIndex";a.gridViewTag="gridView";a.fire=function(b,g,d){var f=b&&g&&b[g];return f&&(d?f.apply(b,d):b[g]())};a.setStyleHeightPx=function(g,f){if(f>=0){var d=g.style;var b=f+"px";if(g&&d.height!=b){d.height=b}}};a.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];a.keyEvents=["keyup","keydown","keypress"];a.funnelEvents=function(k,j,h,g){var d=(g?g:a.mouseEvents.concat(a.keyEvents));for(var f=0,b=d.length;f<b;f++){j.connect(k,"on"+d[f],h)}};a.removeNode=function(b){b=dojo.byId(b);b&&b.parentNode&&b.parentNode.removeChild(b);return b};a.arrayCompare=function(g,f){for(var d=0,b=g.length;d<b;d++){if(g[d]!=f[d]){return false}}return(g.length==f.length)};a.arrayInsert=function(d,b,f){if(d.length<=b){d[b]=f}else{d.splice(b,0,f)}};a.arrayRemove=function(b,d){b.splice(d,1)};a.arraySwap=function(g,d,b){var f=g[d];g[d]=g[b];g[b]=f}})()}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var d=function(j){var h=0,l,k=j.parentNode;while((l=k.childNodes[h++])){if(l==j){return h-1}}return-1};var b=function(m){if(!m){return}var k=function(i){return i.domNode&&dojo.isDescendant(i.domNode,m,true)};var j=dijit.registry.filter(k);for(var l=0,h;(h=j[l]);l++){h.destroy()}delete j};var a=function(i){var h=dojo.byId(i);return(h&&h.tagName?h.tagName.toLowerCase():"")};var g=function(l,k){var j=[];var h=0,m;while((m=l.childNodes[h])){h++;if(a(m)==k){j.push(m)}}return j};var f=function(h){return g(h,"div")};dojo.declare("dojox.grid._Scroller",null,{constructor:function(h){this.setContentNodes(h);this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(j,h,i){switch(arguments.length){case 3:this.rowsPerPage=i;case 2:this.keepRows=h;case 1:this.rowCount=j;default:break}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},_getPageCount:function(i,h){return i?(Math.ceil(i/h)||1):0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(h){this.keepRows=h;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},setContentNodes:function(h){this.contentNodes=h;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var j=0;j<this.colCount;j++){this.pageNodes[j]=[]}},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false},updateRowCount:function(k){this.invalidateNodes();this.rowCount=k;var j=this.pageCount;if(j===0){this.height=1}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<j){for(var h=j-1;h>=this.pageCount;h--){this.height-=this.getPageHeight(h);delete this.pageHeights[h]}}else{if(this.pageCount>j){this.height+=this.defaultPageHeight*(this.pageCount-j-1)+this.calcLastPageHeight()}}this.resize()},pageExists:function(h){return Boolean(this.getDefaultPageNode(h))},measurePage:function(j){if(this.grid.rowHeight){var h=this.grid.rowHeight+1;return((j+1)*this.rowsPerPage>this.rowCount?this.rowCount-j*this.rowsPerPage:this.rowsPerPage)*h}var i=this.getDefaultPageNode(j);return(i&&i.innerHTML)?i.offsetHeight:undefined},positionPage:function(k,j){for(var h=0;h<this.colCount;h++){this.pageNodes[h][k].style.top=j+"px"}},repositionPages:function(l){var j=this.getDefaultNodes();var k=0;for(var h=0;h<this.stack.length;h++){k=Math.max(this.stack[h],k)}var q=j[l];var o=(q?this.getPageNodePosition(q)+this.getPageHeight(l):0);for(var m=l+1;m<=k;m++){q=j[m];if(q){if(this.getPageNodePosition(q)==o){return}this.positionPage(m,o)}o+=this.getPageHeight(m)}},installPage:function(j){for(var h=0;h<this.colCount;h++){this.contentNodes[h].appendChild(this.pageNodes[h][j])}},preparePage:function(m,h){var l=(h?this.popPage():null);for(var j=0;j<this.colCount;j++){var n=this.pageNodes[j];var k=(l===null?this.createPageNode():this.invalidatePageNode(l,n));k.pageIndex=m;n[m]=k}},renderPage:function(l){var m=[];var k,h;for(k=0;k<this.colCount;k++){m[k]=this.pageNodes[k][l]}for(k=0,h=l*this.rowsPerPage;(k<this.rowsPerPage)&&(h<this.rowCount);k++,h++){this.renderRow(h,m)}},removePage:function(l){for(var k=0,h=l*this.rowsPerPage;k<this.rowsPerPage;k++,h++){this.removeRow(h)}},destroyPage:function(h){for(var j=0;j<this.colCount;j++){var k=this.invalidatePageNode(h,this.pageNodes[j]);if(k){dojo.destroy(k)}}},pacify:function(h){},pacifying:false,pacifyTicks:200,setPacifying:function(h){if(this.pacifying!=h){this.pacifying=h;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=new Date().getTime()},doPacify:function(){var h=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return h},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight}for(var k=0;k<this.colCount;k++){dojox.grid.util.setStyleHeightPx(this.contentNodes[k],Math.max(1,this.height))}var h=(!this._invalidating);if(!h){var j=this.grid.attr("autoHeight");if(typeof j=="number"&&j<=Math.min(this.rowsPerPage,this.rowCount)){h=true}}if(h){this.needPage(this.page,this.pageTop)}var l=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var m=this.getPageHeight(this.page);this.averageRowHeight=(m>0&&l>0)?(m/l):0},calcLastPageHeight:function(){if(!this.pageCount){return 0}var i=this.pageCount-1;var h=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[i]=h;return h},updateContentHeight:function(h){this.height+=h;this.resize()},updatePageHeight:function(l,k){if(this.pageExists(l)){var m=this.getPageHeight(l);var j=(this.measurePage(l));if(j===undefined){j=m}this.pageHeights[l]=j;if(m!=j){this.updateContentHeight(j-m);var i=this.grid.attr("autoHeight");if((typeof i=="number"&&i>this.rowCount)||(i===true&&!k)){this.grid.sizeChange()}else{this.repositionPages(l)}}return j}return 0},rowHeightChanged:function(h){this.updatePageHeight(Math.floor(h/this.rowsPerPage),false)},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage())}},createPageNode:function(){var h=document.createElement("div");dojo.attr(h,"role","presentation");h.style.position="absolute";h.style[dojo._isBodyLtr()?"left":"right"]="0";return h},getPageHeight:function(h){var i=this.pageHeights[h];return(i!==undefined?i:this.defaultPageHeight)},pushPage:function(h){return this.stack.push(h)},popPage:function(){return this.stack.shift()},findPage:function(j){var k=0,l=0;for(var m=0;k<this.pageCount;k++,l+=m){m=this.getPageHeight(k);if(l+m>=j){break}}this.page=k;this.pageTop=l},buildPage:function(h,j,i){this.preparePage(h,j);this.positionPage(h,i);this.installPage(h);this.renderPage(h);this.pushPage(h)},needPage:function(l,k){var i=this.getPageHeight(l),j=i;if(!this.pageExists(l)){this.buildPage(l,this.keepPages&&(this.stack.length>=this.keepPages),k);i=this.updatePageHeight(l,true)}else{this.positionPage(l,k)}return i},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(j){this.grid.scrollTop=j;if(this.colCount){this.startPacify();this.findPage(j);var k=this.height;var i=this.getScrollBottom(j);for(var l=this.page,m=this.pageTop;(l<this.pageCount)&&((i<0)||(m<i));l++){m+=this.needPage(l,m)}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,j);this.lastVisibleRow=this.getLastVisibleRow(l-1,m,i);if(k!=this.height){this.repositionPages(l-1)}this.endPacify()}},getScrollBottom:function(h){return(this.windowHeight>=0?h+this.windowHeight:-1)},processNodeEvent:function(k,i){var h=k.target;while(h&&(h!=i)&&h.parentNode&&(h.parentNode.parentNode!=i)){h=h.parentNode}if(!h||!h.parentNode||(h.parentNode.parentNode!=i)){return false}var j=h.parentNode;k.topRowIndex=j.pageIndex*this.rowsPerPage;k.rowIndex=k.topRowIndex+d(h);k.rowTarget=h;return true},processEvent:function(h){return this.processNodeEvent(h,this.contentNode)},renderRow:function(h,i){},removeRow:function(h){},getDefaultPageNode:function(h){return this.getDefaultNodes()[h]},positionPageNode:function(i,h){},getPageNodePosition:function(h){return h.offsetTop},invalidatePageNode:function(j,i){var h=i[j];if(h){delete i[j];this.removePage(j,h);b(h);h.innerHTML=""}return h},getPageRow:function(h){return h*this.rowsPerPage},getLastPageRow:function(h){return Math.min(this.rowCount,this.getPageRow(h+1))-1},getFirstVisibleRow:function(o,n,m){if(!this.pageExists(o)){return 0}var q=this.getPageRow(o);var j=this.getDefaultNodes();var p=f(j[o]);for(var k=0,h=p.length;k<h&&n<m;k++,q++){n+=p[k].offsetHeight}return(q?q-1:q)},getLastVisibleRow:function(o,m,j){if(!this.pageExists(o)){return 0}var h=this.getDefaultNodes();var n=this.getLastPageRow(o);var l=f(h[o]);for(var k=l.length-1;k>=0&&m>j;k--,n--){m-=l[k].offsetHeight}return n+1},findTopRow:function(p){var q=this.getDefaultNodes();var o=f(q[this.page]);for(var m=0,j=o.length,k=this.pageTop,n;m<j;m++){n=o[m].offsetHeight;k+=n;if(k>=p){this.offset=n-(k-p);return m+this.page*this.rowsPerPage}}return-1},findScrollTop:function(m){var j=Math.floor(m/this.rowsPerPage);var o=0;var n,h;for(n=0;n<j;n++){o+=this.getPageHeight(n)}this.pageTop=o;this.needPage(j,this.pageTop);var k=this.getDefaultNodes();var q=f(k[j]);var p=m-this.rowsPerPage*j;for(n=0,h=q.length;n<h&&n<p;n++){o+=q[n].offsetHeight}return o},dummy:0})})()}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(dojo.hitch(this,function(a){if(this.domNode){this.domNode.innerHTML=a}}))}}});(function(){var d=function(g){try{dojox.grid.util.fire(g,"focus");dojox.grid.util.fire(g,"select")}catch(f){}};var b=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)};var a=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(f){this._props=f||{};dojo.mixin(this,f);if(this.draggable===undefined){this.draggable=true}},_defaultFormat:function(j,i){var h=this.grid.formatterScope||this;var k=this.formatter;if(k&&h&&typeof k=="string"){k=this.formatter=h[k]}var g=(j!=this.defaultValue&&k)?k.apply(h,i):j;if(typeof g=="undefined"){return this.defaultValue}if(g&&g.addBoth){g=new dojox.grid._DeferredTextWidget({deferred:g},dojo.create("span",{innerHTML:this.defaultValue}))}if(g&&g.declaredClass&&g.startup){return"<div class='dojoxGridStubNode' linkWidget='"+g.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>"}return g},format:function(g,j){var k,h=this.grid.edit.info,l=this.get?this.get(g,j):(this.value||this.defaultValue);l=(l&&l.replace&&this.grid.escapeHTMLInData)?l.replace(/&/g,"&amp;").replace(/</g,"&lt;"):l;if(this.editable&&(this.alwaysEditing||(h.rowIndex==g&&h.cell==this))){return this.formatEditing(l,g)}else{return this._defaultFormat(l,[l,g,this])}},formatEditing:function(g,f){},getNode:function(f){return this.view.getCellNode(f,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(f){return(this.getNode(f)||0).firstChild||0},canResize:function(){var f=this.unitWidth;return f&&(f!=="auto")},isFlex:function(){var f=this.unitWidth;return f&&dojo.isString(f)&&(f=="auto"||f.slice(-1)=="%")},applyEdit:function(g,f){this.grid.edit.applyCellEdit(g,this,f)},cancelEdit:function(f){this.grid.doCancelEdit(f)},_onEditBlur:function(f){if(this.grid.edit.isEditCell(f,this.index)){this.grid.edit.apply()}},registerOnBlur:function(g,f){if(this.commitOnBlur){dojo.connect(g,"onblur",function(h){setTimeout(dojo.hitch(this,"_onEditBlur",f),250)})}},needFormatNode:function(g,f){this._formatPending=true;b(this,"_formatNode",g,f)},cancelFormatNode:function(){this._formatPending=false},_formatNode:function(g,f){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(f),g,f)}},formatNode:function(g,h,f){if(dojo.isIE){b(this,"focus",f,g)}else{this.focus(f,g)}},dispatchEvent:function(f,g){if(f in this){return this[f](g)}},getValue:function(f){return this.getEditNode(f)[this._valueProp]},setValue:function(g,f){var h=this.getEditNode(g);if(h){h[this._valueProp]=f}},focus:function(g,f){d(f||this.getEditNode(g))},save:function(f){this.value=this.value||this.getValue(f)},restore:function(f){this.setValue(f,this.value)},_finish:function(f){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode()},apply:function(f){this.applyEdit(this.getValue(f),f);this._finish(f)},cancel:function(f){this.cancelEdit(f);this._finish(f)}});a._Base.markupFactory=function(k,j){var m=dojo;var i=m.trim(m.attr(k,"formatter")||"");if(i){j.formatter=dojo.getObject(i)||i}var h=m.trim(m.attr(k,"get")||"");if(h){j.get=dojo.getObject(h)}var g=function(o,n,q){var p=m.trim(m.attr(k,o)||"");if(p){n[q||o]=!(p.toLowerCase()=="false")}};g("sortDesc",j);g("editable",j);g("alwaysEditing",j);g("noresize",j);g("draggable",j);var l=m.trim(m.attr(k,"loadingText")||m.attr(k,"defaultValue")||"");if(l){j.defaultValue=l}var f=function(o,n,q){var p=m.trim(m.attr(k,o)||"")||undefined;if(p){n[q||o]=p}};f("styles",j);f("headerStyles",j);f("cellStyles",j);f("classes",j);f("headerClasses",j);f("cellClasses",j)};dojo.declare("dojox.grid.cells.Cell",a._Base,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(f,g){this.needFormatNode(f,g);return'<input class="dojoxGridInput" type="text" value="'+f+'">'},formatNode:function(h,g,f){this.inherited(arguments);this.registerOnBlur(h,f)},doKey:function(g){if(this.keyFilter){var f=String.fromCharCode(g.charCode);if(f.search(this.keyFilter)==-1){dojo.stopEvent(g)}}},_finish:function(f){this.inherited(arguments);var h=this.getEditNode(f);try{dojox.grid.util.fire(h,"blur")}catch(g){}}});a.Cell.markupFactory=function(g,i){a._Base.markupFactory(g,i);var h=dojo;var f=h.trim(h.attr(g,"keyFilter")||"");if(f){i.keyFilter=new RegExp(f)}};dojo.declare("dojox.grid.cells.RowIndex",a.Cell,{name:"Row",postscript:function(){this.editable=false},get:function(f){return f+1}});a.RowIndex.markupFactory=function(f,g){a.Cell.markupFactory(f,g)};dojo.declare("dojox.grid.cells.Select",a.Cell,{options:null,values:null,returnIndex:-1,constructor:function(f){this.values=this.values||this.options},formatEditing:function(m,k){this.needFormatNode(m,k);var j=['<select class="dojoxGridSelect">'];for(var g=0,l,f;((l=this.options[g])!==undefined)&&((f=this.values[g])!==undefined);g++){j.push("<option",(m==f?" selected":""),' value="'+f+'"',">",l,"</option>")}j.push("</select>");return j.join("")},getValue:function(f){var j=this.getEditNode(f);if(j){var g=j.selectedIndex,h=j.options[g];return this.returnIndex>-1?g:h.value||h.innerHTML}}});a.Select.markupFactory=function(i,f){a.Cell.markupFactory(i,f);var k=dojo;var g=k.trim(k.attr(i,"options")||"");if(g){var j=g.split(",");if(j[0]!=g){f.options=j}}var l=k.trim(k.attr(i,"values")||"");if(l){var h=l.split(",");if(h[0]!=l){f.values=h}}};dojo.declare("dojox.grid.cells.AlwaysEdit",a.Cell,{alwaysEditing:true,_formatNode:function(g,f){this.formatNode(this.getEditNode(f),g,f)},applyStaticValue:function(g){var f=this.grid.edit;f.applyCellEdit(this.getValue(g),this,g);f.start(this,g,true)}});a.AlwaysEdit.markupFactory=function(g,f){a.Cell.markupFactory(g,f)};dojo.declare("dojox.grid.cells.Bool",a.AlwaysEdit,{_valueProp:"checked",formatEditing:function(g,f){return'<input class="dojoxGridInput" type="checkbox"'+(g?' checked="checked"':"")+' style="width: auto" />'},doclick:function(f){if(f.target.tagName=="INPUT"){this.applyStaticValue(f.rowIndex)}}});a.Bool.markupFactory=function(g,f){a.AlwaysEdit.markupFactory(g,f)}})()}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells")}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var h=dojox.grid;var k=function(l){return l.cellIndex>=0?l.cellIndex:dojo.indexOf(l.parentNode.cells,l)};var j=function(l){return l.rowIndex>=0?l.rowIndex:dojo.indexOf(l.parentNode.childNodes,l)};var i=function(l,m){return l&&((l.rows||0)[m]||l.childNodes[m])};var f=function(l){for(var m=l;m&&m.tagName!="TABLE";m=m.parentNode){}return m};var d=function(m,l){for(var o=m;o&&l(o);o=o.parentNode){}return o};var g=function(m){var l=m.toUpperCase();return function(n){return n.tagName!=l}};var b=dojox.grid.util.rowIndexTag;var a=dojox.grid.util.gridViewTag;h._Builder=dojo.extend(function(l){if(l){this.view=l;this.grid=l.grid}},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var l=[this._table];if(this.view.viewWidth){l.push([' style="width:',this.view.viewWidth,';"'].join(""))}l.push(">");return l},generateCellMarkup:function(m,l,t,q){var p=[],n;if(q){var o=m.index!=m.grid.getSortIndex()?"":m.grid.sortInfo>0?'aria-sort="ascending"':'aria-sort="descending"';if(!m.id){m.id=this.grid.id+"Hdr"+m.index}n=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',o,'id="',m.id,'"']}else{var s=this.grid.editable&&!m.editable?'aria-readonly="true"':"";n=['<td tabIndex="-1" role="gridcell"',s]}if(m.colSpan){n.push(' colspan="',m.colSpan,'"')}if(m.rowSpan){n.push(' rowspan="',m.rowSpan,'"')}n.push(' class="dojoxGridCell ');if(m.classes){n.push(m.classes," ")}if(t){n.push(t," ")}p.push(n.join(""));p.push("");n=['" idx="',m.index,'" style="'];if(l&&l[l.length-1]!=";"){l+=";"}n.push(m.styles,l||"",m.hidden?"display:none;":"");if(m.unitWidth){n.push("width:",m.unitWidth,";")}p.push(n.join(""));p.push("");n=['"'];if(m.attrs){n.push(" ",m.attrs)}n.push(">");p.push(n.join(""));p.push("");p.push(q?"</th>":"</td>");return p},isCellNode:function(l){return Boolean(l&&l!=dojo.doc&&dojo.attr(l,"idx"))},getCellNodeIndex:function(l){return l?Number(dojo.attr(l,"idx")):-1},getCellNode:function(p,o){for(var n=0,q;(q=i(p.firstChild,n));n++){for(var m=0,l;(l=q.cells[m]);m++){if(this.getCellNodeIndex(l)==o){return l}}}return null},findCellTarget:function(m,l){var o=m;while(o&&(!this.isCellNode(o)||(o.offsetParent&&a in o.offsetParent.parentNode&&o.offsetParent.parentNode[a]!=this.view.id))&&(o!=l)){o=o.parentNode}return o!=l?o:null},baseDecorateEvent:function(l){l.dispatch="do"+l.type;l.grid=this.grid;l.sourceView=this.view;l.cellNode=this.findCellTarget(l.target,l.rowNode);l.cellIndex=this.getCellNodeIndex(l.cellNode);l.cell=(l.cellIndex>=0?this.grid.getCell(l.cellIndex):null)},findTarget:function(o,m){var l=o;while(l&&(l!=this.domNode)&&(!(m in l)||(a in l&&l[a]!=this.view.id))){l=l.parentNode}return(l!=this.domNode)?l:null},findRowTarget:function(l){return this.findTarget(l,b)},isIntraNodeEvent:function(m){try{return(m.cellNode&&m.relatedTarget&&dojo.isDescendant(m.relatedTarget,m.cellNode))}catch(l){return false}},isIntraRowEvent:function(m){try{var n=m.relatedTarget&&this.findRowTarget(m.relatedTarget);return!n&&(m.rowIndex==-1)||n&&(m.rowIndex==n.gridRowIndex)}catch(l){return false}},dispatchEvent:function(l){if(l.dispatch in this){return this[l.dispatch](l)}return false},domouseover:function(l){if(l.cellNode&&(l.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=l.cellNode;this.grid.onMouseOver(l)}this.grid.onMouseOverRow(l)},domouseout:function(l){if(l.cellNode&&(l.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(l,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(l);if(!this.isIntraRowEvent(l)){this.grid.onMouseOutRow(l)}}},domousedown:function(l){if(l.cellNode){this.grid.onMouseDown(l)}this.grid.onMouseDownRow(l)}});h._ContentBuilder=dojo.extend(function(l){h._Builder.call(this,l)},h._Builder.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){var p=this.grid.get,n=this.view.structure.cells;for(var m=0,q;(q=n[m]);m++){for(var o=0,l;(l=q[o]);o++){l.get=l.get||(l.value==undefined)&&p;l.markup=this.generateCellMarkup(l,l.cellStyles,l.cellClasses,false);if(!this.grid.editable&&l.editable){this.grid.editable=true}}}},generateHtml:function(q,u){var s=this.getTableArray(),x=this.view,z=x.structure.cells,y=this.grid.getItem(u);dojox.grid.util.fire(this.view,"onBeforeRow",[u,z]);for(var o=0,A;(A=z[o]);o++){if(A.hidden||A.header){continue}s.push(!A.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var p=0,w,n,l,t;(w=A[p]);p++){n=w.markup;l=w.customClasses=[];t=w.customStyles=[];n[5]=w.format(u,y);n[1]=l.join(" ");n[3]=t.join(";");s.push.apply(s,n)}s.push("</tr>")}s.push("</table>");return s.join("")},decorateEvent:function(l){l.rowNode=this.findRowTarget(l.target);if(!l.rowNode){return false}l.rowIndex=l.rowNode[b];this.baseDecorateEvent(l);l.cell=this.grid.getCell(l.cellIndex);return true}});h._HeaderBuilder=dojo.extend(function(l){this.moveable=null;h._Builder.call(this,l)},h._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells)}else{this.tableMap=new h._TableMap(this.view.structure.cells)}},generateHtml:function(m,l){var p=this.getTableArray(),t=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,t]);for(var n=0,u;(u=t[n]);n++){if(u.hidden){continue}p.push(!u.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var o=0,s,q;(s=u[o]);o++){s.customClasses=[];s.customStyles=[];if(this.view.simpleStructure){if(s.draggable){if(s.headerClasses){if(s.headerClasses.indexOf("dojoDndItem")==-1){s.headerClasses+=" dojoDndItem"}}else{s.headerClasses="dojoDndItem"}}if(s.attrs){if(s.attrs.indexOf("dndType='gridColumn_")==-1){s.attrs+=" dndType='gridColumn_"+this.grid.id+"'"}}else{s.attrs="dndType='gridColumn_"+this.grid.id+"'"}}q=this.generateCellMarkup(s,s.headerStyles,s.headerClasses,true);q[5]=(l!=undefined?l:m(s));q[3]=s.customStyles.join(";");q[1]=s.customClasses.join(" ");p.push(q.join(""))}p.push("</tr>")}p.push("</table>");return p.join("")},getCellX:function(o){var p,l;if(o.layerX!=undefined){l=o.layerX}else{l=o.x}if(dojo.isMoz||dojo.isOpera){p=d(o.target,g("th"));l-=(p&&p.offsetLeft)||0;var m=o.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()&&o.sourceView.headerNode.scrollLeft<m){l-=m}}p=d(o.target,function(){if(!p||p==o.cellNode){return false}l+=(p.offsetLeft<0?0:p.offsetLeft);return true});return l},decorateEvent:function(l){this.baseDecorateEvent(l);l.rowIndex=-1;l.cellX=this.getCellX(l);return true},prepareResize:function(n,m){do{var l=k(n.cellNode);n.cellNode=(l?n.cellNode.parentNode.cells[l+m]:null);n.cellIndex=(n.cellNode?this.getCellNodeIndex(n.cellNode):-1)}while(n.cellNode&&n.cellNode.style.display=="none");return Boolean(n.cellNode)},canResize:function(m){if(!this.grid.gridEditMode){if(!m.cellNode||m.cellNode.colSpan>1){return false}var l=this.grid.getCell(m.cellIndex);return!l.noresize&&l.canResize()}else{return true}},overLeftResizeArea:function(m){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false}if(dojo.isIE){var n=m.target;if(dojo.hasClass(n,"dojoxGridArrowButtonNode")||dojo.hasClass(n,"dojoxGridArrowButtonChar")){return false}}if(dojo._isBodyLtr()){return(m.cellIndex>0)&&(m.cellX<this.overResizeWidth)&&this.prepareResize(m,-1)}var l=m.cellNode&&(m.cellX<this.overResizeWidth);return l},overRightResizeArea:function(l){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false}if(dojo.isIE){var m=l.target;if(dojo.hasClass(m,"dojoxGridArrowButtonNode")||dojo.hasClass(m,"dojoxGridArrowButtonChar")){return false}}if(dojo._isBodyLtr()){return l.cellNode&&(l.cellX>=l.cellNode.offsetWidth-this.overResizeWidth)}return(l.cellIndex>0)&&(l.cellX>=l.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(l,-1)},domousemove:function(m){if(!this.moveable&&m.target.id!="gridHdrImg"&&m.target.id!="gridConfigImg"){var n=(this.overRightResizeArea(m)?"dojoxGridColResize":(this.overLeftResizeArea(m)?"dojoxGridColResize":""));if(n&&!this.canResize(m)){n="dojoxGridColNoResize"}dojo.toggleClass(m.sourceView.headerNode,"dojoxGridColNoResize",(n=="dojoxGridColNoResize"));dojo.toggleClass(m.sourceView.headerNode,"dojoxGridColResize",(n=="dojoxGridColResize"));if(dojo.isIE){var l=m.sourceView.headerNode.scrollLeft;m.sourceView.headerNode.scrollLeft=l}if(n){dojo.stopEvent(m)}}},domousedown:function(l){if(!this.moveable&&l.target.id!="gridHdrImg"&&l.target.id!="gridConfigImg"){if((this.overRightResizeArea(l)||this.overLeftResizeArea(l))&&this.canResize(l)){this.beginColumnResize(l)}else{this.grid.onMouseDown(l);this.grid.onMouseOverRow(l)}}else{if(l.target.id=="gridHdrImg"){l.grid.hideColumn(l)}else{if(l.target.id=="gridConfigImg"){l.grid.switchToEditMode()}}}},doclick:function(l){if(this._skipBogusClicks){dojo.stopEvent(l);return true}return false},colResizeSetup:function(s,C){var A=dojo.contentBox(s.sourceView.headerNode);if(C){this.lineDiv=document.createElement("div");var v=(dojo.position||dojo._abs)(s.sourceView.headerNode,true);var x=dojo.contentBox(s.sourceView.domNode);dojo.style(this.lineDiv,{top:v.y+"px",left:s.clientX+"px",height:(x.h+A.h)+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=s.clientX;dojo.body().appendChild(this.lineDiv)}var l=[],m=this.tableMap.findOverlappingNodes(s.cellNode);for(var o=0,y;(y=m[o]);o++){l.push({node:y,index:this.getCellNodeIndex(y),width:y.offsetWidth})}var u=s.sourceView;var t=dojo._isBodyLtr()?1:-1;var z=s.grid.views.views;var w=[];for(var n=u.idx+t,q;(q=z[n]);n=n+t){w.push({node:q.headerNode,left:window.parseInt(q.headerNode.style.left)})}var B=u.headerContentNode.firstChild;var p={scrollLeft:s.sourceView.headerNode.scrollLeft,view:u,node:s.cellNode,index:s.cellIndex,w:dojo.contentBox(s.cellNode).w,vw:A.w,table:B,tw:dojo.contentBox(B).w,spanners:l,followers:w,grid:s.grid};return p},beginColumnResize:function(o){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var l=(this.moveable=new dojo.dnd.Moveable(this.moverDiv));var n=this.colResizeSetup(o,true);l.onMove=dojo.hitch(this,"doResizeColumn",n);dojo.connect(l,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(n);if(n.node.releaseCapture){n.node.releaseCapture()}this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));if(o.cellNode.setCapture){o.cellNode.setCapture()}l.onMouseDown(o)},doResizeColumn:function(p,m,l){var q=l.l;var n={deltaX:q,w:p.w+q,vw:p.vw+q,tw:p.tw+q};this.dragRecord={inDrag:p,mover:m,leftTop:l};this.minColWidth=p.node.firstChild.firstChild.offsetWidth+8;var o=p.tw+n.deltaX;if(n.w>=this.minColWidth&&o<p.grid.maxWidth){if(!m){this.doResizeNow(p,n)}else{dojo.style(this.lineDiv,"left",(this.lineDiv._origLeft+n.deltaX)+"px")}}},endResizeColumn:function(o){if(this.dragRecord){var p=this.dragRecord.leftTop;var n=dojo._isBodyLtr()?p.l:-p.l;n+=Math.max(o.w+n,this.minColWidth)-(o.w+n);if(dojo.isWebKit&&o.spanners.length){n+=dojo._getPadBorderExtents(o.spanners[0].node).w}var m={deltaX:n,w:o.w+n,vw:o.vw+n,tw:o.tw+n};var l=o.tw+m.deltaX;if(l<=o.grid.maxWidth){this.doResizeNow(o,m)}}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;o.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(o.index)},doResizeNow:function(o,v){o.view.convertColPctToFixed();if(o.view.flexCells&&!o.view.testFlexCells()){var n=f(o.node);if(n){(n.style.width="")}}var m,p,l,u,q;for(m=0;(p=o.spanners[m]);m++){l=p.width+v.deltaX;p.node.style.width=l+"px";o.view.setColWidth(p.index,l)}for(m=0;(u=o.followers[m]);m++){q=u.left+v.deltaX;u.node.style.left=q+"px"}o.node.style.width=v.w+"px";o.view.setColWidth(o.index,v.w);o.view.headerNode.style.width=v.vw+"px";o.view.setColumnsWidth(v.tw);if(!dojo._isBodyLtr()){o.view.headerNode.scrollLeft=o.scrollLeft+v.deltaX}}});h._TableMap=dojo.extend(function(l){this.mapRows(l)},{map:null,mapRows:function(m){var l=m.length;if(!l){return}this.map=[];var A;for(var n=0;(A=m[n]);n++){this.map[n]=[]}for(var o=0;(A=m[o]);o++){for(var p=0,t=0,u,w,v;(u=A[p]);p++){while(this.map[o][t]){t++}this.map[o][t]={c:p,r:o};v=u.rowSpan||1;w=u.colSpan||1;for(var q=0;q<v;q++){for(var z=0;z<w;z++){this.map[o+q][t+z]=this.map[o][t]}}t+=w}}},dumpMap:function(){for(var m=0,p,o="";(p=this.map[m]);m++,o=""){for(var n=0,l;(l=p[n]);n++){o+=l.r+","+l.c+"   "}}},getMapCoords:function(p,m){for(var n=0,q;(q=this.map[n]);n++){for(var o=0,l;(l=q[o]);o++){if(l.c==m&&l.r==p){return{j:n,i:o}}}}return{j:-1,i:-1}},getNode:function(n,m,l){var o=n&&n.rows[m];return o&&o.cells[l]},_findOverlappingNodes:function(v,q,u){var l=[];var s=this.getMapCoords(q,u);for(var t=0,w;(w=this.map[t]);t++){if(t==s.j){continue}var o=w[s.i];var p=(o?this.getNode(v,o.r,o.c):null);if(p){l.push(p)}}return l},findOverlappingNodes:function(l){return this._findOverlappingNodes(f(l),j(l.parentNode),k(l))}})})()}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(a,b){this.node=dojo.byId(a);if(!b){b={}}this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&dojo.byId(b.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(b&&b._skipStartup)){this.startup()}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(d,h){h=h||dojo.global;var a=this.map,g=dojo.dnd._empty;for(var b in a){if(b in g){continue}d.call(h,a[b],b,this)}return h},clearItems:function(){this.map={}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(f){if(f.id){var d=this.getItem(f.id);if(d){a[f.id]=d;return}}else{f.id=dojo.dnd.getUniqueId()}var b=f.getAttribute("dndType"),g=f.getAttribute("dndData");a[f.id]={data:g||f.innerHTML,type:b?b.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(d,g,f){if(!this.parent.firstChild){f=null}else{if(g){if(!f){f=this.parent.firstChild}}else{if(f){f=f.nextSibling}}}if(f){for(var b=0;b<d.length;++b){var a=this._normalizedCreator(d[b]);this.setItem(a.node.id,{data:a.data,type:a.type});this.parent.insertBefore(a.node,f)}}else{for(var b=0;b<d.length;++b){var a=this._normalizedCreator(d[b]);this.setItem(a.node.id,{data:a.data,type:a.type});this.parent.appendChild(a.node)}}return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Container(b,a)},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length){this.parent=a[0]}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(b){var d=b.relatedTarget;while(d){if(d==this.node){break}try{d=d.parentNode}catch(a){d=null}}if(!d){this._changeState("Container","Over");this.onOverEvent()}d=this._getChildByEvent(b);if(this.current==d){return}if(this.current){this._removeItemClass(this.current,"Over")}if(d){this._addItemClass(d,"Over")}this.current=d},onMouseOut:function(b){for(var d=b.relatedTarget;d;){if(d==this.node){return}try{d=d.parentNode}catch(a){d=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(d,b){var a="dojoDnd"+d;var f=d.toLowerCase()+"State";dojo.removeClass(this.node,a+this[f]);dojo.addClass(this.node,a+b);this[f]=b},_addItemClass:function(b,a){dojo.addClass(b,"dojoDndItem"+a)},_removeItemClass:function(b,a){dojo.removeClass(b,"dojoDndItem"+a)},_getChildByEvent:function(d){var b=d.target;if(b){for(var a=b.parentNode;a;b=a,a=b.parentNode){if(a==this.parent&&dojo.hasClass(b,"dojoDndItem")){return b}}}return null},_normalizedCreator:function(b,d){var a=(this.creator||this.defaultCreator).call(this,b,d);if(!dojo.isArray(a.type)){a.type=["text"]}if(!a.node.id){a.node.id=dojo.dnd.getUniqueId()}dojo.addClass(a.node,"dojoDndItem");return a}});dojo.dnd._createNode=function(a){if(!a){return dojo.dnd._createSpan}return function(b){return dojo.create(a,{innerHTML:b})}};dojo.dnd._createTrTd=function(b){var a=dojo.create("tr");dojo.create("td",{innerHTML:b},a);return a};dojo.dnd._createSpan=function(a){return dojo.create("span",{innerHTML:a})};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(b){var a=b.tagName.toLowerCase();var d=a=="tbody"||a=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[a]);return function(h,j){var f=h&&dojo.isObject(h),i,g,k;if(f&&h.tagName&&h.nodeType&&h.getAttribute){i=h.getAttribute("dndData")||h.innerHTML;g=h.getAttribute("dndType");g=g?g.split(/\s*,\s*/):["text"];k=h}else{i=(f&&h.data)?h.data:h;g=(f&&h.type)?h.type:["text"];k=(j=="avatar"?dojo.dnd._createSpan:d)(String(i))}k.id=dojo.dnd.getUniqueId();return{node:k,data:i,type:g}}}}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(a,b){if(!b){b={}}this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:false,getSelectedNodes:function(){var b=new dojo.NodeList();var d=dojo.dnd._empty;for(var a in this.selection){if(a in d){continue}b.push(dojo.byId(a))}return b},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(dojo.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var b=dojo.dnd._empty;for(var a in this.selection){if(a in b){continue}var d=dojo.byId(a);this.delItem(a);dojo.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(d,h){h=h||dojo.global;var b=this.selection,g=dojo.dnd._empty;for(var a in b){if(a in g){continue}d.call(h,this.getItem(a),a,this)}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null}}var b=[],d=dojo.dnd._empty;for(var a in this.selection){if(a in d){continue}if(!this.getItem(a)){b.push(a)}}dojo.forEach(b,function(f){delete this.selection[f]},this);return this},insertNodes:function(g,b,f,d){var a=this._normalizedCreator;this._normalizedCreator=function(i,j){var h=a.call(this,i,j);if(g){if(!this.anchor){this.anchor=h.node;this._removeItemClass(h.node,"Selected");this._addItemClass(this.anchor,"Anchor")}else{if(this.anchor!=h.node){this._removeItemClass(h.node,"Anchor");this._addItemClass(h.node,"Selected")}}this.selection[h.node.id]=1}else{this._removeItemClass(h.node,"Selected");this._removeItemClass(h.node,"Anchor")}return h};dojo.dnd.Selector.superclass.insertNodes.call(this,b,f,d);this._normalizedCreator=a;return this},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Selector(b,a)},onMouseDown:function(d){if(this.autoSync){this.sync()}if(!this.current){return}if(!this.singular&&!dojo.dnd.getCopyKeyState(d)&&!d.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(d.button===dojo.dnd._lmb){dojo.stopEvent(d)}return}if(!this.singular&&d.shiftKey){if(!dojo.dnd.getCopyKeyState(d)){this._removeSelection()}var f=this.getAllNodes();if(f.length){if(!this.anchor){this.anchor=f[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var a=0;for(;a<f.length;++a){var b=f[a];if(b==this.anchor||b==this.current){break}}for(++a;a<f.length;++a){var b=f[a];if(b==this.anchor||b==this.current){break}this._addItemClass(b,"Selected");this.selection[b.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.dnd.getCopyKeyState(d)){this.selectNone()}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}}else{if(dojo.dnd.getCopyKeyState(d)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}}}}dojo.stopEvent(d)},onMouseUp:function(a){if(!this.simpleSelection){return}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}},onMouseMove:function(a){this.simpleSelection=false},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent},_removeSelection:function(){var d=dojo.dnd._empty;for(var a in this.selection){if(a in d){continue}var b=dojo.byId(a);if(b){this._removeItemClass(b,"Selected")}}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}})}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var o=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),n=dojo.create("tbody",null,o),m=dojo.create("tr",null,n),f=dojo.create("td",{innerHTML:this._generateText()},m),g=Math.min(5,this.manager.nodes.length),l=0,h=this.manager.source,d;dojo.attr(m,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;l<g;++l){if(h.creator){d=h._normalizedCreator(h.getItem(this.manager.nodes[l].id).data,"avatar").node}else{d=this.manager.nodes[l].cloneNode(true);if(d.tagName.toLowerCase()=="tr"){var p=dojo.create("table"),j=dojo.create("tbody",null,p);j.appendChild(d);d=p}}d.id="";m=dojo.create("tr",null,n);f=dojo.create("td",null,m);f.appendChild(d);dojo.attr(m,{"class":"dojoDndAvatarItem",style:{opacity:(9-l)/10}})}this.node=o},destroy:function(){dojo.destroy(this.node);this.node=false},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");dojo.query("tr.dojoDndAvatarHeader td",this.node).forEach(function(a){a.innerHTML=this._generateText()},this)},_generateText:function(){return this.manager.nodes.length.toString()}})}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]},OFFSET_X:16,OFFSET_Y:16,overSource:function(a){if(this.avatar){this.target=(a&&a.targetState!="Disabled")?a:null;this.canDropFlag=Boolean(this.target);this.avatar.update()}dojo.publish("/dnd/source/over",[a])},outSource:function(a){if(this.avatar){if(this.target==a){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null])}}else{dojo.publish("/dnd/source/over",[null])}},startDrag:function(a,b,f){this.source=a;this.nodes=b;this.copy=Boolean(f);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[a,b,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var d="dojoDnd"+(f?"Copy":"Move");dojo.addClass(dojo.body(),d)},canDrop:function(a){var b=Boolean(this.target&&a);if(this.canDropFlag!=b){this.canDropFlag=b;this.avatar.update()}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(f){var b=this.avatar;if(b){dojo.dnd.autoScrollNodes(f);var d=b.node.style;d.left=(f.pageX+this.OFFSET_X)+"px";d.top=(f.pageY+this.OFFSET_Y)+"px";var g=Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(f)));if(this.copy!=g){this._setCopyStatus(g)}}},onMouseUp:function(b){if(this.avatar){if(this.target&&this.canDropFlag){var d=Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(b))),a=[this.source,this.nodes,d,this.target];dojo.publish("/dnd/drop/before",a);dojo.publish("/dnd/drop",a)}else{dojo.publish("/dnd/cancel")}this.stopDrag()}},onKeyDown:function(a){if(this.avatar){switch(a.keyCode){case dojo.keys.CTRL:var b=Boolean(this.source.copyState(true));if(this.copy!=b){this._setCopyStatus(b)}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break}}},onKeyUp:function(a){if(this.avatar&&a.keyCode==dojo.keys.CTRL){var b=Boolean(this.source.copyState(false));if(this.copy!=b){this._setCopyStatus(b)}}},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"))}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager()}return dojo.dnd._manager}}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],constructor:function(f,a){dojo.mixin(this,dojo.mixin({},a));var d=this.accept;if(d.length){this.accept={};for(var b=0;b<d.length;++b){this.accept[d[b]]=1}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource")}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget")}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal")}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")]},checkAcceptance:function(h,b){if(this==h){return!this.copyOnly||this.selfAccept}for(var f=0;f<b.length;++f){var g=h.getItem(b[f].id).type;var a=false;for(var d=0;d<g.length;++d){if(g[d]in this.accept){a=true;break}}if(!a){return false}}return true},copyState:function(b,a){if(b){return true}if(arguments.length<2){a=this==dojo.dnd.manager().target}if(a){if(this.copyOnly){return this.selfCopy}}else{return this.copyOnly}return false},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.Source(a,b)},onMouseMove:function(f){if(this.isDragging&&this.targetState=="Disabled"){return}dojo.dnd.Source.superclass.onMouseMove.call(this,f);var a=dojo.dnd.manager();if(this.isDragging){var d=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox={xy:dojo.coords(this.current,true),w:this.current.offsetWidth,h:this.current.offsetHeight}}if(this.horizontal){d=(f.pageX-this.targetBox.xy.x)<(this.targetBox.w/2)}else{d=(f.pageY-this.targetBox.xy.y)<(this.targetBox.h/2)}}if(this.current!=this.targetAnchor||d!=this.before){this._markTargetAnchor(d);a.canDrop(!this.current||a.source!=this||!(this.current.id in this.selection))}}else{if(this.mouseDown&&this.isSource&&(Math.abs(f.pageX-this._lastX)>this.delay||Math.abs(f.pageY-this._lastY)>this.delay)){var b=this.getSelectedNodes();if(b.length){a.startDrag(this,b,this.copyState(dojo.dnd.getCopyKeyState(f),true))}}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!dojo.dnd.isFormElement(a))){this.mouseDown=true;this._lastX=a.pageX;this._lastY=a.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,a)}},onMouseUp:function(a){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,a)}},onDndSourceOver:function(b){if(this!=b){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor()}}else{if(this.isDragging){var a=dojo.dnd.manager();a.canDrop(this.targetState!="Disabled"&&(!this.current||a.source!=this||!(this.current.id in this.selection)))}}},onDndStart:function(f,b,d){if(this.autoSync){this.sync()}if(this.isSource){this._changeState("Source",this==f?(d?"Copied":"Moved"):"")}var a=this.accept&&this.checkAcceptance(f,b);this._changeState("Target",a?"":"Disabled");if(this==f){dojo.dnd.manager().overSource(this)}this.isDragging=true},onDndDrop:function(a,b,f,d){if(this==d){this.onDrop(a,b,f)}this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","")},onDrop:function(b,a,d){if(this!=b){this.onDropExternal(b,a,d)}else{this.onDropInternal(a,d)}},onDropExternal:function(d,a,f){var b=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(g,h){return b.call(this,d.getItem(g.id).data,h)}}else{if(f){this._normalizedCreator=function(h,i){var g=d.getItem(h.id);var j=h.cloneNode(true);j.id=dojo.dnd.getUniqueId();return{node:j,data:g.data,type:g.type}}}else{this._normalizedCreator=function(h,i){var g=d.getItem(h.id);d.delItem(h.id);return{node:h,data:g.data,type:g.type}}}}this.selectNone();if(!f&&!this.creator){d.selectNone()}this.insertNodes(true,a,this.before,this.current);if(!f&&this.creator){d.deleteSelectedNodes()}this._normalizedCreator=b},onDropInternal:function(a,d){var b=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return}if(d){if(this.creator){this._normalizedCreator=function(f,g){return b.call(this,this.getItem(f.id).data,g)}}else{this._normalizedCreator=function(g,h){var f=this.getItem(g.id);var i=g.cloneNode(true);i.id=dojo.dnd.getUniqueId();return{node:i,data:f.data,type:f.type}}}}else{if(!this.current){return}this._normalizedCreator=function(g,h){var f=this.getItem(g.id);return{node:g,data:f.data,type:f.type}}}this._removeSelection();this.insertNodes(true,a,this.before,this.current);this._normalizedCreator=b},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver()}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut()}},_markTargetAnchor:function(a){if(this.current==this.targetAnchor&&this.before==a){return}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After")}this.targetAnchor=this.current;this.targetBox=null;this.before=a;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After")}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(b){if(!dojo.dnd._isLmbPressed(b)){return false}if(!this.withHandles){return true}for(var a=b.target;a&&a!==this.node;a=a.parentNode){if(dojo.hasClass(a,"dojoDndHandle")){return true}if(dojo.hasClass(a,"dojoDndItem")){break}}return false}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(b,a){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource")},markupFactory:function(a,b){a._skipStartup=true;return new dojo.dnd.Target(b,a)}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(a,b){this.autoSync=true},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.AutoSource(a,b)}})}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var a=function(f,d){return f.style.cssText==undefined?f.getAttribute("style"):f.style.cssText};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGridView" wairole="presentation">\r\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" wairole="presentation">\r\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" wairole="presentation">\r\n\t\t\t<div dojoAttachPoint="headerContentNode" wairole="row"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" wairole="presentation" />\r\n\t<input type="checkbox" class="dojoxGridHiddenFocus" wairole="presentation" />\r\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" wairole="presentation">\r\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" wairole="presentation"></div>\r\n\t</div>\r\n</div>\r\n',themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width=""}},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var d in this.rowNodes){dojo.destroy(this.rowNodes[d])}this.rowNodes={};if(this.source){this.source.destroy()}this.inherited(arguments)},focus:function(){if(dojo.isIE||dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus()}else{this.scrollboxNode.focus()}},setStructure:function(d){var f=(this.structure=d);if(f.width&&!isNaN(f.width)){this.viewWidth=f.width+"em"}else{this.viewWidth=f.width||(f.noscroll?"auto":this.viewWidth)}this._onBeforeRow=f.onBeforeRow||function(){};this._onAfterRow=f.onAfterRow||function(){};this.noscroll=f.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden"}this.simpleStructure=Boolean(f.cells.length==1);this.testFlexCells();this.updateStructure()},_cleanupRowWidgets:function(d){if(d){dojo.forEach(dojo.query("[widgetId]",d).map(dijit.byNode),function(f){if(f._destroyOnRemove){f.destroy();delete f}else{if(f.domNode&&f.domNode.parentNode){f.domNode.parentNode.removeChild(f.domNode)}}})}},onBeforeRow:function(f,d){this._onBeforeRow(f,d);if(f>=0){this._cleanupRowWidgets(this.getRowNode(f))}},onAfterRow:function(h,f,d){this._onAfterRow(h,f,d);var i=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",d),function(m){if(m&&m.parentNode){var l=m.getAttribute("linkWidget");var k=window.parseInt(dojo.attr(m,"cellIdx"),10);var j=i.getCell(k);var g=dijit.byId(l);if(g){m.parentNode.replaceChild(g.domNode,m);if(!g._started){g.startup()}}else{m.innerHTML=""}}},this)},testFlexCells:function(){this.flexCells=false;for(var f=0,h;(h=this.structure.cells[f]);f++){for(var g=0,d;(d=h[g]);g++){d.view=this;this.flexCells=this.flexCells||d.isFlex()}}return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var f=this.hasVScrollbar();var d=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!d||d=="hidden"){f=false}else{if(d=="scroll"){f=true}}return(f?dojox.html.metrics.getScrollbar().w:0)},getColumnsWidth:function(){var d=this.headerContentNode;return d&&d.firstChild?d.firstChild.offsetWidth:0},setColumnsWidth:function(d){this.headerContentNode.firstChild.style.width=d+"px";if(this.viewWidth){this.viewWidth=d+"px"}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1}var h=this.grid.layout.cells;var g=dojo.hitch(this,function(m,l){var n=l?-1:1;var k=this.header.getCellNodeIndex(m)+n;var j=h[k];while(j&&j.getHeaderNode()&&j.getHeaderNode().style.display=="none"){k+=n;j=h[k]}if(j){return j.getHeaderNode()}return null});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy()}var i="dojoxGrid_bottomMarker";var f="dojoxGrid_topMarker";if(this.bottomMarker){dojo.destroy(this.bottomMarker)}this.bottomMarker=dojo.byId(i);if(this.topMarker){dojo.destroy(this.topMarker)}this.topMarker=dojo.byId(f);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{id:i,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{id:f,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker)}this.arrowDim=dojo.contentBox(this.bottomMarker);var d=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(j){this.header.decorateEvent(j);if((this.header.overRightResizeArea(j)||this.header.overLeftResizeArea(j))&&this.header.canResize(j)&&!this.header.moveable){this.header.beginColumnResize(j)}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true)}if(j.button===(dojo.isIE?1:0)){dojo.dnd.Source.prototype.onMouseDown.call(this.source,j)}}}),onMouseOver:dojo.hitch(this,function(j){var k=this.source;if(k._getChildByEvent(j)){dojo.dnd.Source.prototype.onMouseOver.apply(k,arguments)}}),_markTargetAnchor:dojo.hitch(this,function(l){var n=this.source;if(n.current==n.targetAnchor&&n.before==l){return}if(n.targetAnchor&&g(n.targetAnchor,n.before)){n._removeItemClass(g(n.targetAnchor,n.before),n.before?"After":"Before")}dojo.dnd.Source.prototype._markTargetAnchor.call(n,l);var k=l?n.targetAnchor:g(n.targetAnchor,n.before);var j=0;if(!k){k=n.targetAnchor;j=dojo.contentBox(k).w+this.arrowDim.w/2+2}var o=(dojo.position||dojo._abs)(k,true);var m=Math.floor(o.x-this.arrowDim.w/2+j);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{left:m+"px",top:(d+o.y)+"px"});dojo.style(this.topMarker,{left:m+"px",top:(o.y-this.arrowDim.h)+"px"});if(n.targetAnchor&&g(n.targetAnchor,n.before)){n._addItemClass(g(n.targetAnchor,n.before),n.before?"After":"Before")}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var j=this.source;if(!j.targetAnchor){return}if(j.targetAnchor&&g(j.targetAnchor,j.before)){j._removeItemClass(g(j.targetAnchor,j.before),j.before?"After":"Before")}this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(j)}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(d){dojo.style(d,{left:"-10000px",top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(g,i,j){if(dojo.dnd.manager().target!==this.source){return}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var f=this.grid.views.views;var h=f[g.viewIndex];var d=f[this.index];if(d!=h){h.convertColPctToFixed();d.convertColPctToFixed()}},_onDndDrop:function(j,g,f){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source){this._removingColumn=true}return}this._hide(this.bottomMarker);this._hide(this.topMarker);var d=function(q){return q?dojo.attr(q,"idx"):null};var l=dojo.marginBox(g[0]).w;if(j.viewIndex!==this.index){var p=this.grid.views.views;var o=p[j.viewIndex];var m=p[this.index];if(o.viewWidth&&o.viewWidth!="auto"){o.setColumnsWidth(o.getColumnsWidth()-l)}if(m.viewWidth&&m.viewWidth!="auto"){m.setColumnsWidth(m.getColumnsWidth())}}var n=this.source._targetNode;var h=this.source._beforeTarget;var i=this.grid.layout;var k=this.index;delete this.source._targetNode;delete this.source._beforeTarget;i.moveColumn(j.viewIndex,k,d(g[0]),d(n),h)},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(d){var g=d.name||d.grid.getCellName(d);var f=['<div class="dojoxGridSortNode'];if(d.index!=d.grid.getSortIndex()){f.push('"><span>')}else{f=f.concat([" ",d.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',d.grid.sortInfo>0?"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div></span>'])}f=f.concat([g,"</span></div>"]);return f.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(f){var g=this._hasHScroll||false;if(this._hasHScroll==undefined||f){if(this.noscroll){this._hasHScroll=false}else{var d=dojo.style(this.scrollboxNode,"overflow");if(d=="hidden"){this._hasHScroll=false}else{if(d=="scroll"){this._hasHScroll=true}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth)}}}}if(g!==this._hasHScroll){this.grid.update()}return this._hasHScroll},hasVScrollbar:function(f){var g=this._hasVScroll||false;if(this._hasVScroll==undefined||f){if(this.noscroll){this._hasVScroll=false}else{var d=dojo.style(this.scrollboxNode,"overflow");if(d=="hidden"){this._hasVScroll=false}else{if(d=="scroll"){this._hasVScroll=true}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight)}}}}if(g!==this._hasVScroll){this.grid.update()}return this._hasVScroll},convertColPctToFixed:function(){var g=false;this.grid.initialWidth="";var f=dojo.query("th",this.headerContentNode);var d=dojo.map(f,function(j,i){var h=j.style.width;dojo.attr(j,"vIdx",i);if(h&&h.slice(-1)=="%"){g=true}else{if(h&&h.slice(-2)=="px"){return window.parseInt(h,10)}}return dojo.contentBox(j).w});if(g){dojo.forEach(this.grid.layout.cells,function(i,h){if(i.view==this){var j=i.view.getHeaderCellNode(i.index);if(j&&dojo.hasAttr(j,"vIdx")){var k=window.parseInt(dojo.attr(j,"vIdx"));this.setColWidth(h,d[k]);dojo.removeAttr(j,"vIdx")}}},this);return true}return false},adaptHeight:function(d){if(!this.grid._autoHeight){var g=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var f=this;var i=function(){var h;for(var j in f.grid.views.views){h=f.grid.views.views[j];if(h!==f&&h.hasHScrollbar()){return true}}return false};if(d||(this.noscroll&&i())){g-=dojox.html.metrics.getScrollbar().h}dojox.grid.util.setStyleHeightPx(this.scrollboxNode,g)}this.hasVScrollbar(true)},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}var d=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){d=Math.max(d,this.getColumnsWidth())+"px"}else{d=Math.min(d,this.getColumnsWidth())+"px";this._removingColumn=false}var f=this.contentNode;f.style.width=d;this.hasHScrollbar(true)},setSize:function(d,g){var i=this.domNode.style;var f=this.headerNode.style;if(d){i.width=d;f.width=d}i.height=(g>=0?g+"px":"")},renderRow:function(d){var f=this.createRowNode(d);this.buildRow(d,f);this.grid.edit.restore(this,d);return f},createRowNode:function(d){var f=document.createElement("div");f.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){dojo.attr(f,"role","presentation")}else{dojo.attr(f,"role","row");if(this.grid.selectionMode!="none"){dojo.attr(f,"aria-selected","false")}}f[dojox.grid.util.gridViewTag]=this.id;f[dojox.grid.util.rowIndexTag]=d;this.rowNodes[d]=f;return f},buildRow:function(f,d){this.buildRowContent(f,d);this.styleRow(f,d)},buildRowContent:function(d,f){f.innerHTML=this.content.generateHtml(d,d);if(this.flexCells&&this.contentWidth){f.firstChild.style.width=this.contentWidth}dojox.grid.util.fire(this,"onAfterRow",[d,this.structure.cells,f])},rowRemoved:function(d){if(d>=0){this._cleanupRowWidgets(this.getRowNode(d))}this.grid.edit.save(this,d);delete this.rowNodes[d]},getRowNode:function(d){return this.rowNodes[d]},getCellNode:function(g,d){var f=this.getRowNode(g);if(f){return this.content.getCellNode(f,d)}},getHeaderCellNode:function(d){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,d)}},styleRow:function(f,d){d._style=a(d);this.styleRowNode(f,d)},styleRowNode:function(d,f){if(f){this.doStyleRowNode(d,f)}},doStyleRowNode:function(f,d){this.grid.styleRowNode(f,d)},updateRow:function(f){var d=this.getRowNode(f);if(d){d.style.height="";this.buildRow(f,d)}return d},updateRowStyles:function(d){this.styleRowNode(d,this.getRowNode(d))},lastTop:0,firstScroll:0,doscroll:function(d){var h=dojo._isBodyLtr();if(this.firstScroll<2){if((!h&&this.firstScroll==1)||(h&&this.firstScroll===0)){var f=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=f.w+this.getScrollbarWidth()+"px"}else{if(dojo.isMoz){this.headerNodeContainer.style.width=f.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=h?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var g=this.scrollboxNode.scrollTop;if(g!==this.lastTop){this.grid.scrollTo(g)}},setScrollTop:function(d){this.lastTop=d;this.scrollboxNode.scrollTop=d;return this.scrollboxNode.scrollTop},doContentEvent:function(d){if(this.content.decorateEvent(d)){this.grid.onContentEvent(d)}},doHeaderEvent:function(d){if(this.header.decorateEvent(d)){this.grid.onHeaderEvent(d)}},dispatchContentEvent:function(d){return this.content.dispatchEvent(d)},dispatchHeaderEvent:function(d){return this.header.dispatchEvent(d)},setColWidth:function(d,f){this.grid.setCellWidth(d,f+"px")},update:function(){if(!this.domNode){return}this.content.update();this.grid.update();var d=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=d;this.headerNode.scrollLeft=d}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var p=dojo.doc;var o=p.createElement("table");o.cellPadding=o.cellSpacing="0";o.className="dojoxGridDndAvatar";o.style.position="absolute";o.style.zIndex=1999;o.style.margin="0px";var n=p.createElement("tbody");var l=p.createElement("tr");var i=p.createElement("td");var k=p.createElement("td");l.className="dojoxGridDndAvatarItem";k.className="dojoxGridDndAvatarItemImage";k.style.width="16px";var f=this.manager.source,h;if(f.creator){h=f._normalizedCreator(f.getItem(this.manager.nodes[0].id).data,"avatar").node}else{h=this.manager.nodes[0].cloneNode(true);var q,j;if(h.tagName.toLowerCase()=="tr"){q=p.createElement("table");j=p.createElement("tbody");j.appendChild(h);q.appendChild(j);h=q}else{if(h.tagName.toLowerCase()=="th"){q=p.createElement("table");j=p.createElement("tbody");var d=p.createElement("tr");q.cellPadding=q.cellSpacing="0";d.appendChild(h);j.appendChild(d);q.appendChild(j);h=q}}}h.id="";i.appendChild(h);l.appendChild(k);l.appendChild(i);dojo.style(l,"opacity",0.9);n.appendChild(l);o.appendChild(n);this.node=o;var g=dojo.dnd.manager();this.oldOffsetY=g.OFFSET_Y;g.OFFSET_Y=1},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}});var b=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var d=this.source;if(d.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y")){return new dojox.grid._GridAvatar(this)}return b.call(dojo.dnd.manager())}})()}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(a,d){var b=this.contentWidth||0;d.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+b+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth}},doStyleRowNode:function(b,a){var d=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(b)){d.push("dojoxGridRowbarOver")}if(this.grid.selection.isSelected(b)){d.push("dojoxGridRowbarSelected")}a.className=d.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a)){this.grid.onMouseOutRow(a)}}})}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(u,s,q,p,n){var l=this.structure[u].cells[0];var g=this.structure[s].cells[0];var a=null;var w=0;var t=0;for(var m=0,x;x=l[m];m++){if(x.index==q){w=m;break}}a=l.splice(w,1)[0];a.view=this.grid.views.views[s];for(m=0,x=null;x=g[m];m++){if(x.index==p){t=m;break}}if(!n){t+=1}g.splice(t,0,a);var o=this.grid.getCell(this.grid.getSortIndex());if(o){o._currentlySorted=this.grid.getSortAsc()}this.cells=[];q=0;var d;for(m=0;d=this.structure[m];m++){for(var h=0,b;b=d.cells[h];h++){for(var f=0;x=b[f];f++){x.index=q;this.cells.push(x);if("_currentlySorted"in x){var y=q+1;y*=x._currentlySorted?1:-1;this.grid.sortInfo=y;delete x._currentlySorted}q++}}}this.grid.setupHeaderMenu()},setColumnVisibility:function(g,f){var a=this.cells[g];if(a.hidden==f){a.hidden=!f;var d=a.view,b=d.viewWidth;if(b&&b!="auto"){d._togglingColumn=dojo.marginBox(a.getHeaderNode()).w||0}d.update();return true}else{return false}},addCellDef:function(f,d,h){var b=this;var a=function(l){var k=0;if(l.colSpan>1){k=0}else{k=l.width||b._defaultCellProps.width||b.defaultWidth;if(!isNaN(k)){k=k+"em"}}return k};var g={grid:this.grid,subrow:f,layoutIndex:d,index:this.cells.length};if(h&&h instanceof dojox.grid.cells._Base){var j=dojo.clone(h);g.unitWidth=a(j._props);j=dojo.mixin(j,this._defaultCellProps,h._props,g);return j}var i=h.type||this._defaultCellProps.type||dojox.grid.cells.Cell;g.unitWidth=a(h);return new i(dojo.mixin({},this._defaultCellProps,h,g))},addRowDef:function(a,f){var m=[];var l=0,k=0,d=true;for(var g=0,b,j;(b=f[g]);g++){j=this.addCellDef(a,g,b);m.push(j);this.cells.push(j);if(d&&j.relWidth){l+=j.relWidth}else{if(j.width){var h=j.width;if(typeof h=="string"&&h.slice(-1)=="%"){k+=window.parseInt(h,10)}else{if(h=="auto"){d=false}}}}}if(l&&d){dojo.forEach(m,function(i){if(i.relWidth){i.width=i.unitWidth=((i.relWidth/l)*(100-k))+"%"}})}return m},addRowsDef:function(d){var a=[];if(dojo.isArray(d)){if(dojo.isArray(d[0])){for(var b=0,f;d&&(f=d[b]);b++){a.push(this.addRowDef(b,f))}}else{a.push(this.addRowDef(0,d))}}return a},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};if(a.width&&a.width=="auto"){delete a.width}return dojo.mixin({},a,{cells:this.addRowsDef(a.rows||a.cells)})},setStructure:function(j){this.fieldIndex=0;this.cells=[];var m=this.structure=[];if(this.grid.rowSelector){var b={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var a=this.grid.rowSelector;if(a=="false"){b=null}else{if(a!="true"){b.width=a}}}else{if(!this.grid.rowSelector){b=null}}if(b){m.push(this.addViewDef(b))}}var f=function(i){return("name"in i||"field"in i||"get"in i)};var k=function(i){if(dojo.isArray(i)){if(dojo.isArray(i[0])||f(i[0])){return true}}return false};var h=function(i){return(i!==null&&dojo.isObject(i)&&("cells"in i||"rows"in i||("type"in i&&!f(i))))};if(dojo.isArray(j)){var g=false;for(var d=0,l;(l=j[d]);d++){if(h(l)){g=true;break}}if(!g){m.push(this.addViewDef({cells:j}))}else{for(d=0;(l=j[d]);d++){if(k(l)){m.push(this.addViewDef({cells:l}))}else{if(h(l)){m.push(this.addViewDef(l))}}}}}else{if(h(j)){m.push(this.addViewDef(j))}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var b=0,a;a=this.views[b];b++){a.destroy()}this.views=[]},getContentNodes:function(){var b=[];for(var d=0,a;a=this.views[d];d++){b.push(a.contentNode)}return b},forEach:function(d){for(var b=0,a;a=this.views[b];b++){d(a,b)}},onEach:function(f,d){d=d||[];for(var b=0,a;a=this.views[b];b++){if(f in a){a[f].apply(a,d)}}},normalizeHeaderNodeHeight:function(){var d=[];for(var b=0,a;(a=this.views[b]);b++){if(a.headerContentNode.firstChild){d.push(a.headerContentNode)}}this.normalizeRowNodeHeights(d)},normalizeRowNodeHeights:function(f){var d=0;var a=[];if(this.grid.rowHeight){d=this.grid.rowHeight}else{if(f.length<=1){return}for(var b=0,g;(g=f[b]);b++){if(!dojo.hasClass(g,"dojoxGridNonNormalizedCell")){a[b]=g.firstChild.offsetHeight;d=Math.max(d,a[b])}}d=(d>=0?d:0);if(dojo.isMoz&&d){d++}}for(b=0;(g=f[b]);b++){if(a[b]!=d){g.firstChild.style.height=d+"px"}}},resetHeaderNodeHeight:function(){for(var b=0,a,d;(a=this.views[b]);b++){d=a.headerContentNode.firstChild;if(d){d.style.height=""}}},renormalizeRow:function(d){var a=[];for(var f=0,b,g;(b=this.views[f])&&(g=b.getRowNode(d));f++){g.firstChild.style.height="";a.push(g)}this.normalizeRowNodeHeights(a)},getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(b){b.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(d){var f=this.grid.elasticView||-1;if(f<0){for(var b=1,a;(a=this.views[b]);b++){if(a.viewWidth){for(b=1;(a=this.views[b]);b++){if(!a.viewWidth){f=b;break}}break}}}if(f<0){f=Math.floor(this.views.length/2)}return f},arrange:function(b,m){var f,n,k,g=this.views.length;var h=(m<=0?g:this.findClient());var o=function(j,i){var q=j.domNode.style;var p=j.headerNode.style;if(!dojo._isBodyLtr()){q.right=i+"px";if(dojo.isMoz){p.right=i+j.getScrollbarWidth()+"px";p.width=parseInt(p.width,10)-j.getScrollbarWidth()+"px"}else{p.right=i+"px"}}else{q.left=i+"px";p.left=i+"px"}q.top=0+"px";p.top=0};for(f=0;(n=this.views[f])&&(f<h);f++){k=this.getViewWidth(f);n.setSize(k,0);o(n,b);if(n.headerContentNode&&n.headerContentNode.firstChild){k=n.getColumnsWidth()+n.getScrollbarWidth()}else{k=n.domNode.offsetWidth}b+=k}f++;var a=m;for(var d=g-1;(n=this.views[d])&&(f<=d);d--){k=this.getViewWidth(d);n.setSize(k,0);k=n.domNode.offsetWidth;a-=k;o(n,a)}if(h<g){n=this.views[h];k=Math.max(1,a-b);n.setSize(k+"px",0);o(n,b)}return b},renderRow:function(h,f,d){var j=[];for(var g=0,b,k,a;(b=this.views[g])&&(k=f[g]);g++){a=b.renderRow(h);k.appendChild(a);j.push(a)}if(!d){this.normalizeRowNodeHeights(j)}},rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(d,a){for(var f=0,b;b=this.views[f];f++){b.updateRow(d)}if(!a){this.renormalizeRow(d)}},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(d){var f=d;for(var b=0,a;a=this.views[b];b++){f=a.setScrollTop(d);if(dojo.isIE&&a.headerNode&&a.scrollboxNode){a.headerNode.scrollLeft=a.scrollboxNode.scrollLeft}}return f},getFirstScrollingView:function(){for(var b=0,a;(a=this.views[b]);b++){if(a.hasHScrollbar()||a.hasVScrollbar()){return a}}return null}})}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var a=function(d,b){if(d.style.cssText==undefined){d.setAttribute("style",b)}else{d.style.cssText=b}};dojo.declare("dojox.grid._RowManager",null,{constructor:function(b){this.grid=b},linesToEms:2,overRow:-2,prepareStylingRow:function(b,d){return{index:b,node:d,odd:Boolean(b&1),selected:!!this.grid.selection.isSelected(b),over:this.isOver(b),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(d,b){var f=this.prepareStylingRow(d,b);this.grid.onStyleRow(f);this.applyStyles(f)},applyStyles:function(f){var b=f;b.node.className=b.customClasses;var d=b.node.style.height;a(b.node,b.customStyles+";"+(b.node._style||""));b.node.style.height=d},updateStyles:function(b){this.grid.updateRowStyles(b)},setOverRow:function(d){var b=this.overRow;this.overRow=d;if((b!=this.overRow)&&(dojo.isString(b)||b>=0)){this.updateStyles(b)}this.updateStyles(this.overRow)},isOver:function(b){return(this.overRow==b&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing"))}})})()}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView;this._initColumnHeaders()},isFocusCell:function(b,a){return(this.cell==b)&&(this.rowIndex==a)},isLastFocusCell:function(){if(this.cell){return(this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1)}return false},isFirstFocusCell:function(){if(this.cell){return(this.rowIndex===0)&&(this.cell.index===0)}return false},isNoFocusCell:function(){return(this.rowIndex<0)||!this.cell},isNavHeader:function(){return(!!this._colHeadNode)},getHeaderIndex:function(){if(this._colHeadNode){return dojo.indexOf(this._findHeaderCells(),this._colHeadNode)}else{return-1}},_focusifyCellNode:function(b){var f=this.cell&&this.cell.getNode(this.rowIndex);if(f){dojo.toggleClass(f,this.focusClass,b);if(b){var a=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(f,"focus");if(a){this.cell.view.scrollboxNode.scrollLeft=a}}}catch(d){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid._focused){return}var b=this.cell&&this.cell.getNode(this.rowIndex);if(b){try{if(!this.grid.edit.isEditing()){dojo.toggleClass(b,this.focusClass,true);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");dojox.grid.util.fire(b,"focus")}}catch(a){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus()}},_initColumnHeaders:function(){var a=this._findHeaderCells();for(var b=0;b<a.length;b++){this._connects.push(dojo.connect(a[b],"onfocus",this,"doColHeaderFocus"));this._connects.push(dojo.connect(a[b],"onblur",this,"doColHeaderBlur"))}},_findHeaderCells:function(){var h=dojo.query("th",this.grid.viewsHeaderNode);var g=[];for(var d=0;d<h.length;d++){var a=h[d];var f=dojo.hasAttr(a,"tabIndex");var b=dojo.attr(a,"tabIndex");if(f&&b<0){g.push(a)}}return g},_setActiveColHeader:function(d,b,a){dojo.attr(this.grid.domNode,"aria-activedescendant",d.id);if(a!=null&&a>=0&&a!=b){dojo.toggleClass(this._findHeaderCells()[a],this.focusClass,false)}dojo.toggleClass(d,this.focusClass,true);this._colHeadNode=d;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var b=(this.cell?this._scrollInfo(this.cell):null);if(!b||!b.s){return null}var a=this.grid.scroller.findScrollTop(this.rowIndex);if(b.n&&b.sr){if(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+b.sr.w){b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w}else{if(b.n.offsetLeft<b.sr.l){b.s.scrollLeft=b.n.offsetLeft}}}if(b.r&&b.sr){if(a+b.r.offsetHeight>b.sr.t+b.sr.h){this.grid.setScrollTop(a+b.r.offsetHeight-b.sr.h)}else{if(a<b.sr.t){this.grid.setScrollTop(a)}}}return b.s.scrollLeft},_scrollInfo:function(a,d){if(a){var b=a,h=b.view.scrollboxNode,f={w:h.clientWidth,l:h.scrollLeft,t:h.scrollTop,h:h.clientHeight},g=b.view.getRowNode(this.rowIndex);return{c:b,s:h,sr:f,n:(d?d:a.getNode(this.rowIndex)),r:g}}return null},_scrollHeader:function(f){var d=null;if(this._colHeadNode){var a=this.grid.getCell(f);d=this._scrollInfo(a,a.getNode(0))}if(d&&d.s&&d.sr&&d.n){var b=d.sr.l+d.sr.w;if(d.n.offsetLeft+d.n.offsetWidth>b){d.s.scrollLeft=d.n.offsetLeft+d.n.offsetWidth-d.sr.w}else{if(d.n.offsetLeft<d.sr.l){d.s.scrollLeft=d.n.offsetLeft}else{if(dojo.isIE<=7&&a&&a.view.headerNode){a.view.headerNode.scrollLeft=d.s.scrollLeft}}}}},_isHeaderHidden:function(){var b=this.focusView;if(!b){for(var a=0,d;(d=this.grid.views.views[a]);a++){if(d.headerNode){b=d;break}}}return(b&&dojo.getComputedStyle(b.headerNode).display=="none")},colSizeAdjust:function(j,k,m){var h=this._findHeaderCells();var l=this.focusView;if(!l){for(var b=0,g;(g=this.grid.views.views[b]);b++){if(g.header.tableMap.map){l=g;break}}}var d=h[k];if(!l||(k==h.length-1&&k===0)){return}l.content.baseDecorateEvent(j);j.cellNode=d;j.cellIndex=l.content.getCellNodeIndex(j.cellNode);j.cell=(j.cellIndex>=0?this.grid.getCell(j.cellIndex):null);if(l.header.canResize(j)){var a={l:m};var f=l.header.colResizeSetup(j,false);l.header.doResizeColumn(f,null,a);l.update()}},styleRow:function(a){return},setFocusIndex:function(b,a){this.setFocusCell(this.grid.getCell(a),b)},setFocusCell:function(b,a){if(b&&!this.isFocusCell(b,a)){this.tabbingOut=false;if(this._colHeadNode){dojo.toggleClass(this._colHeadNode,this.focusClass,false);dojo.removeAttr(this.grid.domNode,"aria-activedescendant")}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=b;this.rowIndex=a;this._focusifyCellNode(true)}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1)}else{this.grid.onCellFocus(this.cell,this.rowIndex)}},next:function(){if(this.cell){var f=this.rowIndex,a=this.cell.index+1,g=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;if(a>g){a=0;f++}if(f>d){a=g;f=d}if(this.grid.edit.isEditing()){var b=this.grid.getCell(a);if(!this.isLastFocusCell()&&!b.editable){this.cell=b;this.rowIndex=f;this.next();return}}this.setFocusIndex(f,a)}},previous:function(){if(this.cell){var d=(this.rowIndex||0),a=(this.cell.index||0)-1;if(a<0){a=this.grid.layout.cellCount-1;d--}if(d<0){d=0;a=0}if(this.grid.edit.isEditing()){var b=this.grid.getCell(a);if(!this.isFirstFocusCell()&&!b.editable){this.cell=b;this.rowIndex=d;this.previous();return}}this.setFocusIndex(d,a)}},move:function(f,d){var p=d<0?-1:1;if(this.isNavHeader()){var n=this._findHeaderCells();var m=currentIdx=dojo.indexOf(n,this._colHeadNode);currentIdx+=d;while(currentIdx>=0&&currentIdx<n.length&&n[currentIdx].style.display=="none"){currentIdx+=p}if((currentIdx>=0)&&(currentIdx<n.length)){this._setActiveColHeader(n[currentIdx],currentIdx,m)}}else{if(this.cell){var k=this.grid.scroller,b=this.rowIndex,a=this.grid.rowCount-1,o=Math.min(a,Math.max(0,b+f));if(f){if(f>0){if(o>k.getLastPageRow(k.page)){this.grid.setScrollTop(this.grid.scrollTop+k.findScrollTop(o)-k.findScrollTop(b))}}else{if(f<0){if(o<=k.getPageRow(k.page)){this.grid.setScrollTop(this.grid.scrollTop-k.findScrollTop(b)-k.findScrollTop(o))}}}}var h=this.grid.layout.cellCount-1,j=this.cell.index,g=Math.min(h,Math.max(0,j+d));var l=this.grid.getCell(g);while(g>=0&&g<h&&l&&l.hidden===true){g+=p;l=this.grid.getCell(g)}if(!l||l.hidden===true){g=j}this.setFocusIndex(o,g);if(f){this.grid.updateRow(b)}}}},previousKey:function(a){if(this.grid.edit.isEditing()){dojo.stopEvent(a);this.previous()}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();dojo.stopEvent(a)}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null}this._focusifyCellNode(false)}}},nextKey:function(b){var a=(this.grid.rowCount===0);if(b.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(b)}else{if(this.isNavHeader()){dojo.toggleClass(this._colHeadNode,this.focusClass,false);if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode)}this._colHeadNode=this._colHeadFocusIdx=null}else{if(this.grid.edit.isEditing()){dojo.stopEvent(b);this.next()}else{this.tabOut(this.grid.lastFocusNode)}}}},tabOut:function(a){this.tabbingOut=true;a.focus()},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView();this._focusifyCellNode(true)},findAndFocusGridCell:function(){var f=true;var d=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!d){var b=0;var a=this.grid.getCell(b);if(a.hidden){b=this.isNavHeader()?this._colHeadFocusIdx:0}this.setFocusIndex(0,b)}else{if(this.cell&&!d){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex)}this.focusGrid()}else{f=false}}this._colHeadNode=this._colHeadFocusIdx=null;return f},focusHeader:function(){var a=this._findHeaderCells();var b=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell()}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0}else{this._colHeadFocusIdx=this.cell.index}}}this._colHeadNode=a[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<a.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=a[this._colHeadFocusIdx]}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false)}else{this.findAndFocusGridCell()}},doFocus:function(a){if(a&&a.target!=a.currentTarget){dojo.stopEvent(a);return}if(!this.tabbingOut){this.focusHeader()}this.tabbingOut=false;dojo.stopEvent(a)},doBlur:function(a){dojo.stopEvent(a)},doLastNodeFocus:function(a){if(this.tabbingOut){this._focusifyCellNode(false)}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0)}this._focusifyCellNode(true)}else{this.focusHeader()}}this.tabbingOut=false;dojo.stopEvent(a)},doLastNodeBlur:function(a){dojo.stopEvent(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,dojo.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(a)},doColHeaderBlur:function(a){dojo.toggleClass(a.target,this.focusClass,false)}})}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(a){this.grid=a;this.connections=[];if(dojo.isIE){this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")))}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(b,a){if(this.grid.singleClickEdit||this.isEditRow(a)){this.setEditCell(b,a)}else{this.apply()}if(this.isEditing()||(b&&b.editable&&b.alwaysEditing)){this._focusEditor(b,a)}},rowClick:function(a){if(this.isEditing()&&!this.isEditRow(a.rowIndex)){this.apply()}},styleRow:function(a){if(a.index==this.info.rowIndex){a.customClasses+=" dojoxGridRowEditing"}},dispatchEvent:function(b){var d=b.cell,a=(d&&d.editable)?d:0;return a&&a.dispatchEvent(b.dispatch,b)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(a,b){return(this.info.rowIndex===a)&&(this.info.cell.index==b)},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(b,a){if(!this.isEditCell(a,b.index)&&this.grid.canEdit&&this.grid.canEdit(b,a)){this.start(b,a,this.isEditRow(a)||b.editable)}},_focusEditor:function(b,a){dojox.grid.util.fire(b,"focus",[a])},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex)}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow}},start:function(d,b,a){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(b)){this.applyRowEdit();this.grid.updateRow(b)}if(a){this.info={cell:d,rowIndex:b};this.grid.doStartEdit(d,b);this.grid.updateRow(b)}else{this.info={}}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(d,b);this._doCatchBoomerang()},_editorDo:function(a){var b=this.info.cell;if(b&&b.editable){b[a](this.info.rowIndex)}},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(d,b,a){if(this.grid.canEdit(b,a)){this.grid.doApplyCellEdit(d,a,b.field)}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(b,a){var d=this.info.cell;if(this.isEditRow(b)&&(!a||d.view==a)&&d.editable){d.save(d,this.info.rowIndex)}},restore:function(b,a){var d=this.info.cell;if(this.isEditRow(a)&&d.view==b&&d.editable){d.restore(d,this.info.rowIndex)}}})}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(a){this.grid=a;this.selected=[];this.setMode(a.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(a){if(this.selected.length){this.deselectAll()}if(a!="extended"&&a!="multiple"&&a!="single"&&a!="none"){this.mode="extended"}else{this.mode=a}},onCanSelect:function(a){return this.grid.onCanSelect(a)},onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(a){},onDeselected:function(a){},onChanging:function(){},onChanged:function(){},isSelected:function(a){if(this.mode=="none"){return false}return this.selected[a]},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return-1}for(var b=0,a=this.selected.length;b<a;b++){if(this.selected[b]){return b}}return-1},getNextSelected:function(d){if(this.mode=="none"){return-1}for(var b=d+1,a=this.selected.length;b<a;b++){if(this.selected[b]){return b}}return-1},getSelected:function(){var a=[];for(var d=0,b=this.selected.length;d<b;d++){if(this.selected[d]){a.push(d)}}return a},getSelectedCount:function(){var b=0;for(var a=0;a<this.selected.length;a++){if(this.selected[a]){b++}}return b},_beginUpdate:function(){if(this.updating===0){this.onChanging()}this.updating++},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged()}},select:function(a){if(this.mode=="none"){return}if(this.mode!="multiple"){this.deselectAll(a);this.addToSelection(a)}else{this.toggleSelect(a)}},addToSelection:function(b){if(this.mode=="none"){return}if(dojo.isArray(b)){dojo.forEach(b,this.addToSelection,this);return}b=Number(b);if(this.selected[b]){this.selectedIndex=b}else{if(this.onCanSelect(b)!==false){this.selectedIndex=b;var a=this.grid.getRowNode(b);if(a){dojo.attr(a,"aria-selected","true")}this._beginUpdate();this.selected[b]=true;this.onSelected(b);this._endUpdate()}}},deselect:function(b){if(this.mode=="none"){return}if(dojo.isArray(b)){dojo.forEach(b,this.deselect,this);return}b=Number(b);if(this.selectedIndex==b){this.selectedIndex=-1}if(this.selected[b]){if(this.onCanDeselect(b)===false){return}var a=this.grid.getRowNode(b);if(a){dojo.attr(a,"aria-selected","false")}this._beginUpdate();delete this.selected[b];this.onDeselected(b);this._endUpdate()}},setSelected:function(b,a){this[(a?"addToSelection":"deselect")](b)},toggleSelect:function(a){if(dojo.isArray(a)){dojo.forEach(a,this.toggleSelect,this);return}this.setSelected(a,!this.selected[a])},_range:function(a,f,g){var d=(a>=0?a:f),h=f;if(d>h){h=d;d=f}for(var b=d;b<=h;b++){g(b)}},selectRange:function(b,a){this._range(b,a,dojo.hitch(this,"addToSelection"))},deselectRange:function(b,a){this._range(b,a,dojo.hitch(this,"deselect"))},insert:function(a){this.selected.splice(a,0,false);if(this.selectedIndex>=a){this.selectedIndex++}},remove:function(a){this.selected.splice(a,1);if(this.selectedIndex>=a){this.selectedIndex--}},deselectAll:function(b){for(var a in this.selected){if((a!=b)&&(this.selected[a]===true)){this.deselect(a)}}},clickSelect:function(f,d,b){if(this.mode=="none"){return}this._beginUpdate();if(this.mode!="extended"){this.select(f)}else{var a=this.selectedIndex;if(!d){this.deselectAll(f)}if(b){this.selectRange(a,f)}else{if(d){this.toggleSelect(f)}else{this.addToSelection(f)}}}this._endUpdate()},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,dojo.isCopyKey(a),a.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(b){var a=b;a.customClasses+=(a.odd?" dojoxGridRowOdd":"")+(a.selected?" dojoxGridRowSelected":"")+(a.over?" dojoxGridRowOver":"");this.focus.styleRow(b);this.edit.styleRow(b)},onKeyDown:function(g){if(g.altKey||g.metaKey){return}var b=dojo.keys;var a;switch(g.keyCode){case b.ESCAPE:this.edit.cancel();break;case b.ENTER:if(!this.edit.isEditing()){a=this.focus.getHeaderIndex();if(a>=0){this.setSortIndex(a);break}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(g),g.shiftKey)}dojo.stopEvent(g)}if(!g.shiftKey){var i=this.edit.isEditing();this.edit.apply();if(!i){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex)}}if(!this.edit.isEditing()){var h=this.focus.focusView||this.views.views[0];h.content.decorateEvent(g);this.onRowClick(g)}break;case b.SPACE:if(!this.edit.isEditing()){a=this.focus.getHeaderIndex();if(a>=0){this.setSortIndex(a);break}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(g),g.shiftKey)}dojo.stopEvent(g)}break;case b.TAB:this.focus[g.shiftKey?"previousKey":"nextKey"](g);break;case b.LEFT_ARROW:case b.RIGHT_ARROW:if(!this.edit.isEditing()){var f=g.keyCode;dojo.stopEvent(g);a=this.focus.getHeaderIndex();if(a>=0&&(g.shiftKey&&g.ctrlKey)){this.focus.colSizeAdjust(g,a,(f==b.LEFT_ARROW?-1:1)*5)}else{var d=(f==b.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){d*=-1}this.focus.move(0,d)}}break;case b.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(g);this.focus.move(-1,0)}break;case b.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(g);this.focus.move(1,0)}break;case b.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(g);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case b.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(g);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)}}break;default:break}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){if(!this.rows.isOver(a.rowIndex)){this.rows.setOverRow(a.rowIndex);a.rowIndex==-1?this.onHeaderMouseOver(a):this.onRowMouseOver(a)}},onMouseOutRow:function(a){if(this.rows.isOver(-1)){this.onHeaderMouseOut(a)}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(a)}}},onMouseDownRow:function(a){if(a.rowIndex!=-1){this.onRowMouseDown(a)}},onCellMouseOver:function(a){if(a.cellNode){dojo.addClass(a.cellNode,this.cellOverClass)}},onCellMouseOut:function(a){if(a.cellNode){dojo.removeClass(a.cellNode,this.cellOverClass)}},onCellMouseDown:function(a){},onCellClick:function(a){this._click[0]=this._click[1];this._click[1]=a;if(!this.edit.isEditCell(a.rowIndex,a.cellIndex)){this.focus.setFocusCell(a.cell,a.rowIndex)}this.onRowClick(a)},onCellDblClick:function(a){if(this._click.length>1&&dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex)}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex)}else{this.edit.setEditCell(a.cell,a.rowIndex)}}this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(b,a){this.edit.cellFocus(b,a)},onRowClick:function(a){this.edit.rowClick(a);this.selection.clickSelectEvent(a)},onRowDblClick:function(a){},onRowMouseOver:function(a){},onRowMouseOut:function(a){},onRowMouseDown:function(a){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(a){},onHeaderMouseOut:function(a){},onHeaderCellMouseOver:function(a){if(a.cellNode){dojo.addClass(a.cellNode,this.cellOverClass)}},onHeaderCellMouseOut:function(a){if(a.cellNode){dojo.removeClass(a.cellNode,this.cellOverClass)}},onHeaderCellMouseDown:function(a){},onHeaderClick:function(a){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(a){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){if(!this.headerMenu){dojo.stopEvent(a)}},onStartEdit:function(a,b){},onApplyCellEdit:function(d,b,a){},onCancelEdit:function(a){},onApplyEdit:function(a){},onCanSelect:function(a){return true},onCanDeselect:function(a){return true},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}})}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState}dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:'<div class="dojoxGrid" hidefocus="hidefocus" wairole="grid" dojoAttachEvent="onmouseout:_mouseOut">\r\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" wairole="presentation"></div>\r\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" wairole="presentation"></div>\r\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\r\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\r\n</div>\r\n',classTag:"dojoxGrid",get:function(a){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.grid._Grid.prototype.get){this.get=null}if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0"}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none"){dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true")}},postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth}if(this.domNode&&!this.editable){dojo.attr(this.domNode,"aria-readonly","true")}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller}if(this.focus){this.focus.destroy();delete this.focus}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(a){a.unReplace(true)});this.headerMenu.unBindDomNode(this.viewsHeaderNode)}this.inherited(arguments)},_setAutoHeightAttr:function(a,b){if(typeof a=="string"){if(!a||a=="false"){a=false}else{if(a=="true"){a=true}else{a=window.parseInt(a,10)}}}if(typeof a=="number"){if(isNaN(a)){a=false}if(a<0){a=true}else{if(a===0){a=false}}}this.autoHeight=a;if(typeof a=="boolean"){this._autoHeight=a}else{if(typeof a=="number"){this._autoHeight=(a>=this.attr("rowCount"))}else{this._autoHeight=false}}if(this._started&&!b){this.render()}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this)},createSelection:function(){this.selection=new dojox.grid.Selection(this)},createScroller:function(){this.scroller=new dojox.grid._Scroller();this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.render()},onResizeColumn:function(a){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(d,a){var f=dojo.getObject(d);var b=new f({grid:this,index:a});this.viewsNode.appendChild(b.domNode);this.viewsHeaderNode.appendChild(b.headerNode);this.views.addView(b);return b},buildViews:function(){for(var a=0,b;(b=this.layout.structure[a]);a++){this.createView(b.type||dojox._scopeName+".grid._View",a).setStructure(b)}this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){var b=a;if(b&&dojo.isString(b)){dojo.deprecated("dojox.grid._Grid.attr('structure', 'objVar')","use dojox.grid._Grid.attr('structure', objVar) instead","2.0");b=dojo.getObject(b)}this.structure=b;if(!b){if(this.layout.structure){b=this.layout.structure}else{return}}this.views.destroyViews();if(b!==this.layout.structure){this.layout.setStructure(b)}this._structureChanged()},setStructure:function(a){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.attr('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(a){if(!a.menuItems){a.menuItems=[]}var b=this;var d=new dijit.CheckedMenuItem({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(g){if(b.layout.setColumnVisibility(this._gridCell.index,g)){var f=this._gridCell.menuItems;if(f.length>1){dojo.forEach(f,function(h){if(h!==this){h.setAttribute("checked",g)}},this)}g=dojo.filter(b.layout.cells,function(h){if(h.menuItems.length>1){dojo.forEach(h.menuItems,"item.attr('disabled', false);")}else{h.menuItems[0].attr("disabled",false)}return!h.hidden});if(g.length==1){dojo.forEach(g[0].menuItems,"item.attr('disabled', true);")}}},destroy:function(){var f=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(f,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments)}});a.menuItems.push(d);return d},this)},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(b){b.unReplace(true)});this._placeholders=[]}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode)}this.headerMenu=a;if(!a){return}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)}},setHeaderMenu:function(a){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.attr('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(a){if(a._replaced){a.unReplace(true)}a.replace(this.getColumnTogglingItems())},this)}},_fetch:function(a){this.setScrollTop(0)},getItem:function(a){return null},showMessage:function(a){if(a){this.messagesNode.innerHTML=a;this.messagesNode.style.display=""}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none"}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render()}},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder},_getHeaderHeight:function(){var b=this.viewsHeaderNode.style,a=b.display=="none"?0:this.views.measureHeader();b.height=a+"px";this.views.normalizeHeaderNodeHeight();return a},_resize:function(j,i){j=j||this._pendingChangeSize;i=i||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return}var b=this.domNode.parentNode;if(!b||b.nodeType!=1||!this.hasLayout()||b.style.visibility=="hidden"||b.style.display=="none"){return}var g=this._getPadBorder();var d=undefined;var f;if(this._autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height=""}else{if(typeof this.autoHeight=="number"){f=d=this._getHeaderHeight();f+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=f+"px"}else{if(this.domNode.clientHeight<=g.h){if(b==document.body){this.domNode.style.height=this.defaultHeight}else{if(this.height){this.domNode.style.height=this.height}else{this.fitTo="parent"}}}}}if(i){j=i}if(j){dojo.marginBox(this.domNode,j);this.height=this.domNode.style.height;delete this.fitTo}else{if(this.fitTo=="parent"){f=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(b).h;this.domNode.style.height=Math.max(0,f)+"px"}}var a=dojo.some(this.views.views,function(h){return h.flexCells});if(!this._autoHeight&&(f||dojo._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none"}else{this.viewsHeaderNode.style.display="block";if(!a&&d===undefined){d=this._getHeaderHeight()}}if(a){d=undefined}this.adaptWidth();this.adaptHeight(d);this.postresize()},adaptWidth:function(){var d=(!this.initialWidth&&this.autoWidth);var a=d?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),b=this.views.arrange(1,a);this.views.onEach("adaptWidth");if(d){this.domNode.style.width=b+"px"}},adaptHeight:function(a){var b=a===undefined?this._getHeaderHeight():a;var d=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0);this.views.onEach("setSize",[0,d]);this.views.onEach("adaptHeight");if(!this._autoHeight){var i=0,g=0;var f=dojo.filter(this.views.views,function(h){var j=h.hasHScrollbar();if(j){i++}else{g++}return(!j)});if(i>0&&g>0){dojo.forEach(f,function(h){h.adaptHeight(true)})}}if(this.autoHeight===true||d!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.attr("rowCount"))){this.scroller.windowHeight=d}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-b,0)}},startup:function(){if(this._started){return}this.inherited(arguments);if(this.autoRender){this.render()}},render:function(){if(!this.domNode){return}if(!this._started){return}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return}this.update=this.defaultUpdate;this._render()},_render:function(){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var a=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=a}},renderRow:function(b,a){this.views.renderRow(b,a,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true},endUpdate:function(){this.updating=false;var a=this.invalidated,b;if(a.all){this.update()}else{if(a.rowCount!=undefined){this.updateRowCount(a.rowCount)}else{for(b in a){this.updateRow(Number(b))}}}this.invalidated=[]},defaultUpdate:function(){if(!this.domNode){return}if(this.updating){this.invalidated.all=true;return}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender()},update:function(){this.render()},updateRow:function(a){a=Number(a);if(this.updating){this.invalidated[a]=true}else{this.views.updateRow(a);this.scroller.rowHeightChanged(a)}},updateRows:function(b,a){b=Number(b);a=Number(a);var d;if(this.updating){for(d=0;d<a;d++){this.invalidated[d+b]=true}}else{for(d=0;d<a;d++){this.views.updateRow(d+b,this._skipRowRenormalize)}this.scroller.rowHeightChanged(b)}},updateRowCount:function(a){if(this.updating){this.invalidated.rowCount=a}else{this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(a)}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop)}}},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(d){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector)){return this.focus.focusView.rowNodes[d]}else{for(var a=0,b;(b=this.views.views[a]);a++){if(!(b instanceof dojox.grid._RowSelector)){return b.rowNodes[d]}}}return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(a){if(!this.fastScroll){this.setScrollTop(a);return}var d=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(d>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=a;this.views.setScrollTop(a);if(this._pendingScroll){window.clearTimeout(this._pendingScroll)}var b=this;this._pendingScroll=window.setTimeout(function(){delete b._pendingScroll;b.finishScrollJob()},200)}else{this.setScrollTop(a)}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(b,a){if(a){this.rows.styleRowNode(b,a)}},_mouseOut:function(a){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){a=a==undefined?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==undefined?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(d,b){var a=d+1;if(b!=undefined){a*=(b?1:-1)}else{if(this.getSortIndex()==d){a=-this.sortInfo}}this.setSortInfo(a)},setSortInfo:function(a){if(this.canSort(a)){this.sortInfo=a;this.sort();this.update()}},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this){return this[a](b)}return false},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode){this.onCellClick(a)}else{this.onRowClick(a)}},dodblclick:function(a){if(a.cellNode){this.onCellDblClick(a)}else{this.onRowDblClick(a)}},docontextmenu:function(a){if(a.cellNode){this.onCellContextMenu(a)}else{this.onRowContextMenu(a)}},doheaderclick:function(a){if(a.cellNode){this.onHeaderCellClick(a)}else{this.onHeaderClick(a)}},doheaderdblclick:function(a){if(a.cellNode){this.onHeaderCellDblClick(a)}else{this.onHeaderDblClick(a)}},doheadercontextmenu:function(a){if(a.cellNode){this.onHeaderCellContextMenu(a)}else{this.onHeaderContextMenu(a)}},doStartEdit:function(b,a){this.onStartEdit(b,a)},doApplyCellEdit:function(b,a,d){this.onApplyCellEdit(b,a,d)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.attr("rowCount")+1)},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0)}else{this.updateRowCount(Math.max(0,this.attr("rowCount")-this.selection.getSelected().length))}this.selection.clear()}});dojox.grid._Grid.markupFactory=function(b,h,g,f){var i=dojo;var a=function(j){var d=i.attr(j,"width")||"auto";if((d!="auto")&&(d.slice(-2)!="em")&&(d.slice(-1)!="%")){d=parseInt(d,10)+"px"}return d};if(!b.structure&&h.nodeName.toLowerCase()=="table"){b.structure=i.query("> colgroup",h).map(function(k){var d=i.attr(k,"span");var j={noscroll:(i.attr(k,"noscroll")=="true")?true:false,__span:(!!d?parseInt(d,10):1),cells:[]};if(i.hasAttr(k,"width")){j.width=a(k)}return j});if(!b.structure.length){b.structure.push({__span:Infinity,cells:[]})}i.query("thead > tr",h).forEach(function(k,l){var j=0;var d=0;var n;var m=null;i.query("> th",k).map(function(p){if(!m){n=0;m=b.structure[0]}else{if(j>=(n+m.__span)){d++;n+=m.__span;var s=m;m=b.structure[d]}}var o={name:i.trim(i.attr(p,"name")||p.innerHTML),colSpan:parseInt(i.attr(p,"colspan")||1,10),type:i.trim(i.attr(p,"cellType")||""),id:i.trim(i.attr(p,"id")||"")};j+=o.colSpan;var q=i.attr(p,"rowspan");if(q){o.rowSpan=q}if(i.hasAttr(p,"width")){o.width=a(p)}if(i.hasAttr(p,"relWidth")){o.relWidth=window.parseInt(dojo.attr(p,"relWidth"),10)}if(i.hasAttr(p,"hidden")){o.hidden=i.attr(p,"hidden")=="true"}if(f){f(p,o)}o.type=o.type?dojo.getObject(o.type):dojox.grid.cells.Cell;if(o.type&&o.type.markupFactory){o.type.markupFactory(p,o)}if(!m.cells[l]){m.cells[l]=[]}m.cells[l].push(o)})})}return new g(b,h)}})()}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var a=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(a==-1){return null}return this.grid.getItem(a)},getNextSelected:function(d){var b=this.grid.getItemIndex(d);var a=dojox.grid.Selection.prototype.getNextSelected.call(this,b);if(a==-1){return null}return this.grid.getItem(a)},getSelected:function(){var b=[];for(var d=0,a=this.selected.length;d<a;d++){if(this.selected[d]){b.push(this.grid.getItem(d))}}return b},addToSelection:function(b){if(this.mode=="none"){return}var a=null;if(typeof b=="number"||typeof b=="string"){a=b}else{a=this.grid.getItemIndex(b)}dojox.grid.Selection.prototype.addToSelection.call(this,a)},deselect:function(b){if(this.mode=="none"){return}var a=null;if(typeof b=="number"||typeof b=="string"){a=b}else{a=this.grid.getItemIndex(b)}dojox.grid.Selection.prototype.deselect.call(this,a)},deselectAll:function(b){var a=null;if(b||typeof b=="number"){if(typeof b=="number"||typeof b=="string"){a=b}else{a=this.grid.getItemIndex(b)}dojox.grid.Selection.prototype.deselectAll.call(this,a)}else{this.inherited(arguments)}}})}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},createSelection:function(){this.selection=new dojox.grid.DataSelection(this)},get:function(d,f){if(f&&this.field=="_item"&&!this.fields){return f}else{if(f&&this.fields){var a=[];var b=this.grid.store;dojo.forEach(this.fields,function(g){a=a.concat(b.getValues(f,g))});return a}}return(!f?this.defaultValue:(!this.field?this.value:(this.field=="_item"?f:this.grid.store.getValue(f,this.field))))},_checkUpdateStatus:function(){if(this.updateDelay>0){var a=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;a=true}if(!this.updating){this.beginUpdate();a=true}if(a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay;b.endUpdate()},this.updateDelay)}}},_onSet:function(g,f,d,b){this._checkUpdateStatus();var a=this.getItemIndex(g);if(a>-1){this.updateRow(a)}},_createItem:function(d,b){var a=this._hasIdentity?this.store.getIdentity(d):dojo.toJson(this.query)+":idx:"+b+":sort:"+dojo.toJson(this.getSortProps());var f=this._by_idty[a]={idty:a,item:d};return f},_addItem:function(d,b,a){this._by_idx[b]=this._createItem(d,b);if(!a){this.updateRow(b)}},_onNew:function(a,d){this._checkUpdateStatus();var b=this.attr("rowCount");this._addingItem=true;this.updateRowCount(b+1);this._addingItem=false;this._addItem(a,b);this.showMessage()},_onDelete:function(b){this._checkUpdateStatus();var a=this._getItemIndex(b,true);if(a>=0){this._pages=[];this._bop=-1;this._eop=-1;var d=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[d.idty];this.updateRowCount(this.attr("rowCount")-1);if(this.attr("rowCount")===0){this.showMessage(this.noDataMessage)}}},_onRevert:function(){this._refresh()},setStore:function(a,d,b){this._setQuery(d,b);this._setStore(a);this._refresh(true)},setQuery:function(b,a){this._setQuery(b,a);this._refresh(true)},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(true)},_setQuery:function(b,a){this.query=b;this.queryOptions=a||this.queryOptions},_setStore:function(a){if(this.store&&this._store_connects){dojo.forEach(this._store_connects,function(f){dojo.forEach(f,dojo.disconnect)})}this.store=a;if(this.store){var d=this.store.getFeatures();var b=[];this._canEdit=!!d["dojo.data.api.Write"]&&!!d["dojo.data.api.Identity"];this._hasIdentity=!!d["dojo.data.api.Identity"];if(!!d["dojo.data.api.Notification"]&&!this.items){b.push(this.connect(this.store,"onSet","_onSet"));b.push(this.connect(this.store,"onNew","_onNew"));b.push(this.connect(this.store,"onDelete","_onDelete"))}if(this._canEdit){b.push(this.connect(this.store,"revert","_onRevert"))}this._store_connects=b}},_onFetchBegin:function(a,b){if(!this.scroller){return}if(this.rowCount!=a){if(b.isRender){this.scroller.init(a,this.keepRows,this.rowsPerPage);this.rowCount=a;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false}else{this.updateRowCount(a)}}if(!a){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView()}else{this.showMessage()}},_onFetchComplete:function(a,b){if(!this.scroller){return}if(a&&a.length>0){dojo.forEach(a,function(f,d){this._addItem(f,b.start+d,true)},this);if(this._autoHeight){this._skipRowRenormalize=true}this.updateRows(b.start,a.length);if(this._autoHeight){this._skipRowRenormalize=false}if(b.isRender){this.setScrollTop(0);this.postrender()}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop)}}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true}this._pending_requests[b.start]=false},_onFetchError:function(b,a){delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage)}this._pending_requests[a.start]=false;this.onFetchError(b,a)},onFetchError:function(b,a){},_fetch:function(j,g){j=j||0;if(this.store&&!this._pending_requests[j]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage)}this._pending_requests[j]=true;try{if(this.items){var f=this.items;var d=this.store;this.rowsPerPage=f.length;var h={start:j,count:this.rowsPerPage,isRender:g};this._onFetchBegin(f.length,h);var b=0;dojo.forEach(f,function(k){if(!d.isItemLoaded(k)){b++}});if(b===0){this._onFetchComplete(f,h)}else{var a=function(k){b--;if(b===0){this._onFetchComplete(f,h)}};dojo.forEach(f,function(k){if(!d.isItemLoaded(k)){d.loadItem({item:k,onItem:a,scope:this})}},this)}}else{this.store.fetch({start:j,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:g,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")})}}catch(i){this._onFetchError(i,{start:j,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false},getItem:function(a){var b=this._by_idx[a];if(!b||(b&&!b.item)){this._preparePage(a);return null}return b.item},getItemIndex:function(a){return this._getItemIndex(a,false)},_getItemIndex:function(g,j){if(!j&&!this.store.isItem(g)){return-1}var a=this._hasIdentity?this.store.getIdentity(g):null;for(var f=0,b=this._by_idx.length;f<b;f++){var h=this._by_idx[f];if(h&&((a&&h.idty==a)||(h.item===g))){return f}}return-1},filter:function(b,a){this.query=b;if(a){this._clearData()}this._fetch()},_getItemAttr:function(b,a){var d=this.getItem(b);return(!d?this.fetchText:this.store.getValue(d,a))},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.attr("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true)}},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return(this.rowsPerPage?Math.floor(a/this.rowsPerPage):a)},_pageToRow:function(a){return(this.rowsPerPage?this.rowsPerPage*a:a)},_preparePage:function(b){if((b<this._bop||b>=this._eop)&&!this._addingItem){var a=this._rowToPage(b);this._needPage(a);this._bop=a*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.attr("rowCount"))}},_needPage:function(a){if(!this._pages[a]){this._pages[a]=true;this._requestPage(a)}},_requestPage:function(a){var d=this._pageToRow(a);var b=Math.min(this.rowsPerPage,this.attr("rowCount")-d);if(b>0){this._requests++;if(!this._requestsPending(d)){setTimeout(dojo.hitch(this,"_fetch",d,false),1)}}},getCellName:function(a){return a.field},_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return(!this._isLoading)},getSortProps:function(){var d=this.getCell(this.getSortIndex());if(!d){if(this.sortFields){return this.sortFields}return null}else{var b=d.sortDesc;var a=!(this.sortInfo>0);if(typeof b=="undefined"){b=a}else{b=a?!b:b}return[{attribute:d.field,descending:b}]}},styleRowState:function(g){if(this.store&&this.store.getState){var f=this.store.getState(g.index),h="";for(var b=0,a=["inflight","error","inserting"],d;d=a[b];b++){if(f[d]){h=" dojoxGridRow-"+d;break}}g.customClasses+=h}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(b,a){return this._canEdit},_copyAttr:function(b,a){var g={};var d={};var f=this.getItem(b);return this.store.getValue(f,a)},doStartEdit:function(b,a){if(!this._cache[a]){this._cache[a]=this._copyAttr(a,b.field)}this.onStartEdit(b,a)},doApplyCellEdit:function(d,b,a){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:dojo.hitch(this,function(h){var g=this.store.getValue(h,a);if(typeof g=="number"){d=isNaN(d)?d:parseFloat(d)}else{if(typeof g=="boolean"){d=d=="true"?true:d=="false"?false:d}else{if(g instanceof Date){var f=new Date(d);d=isNaN(f.getTime())?d:f}}}this.store.setValue(h,a,d);this.onApplyCellEdit(d,b,a)})})},doCancelEdit:function(b){var a=this._cache[b];if(a){this.updateRow(b);delete this._cache[b]}this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(d,b){var a=this._cache[d];this.onApplyEdit(d)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=dojo.hitch(this,function(b){if(b.length){dojo.forEach(b,this.store.deleteItem,this.store);this.selection.clear()}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a})}else{a(this.selection.getSelected())}}}});dojox.grid.DataGrid.cell_markupFactory=function(b,d,a){var f=dojo.trim(dojo.attr(d,"field")||"");if(f){a.field=f}a.field=a.field||a.name;var g=dojo.trim(dojo.attr(d,"fields")||"");if(g){a.fields=g.split(",")}if(b){b(d,a)}};dojox.grid.DataGrid.markupFactory=function(b,f,d,a){return dojox.grid._Grid.markupFactory(b,f,d,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,a))}}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{constructor:function(a){var b=this;dojo.mixin(b,a);b.node=a.node;b._showArgs=dojo.mixin({},a);b._showArgs.node=b.node;b._showArgs.duration=b.showDuration;b.showAnim=b.showFunc(b._showArgs);b._hideArgs=dojo.mixin({},a);b._hideArgs.node=b.node;b._hideArgs.duration=b.hideDuration;b.hideAnim=b.hideFunc(b._hideArgs);dojo.connect(b.showAnim,"beforeBegin",dojo.hitch(b.hideAnim,"stop",true));dojo.connect(b.hideAnim,"beforeBegin",dojo.hitch(b.showAnim,"stop",true))},node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}})}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var g=dojo,f={_fire:function(d,h){if(this[d]){this[d].apply(this,h||[])}return this}};var b=function(d){this._index=-1;this._animations=d||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;g.forEach(this._animations,function(h){this.duration+=h.duration;if(h.delay){this.duration+=h.delay}},this)};g.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){g.disconnect(this._onAnimateCtx);g.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd")}else{this._current=this._animations[++this._index];this._onAnimateCtx=g.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=g.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(h,k){if(!this._current){this._current=this._animations[this._index=0]}if(!k&&this._current.status()=="playing"){return this}var j=g.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),i=g.connect(this._current,"onBegin",this,function(l){this._fire("onBegin",arguments)}),d=g.connect(this._current,"onPlay",this,function(l){this._fire("onPlay",arguments);g.disconnect(j);g.disconnect(i);g.disconnect(d)});if(this._onAnimateCtx){g.disconnect(this._onAnimateCtx)}this._onAnimateCtx=g.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){g.disconnect(this._onEndCtx)}this._onEndCtx=g.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var d=g.connect(this._current,"onPause",this,function(h){this._fire("onPause",arguments);g.disconnect(d)});this._current.pause()}return this},gotoPercent:function(i,d){this.pause();var h=this.duration*i;this._current=null;g.some(this._animations,function(j){if(j.duration<=h){this._current=j;return true}h-=j.duration;return false});if(this._current){this._current.gotoPercent(h/this._current.duration,d)}return this},stop:function(d){if(this._current){if(d){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true)}this._current=this._animations[this._index]}var h=g.connect(this._current,"onStop",this,function(i){this._fire("onStop",arguments);g.disconnect(h)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){if(this._onAnimateCtx){g.disconnect(this._onAnimateCtx)}if(this._onEndCtx){g.disconnect(this._onEndCtx)}}});g.extend(b,f);dojo.fx.chain=function(d){return new b(d)};var a=function(d){this._animations=d||[];this._connects=[];this._finished=0;this.duration=0;g.forEach(d,function(i){var j=i.duration;if(i.delay){j+=i.delay}if(this.duration<j){this.duration=j}this._connects.push(g.connect(i,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new g._Animation({curve:[0,1],duration:this.duration});var h=this;g.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop"],function(i){h._connects.push(g.connect(h._pseudoAnimation,i,function(){h._fire(i,arguments)}))})};g.extend(a,{_doAction:function(d,h){g.forEach(this._animations,function(i){i[d].apply(i,h)});return this},_onEnd:function(){if(++this._finished==this._animations.length){this._fire("onEnd")}},_call:function(i,d){var h=this._pseudoAnimation;h[i].apply(h,d)},play:function(h,d){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(h,d){var i=this.duration*h;g.forEach(this._animations,function(j){j.gotoPercent(j.duration<i?1:(i/j.duration),d)});this._call("gotoPercent",arguments);return this},stop:function(d){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){g.forEach(this._connects,dojo.disconnect)}});g.extend(a,f);dojo.fx.combine=function(d){return new a(d)};dojo.fx.wipeIn=function(d){d.node=g.byId(d.node);var i=d.node,h=i.style,k;var j=g.animateProperty(g.mixin({properties:{height:{start:function(){k=h.overflow;h.overflow="hidden";if(h.visibility=="hidden"||h.display=="none"){h.height="1px";h.display="";h.visibility="";return 1}else{var l=g.style(i,"height");return Math.max(l,1)}},end:function(){return i.scrollHeight}}}},d));g.connect(j,"onEnd",function(){h.height="auto";h.overflow=k});return j};dojo.fx.wipeOut=function(d){var i=d.node=g.byId(d.node),h=i.style,k;var j=g.animateProperty(g.mixin({properties:{height:{end:1}}},d));g.connect(j,"beforeBegin",function(){k=h.overflow;h.overflow="hidden";h.display=""});g.connect(j,"onEnd",function(){h.overflow=k;h.height="auto";h.display="none"});return j};dojo.fx.slideTo=function(d){var h=d.node=g.byId(d.node),k=null,j=null;var l=(function(m){return function(){var o=g.getComputedStyle(m);var p=o.position;k=(p=="absolute"?m.offsetTop:parseInt(o.top)||0);j=(p=="absolute"?m.offsetLeft:parseInt(o.left)||0);if(p!="absolute"&&p!="relative"){var n=g.coords(m,true);k=n.y;j=n.x;m.style.position="absolute";m.style.top=k+"px";m.style.left=j+"px"}}})(h);l();var i=g.animateProperty(g.mixin({properties:{top:d.top||0,left:d.left||0}},d));g.connect(i,"beforeBegin",i,l);return i}})()}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],labelAttr:"",root:null,query:null,constructor:function(b){dojo.mixin(this,b);this.connects=[];var a=this.store;if(!a.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity")}if(a.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(a,"onNew",this,"_onNewItem"),dojo.connect(a,"onDelete",this,"_onDeleteItem"),dojo.connect(a,"onSet",this,"_onSetItem")])}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect)},getRoot:function(b,a){if(this.root){b(this.root)}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(d){if(d.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+d.length+" items, but must return exactly one item")}this.root=d[0];b(this.root)}),onError:a})}},mayHaveChildren:function(a){return dojo.some(this.childrenAttrs,function(b){return this.store.hasAttribute(a,b)},this)},getChildren:function(h,f,d){var k=this.store;var l=[];for(var a=0;a<this.childrenAttrs.length;a++){var g=k.getValues(h,this.childrenAttrs[a]);l=l.concat(g)}var j=0;dojo.forEach(l,function(i){if(!k.isItemLoaded(i)){j++}});if(j==0){f(l)}else{var b=function b(i){if(--j==0){f(l)}};dojo.forEach(l,function(i){if(!k.isItemLoaded(i)){k.loadItem({item:i,onItem:b,onError:d})}})}},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){if(this.labelAttr){return this.store.getValue(a,this.labelAttr)}else{return this.store.getLabel(a)}},newItem:function(a,d){var b={parent:d,attribute:this.childrenAttrs[0]};return this.store.newItem(a,b)},pasteItem:function(i,h,f,b,j){var d=this.store,g=this.childrenAttrs[0];if(h){dojo.forEach(this.childrenAttrs,function(k){if(d.containsValue(h,k,i)){if(!b){var l=dojo.filter(d.getValues(h,k),function(m){return m!=i});d.setValues(h,k,l)}g=k}})}if(f){if(typeof j=="number"){var a=d.getValues(f,g);a.splice(j,0,i);d.setValues(f,g,a)}else{d.setValues(f,g,d.getValues(f,g).concat(i))}}},onChange:function(a){},onChildrenChange:function(b,a){},onDelete:function(b,a){},_onNewItem:function(b,a){if(!a){return}this.getChildren(a.item,dojo.hitch(this,function(d){this.onChildrenChange(a.item,d)}))},_onDeleteItem:function(a){this.onDelete(a)},_onSetItem:function(f,d,b,a){if(dojo.indexOf(this.childrenAttrs,d)!=-1){this.getChildren(f,dojo.hitch(this,function(g){this.onChildrenChange(f,g)}))}else{this.onChange(f)}}})}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:true,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(d,b,a){if(d===this.root){if(this.root.children){b(this.root.children)}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(f){this.root.children=f;b(f)}),onError:a})}}else{this.inherited(arguments)}},getIdentity:function(a){return(a===this.root)?this.root.id:this.inherited(arguments)},getLabel:function(a){return(a===this.root)?this.root.label:this.inherited(arguments)},newItem:function(a,b){if(b===this.root){this.onNewRootItem(a);return this.store.newItem(a)}else{return this.inherited(arguments)}},onNewRootItem:function(a){},pasteItem:function(g,f,d,a,b){if(f===this.root){if(!a){this.onLeaveRoot(g)}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,g,f===this.root?null:f,d===this.root?null:d,a,b);if(d===this.root){this.onAddToRoot(g)}},onAddToRoot:function(a){},onLeaveRoot:function(a){},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||dojo.some(a,function(f,d){return b[d]!=f})){this.onChildrenChange(this.root,b)}})})},_onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},_onDeleteItem:function(a){if(dojo.indexOf(this.root.children,a)!=-1){this._requeryTop()}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:'<div class="dijitTreeNode" waiRole="presentation"\r\n\t><div dojoAttachPoint="rowNode" class="dijitTreeRow" waiRole="presentation" dojoAttachEvent="onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave"\r\n\t\t><img src="${_blankGif}" alt="" dojoAttachPoint="expandoNode" class="dijitTreeExpando" waiRole="presentation"\r\n\t\t><span dojoAttachPoint="expandoNodeText" class="dijitExpandoText" waiRole="presentation"\r\n\t\t></span\r\n\t\t><span dojoAttachPoint="contentNode"\r\n\t\t\tclass="dijitTreeContent" waiRole="presentation">\r\n\t\t\t<img src="${_blankGif}" alt="" dojoAttachPoint="iconNode" class="dijitTreeIcon" waiRole="presentation"\r\n\t\t\t><span dojoAttachPoint="labelNode" class="dijitTreeLabel" wairole="treeitem" tabindex="-1" waiState="selected-false" dojoAttachEvent="onfocus:_onLabelFocus, onblur:_onLabelBlur"></span>\r\n\t\t</span\r\n\t></div>\r\n\t<div dojoAttachPoint="containerNode" class="dijitTreeContainer" waiRole="presentation" style="display: none;"></div>\r\n</div>\r\n',postCreate:function(){this.setLabelNode(this.label);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);if(this==this.tree.rootNode){dijit.setWaitState(this.tree.domNode,"expanded",this.isExpanded)}}},_setIndentAttr:function(b){this.indent=b;var a=(Math.max(b,0)*19)+"px";dojo.style(this.domNode,"backgroundPosition",a+" 0px");dojo.style(this.rowNode,dojo._isBodyLtr()?"paddingLeft":"paddingRight",a);dojo.forEach(this.getChildren(),function(d){d.attr("indent",b+1)})},markProcessing:function(){this.state="LOADING";this._setExpando(true)},unmarkProcessing:function(){this._setExpando(false)},_updateItemClasses:function(d){var a=this.tree,b=a.model;if(a._v10Compat&&d===b.root){d=null}if(this._iconClass){dojo.removeClass(this.iconNode,this._iconClass)}this._iconClass=a.getIconClass(d,this.isExpanded);if(this._iconClass){dojo.addClass(this.iconNode,this._iconClass)}dojo.style(this.iconNode,a.getIconStyle(d,this.isExpanded)||{});if(this._labelClass){dojo.removeClass(this.labelNode,this._labelClass)}this._labelClass=a.getLabelClass(d,this.isExpanded);if(this._labelClass){dojo.addClass(this.labelNode,this._labelClass)}dojo.style(this.labelNode,a.getLabelStyle(d,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();if(!a||a.rowNode.style.display=="none"){dojo.addClass(this.domNode,"dijitTreeIsRoot")}else{dojo.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling())}},_setExpando:function(f){var d=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];var b=["*","-","+","*"];var a=f?0:(this.isExpandable?(this.isExpanded?1:2):3);dojo.forEach(d,function(g){dojo.removeClass(this.expandoNode,g)},this);dojo.addClass(this.expandoNode,d[a]);this.expandoNodeText.innerHTML=b[a]},expand:function(){if(this.isExpanded){return}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");dijit.setWaiRole(this.containerNode,"group");dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","true")}if(!this._wipeIn){this._wipeIn=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration})}this._wipeIn.play()},collapse:function(){if(!this.isExpanded){return}this._wipeIn&&this._wipeIn.stop();this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","false")}dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration})}this._wipeOut.play()},setLabelNode:function(a){this.labelNode.innerHTML="";this.labelNode.appendChild(dojo.doc.createTextNode(a))},indent:0,setChildItems:function(b){var a=this.tree,d=a.model;this.getChildren().forEach(function(g){dijit._Container.prototype.removeChild.call(this,g)},this);this.state="LOADED";if(b&&b.length>0){this.isExpandable=true;dojo.forEach(b,function(i){var j=d.getIdentity(i),g=a._itemNodeMap[j],h=(g&&!g.getParent())?g:this.tree._createTreeNode({item:i,tree:a,isExpandable:d.mayHaveChildren(i),label:a.getLabel(i),indent:this.indent+1});if(g){g.attr("indent",this.indent+1)}this.addChild(h);a._itemNodeMap[j]=h;if(this.tree._state(i)){a._expandNode(h)}},this);dojo.forEach(this.getChildren(),function(h,g){h._updateLayout()})}else{this.isExpandable=false}if(this._setExpando){this._setExpando(false)}if(this==a.rootNode){var f=this.tree.showRoot?this:this.getChildren()[0];if(f){f.setSelected(true);a.lastFocused=f}else{a.domNode.setAttribute("tabIndex","0")}}},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();if(b.length==0){this.isExpandable=false;this.collapse()}dojo.forEach(b,function(d){d._updateLayout()})},makeExpandable:function(){this.isExpandable=true;this._setExpando(false)},_onLabelFocus:function(a){dojo.addClass(this.labelNode,"dijitTreeLabelFocused");this.tree._onNodeFocus(this)},_onLabelBlur:function(a){dojo.removeClass(this.labelNode,"dijitTreeLabelFocused")},setSelected:function(b){var a=this.labelNode;a.setAttribute("tabIndex",b?"0":"-1");dijit.setWaiState(a,"selected",b);dojo.toggleClass(this.rowNode,"dijitTreeNodeSelected",b)},_onMouseEnter:function(a){dojo.addClass(this.rowNode,"dijitTreeNodeHover");this.tree._onNodeMouseEnter(this,a)},_onMouseLeave:function(a){dojo.removeClass(this.rowNode,"dijitTreeNodeHover");this.tree._onNodeMouseLeave(this,a)}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],openOnClick:false,openOnDblClick:false,templateString:'<div class="dijitTreeContainer" waiRole="tree"\r\n\tdojoAttachEvent="onclick:_onClick,onkeypress:_onKeyPress,ondblclick:_onDblClick">\r\n</div>\r\n',isExpandable:true,isTree:true,persist:true,dndController:null,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:0,betweenThreshold:0,_publish:function(b,a){dojo.publish(this.id,[dojo.mixin({tree:this,event:b},a||{})])},postMixInProperties:function(){this.tree=this;this._itemNodeMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie"}},postCreate:function(){this._initState();if(!this.model){this._store2model()}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController)){this.dndController=dojo.getObject(this.dndController)}var a={};for(var b=0;b<this.dndParams.length;b++){if(this[this.dndParams[b]]){a[this.dndParams[b]]=this[this.dndParams[b]]}}this.dndController=new this.dndController(this,a)}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){a.mayHaveChildren=dojo.hitch(this,"mayHaveChildren")}if(this.params.getItemChildren){a.getChildren=dojo.hitch(this,function(f,d,b){this.getItemChildren((this._v10Compat&&f===this.model.root)?null:f,d,b)})}this.model=new dijit.tree.ForestStoreModel(a);this.showRoot=Boolean(this.label)},_load:function(){this.model.getRoot(dojo.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:true,label:this.label||this.getLabel(a),indent:this.showRoot?0:-1});if(!this.showRoot){b.rowNode.style.display="none"}this.domNode.appendChild(b.domNode);this._itemNodeMap[this.model.getIdentity(a)]=b;b._updateLayout();this._expandNode(b)}),function(a){console.error(this,": error loading root: ",a)})},mayHaveChildren:function(a){},getItemChildren:function(b,a){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return(!a||this.model.mayHaveChildren(a))?(b?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf"},getLabelClass:function(b,a){},getIconStyle:function(b,a){},getLabelStyle:function(b,a){},_onKeyPress:function(g){if(g.altKey){return}var d=dojo.keys;var a=dijit.getEnclosingWidget(g.target);if(!a){return}var b=g.charOrCode;if(typeof b=="string"){if(!g.altKey&&!g.ctrlKey&&!g.shiftKey&&!g.metaKey){this._onLetterKeyNav({node:a,key:b.toLowerCase()});dojo.stopEvent(g)}}else{var f=this._keyHandlerMap;if(!f){f={};f[d.ENTER]="_onEnterKey";f[this.isLeftToRight()?d.LEFT_ARROW:d.RIGHT_ARROW]="_onLeftArrow";f[this.isLeftToRight()?d.RIGHT_ARROW:d.LEFT_ARROW]="_onRightArrow";f[d.UP_ARROW]="_onUpArrow";f[d.DOWN_ARROW]="_onDownArrow";f[d.HOME]="_onHomeKey";f[d.END]="_onEndKey";this._keyHandlerMap=f}if(this._keyHandlerMap[b]){this[this._keyHandlerMap[b]]({node:a,item:a.item});dojo.stopEvent(g)}}},_onEnterKey:function(a){this._publish("execute",{item:a.item,node:a.node});this.onClick(a.item,a.node)},_onDownArrow:function(b){var a=this._getNextNode(b.node);if(a&&a.isTreeNode){this.focusNode(a)}},_onUpArrow:function(b){var a=b.node;var g=a.getPreviousSibling();if(g){a=g;while(a.isExpandable&&a.isExpanded&&a.hasChildren()){var f=a.getChildren();a=f[f.length-1]}}else{var d=a.getParent();if(!(!this.showRoot&&d===this.rootNode)){a=d}}if(a&&a.isTreeNode){this.focusNode(a)}},_onRightArrow:function(b){var a=b.node;if(a.isExpandable&&!a.isExpanded){this._expandNode(a)}else{if(a.hasChildren()){a=a.getChildren()[0];if(a&&a.isTreeNode){this.focusNode(a)}}}},_onLeftArrow:function(d){var b=d.node;if(b.isExpandable&&b.isExpanded){this._collapseNode(b)}else{var a=b.getParent();if(a&&a.isTreeNode&&!(!this.showRoot&&a===this.rootNode)){this.focusNode(a)}}},_onHomeKey:function(){var a=this._getRootOrFirstNode();if(a){this.focusNode(a)}},_onEndKey:function(a){var b=this.rootNode;while(b.isExpanded){var d=b.getChildren();b=d[d.length-1]}if(b&&b.isTreeNode){this.focusNode(b)}},_onLetterKeyNav:function(f){var b=f.node,d=b,a=f.key;do{b=this._getNextNode(b);if(!b){b=this._getRootOrFirstNode()}}while(b!==d&&(b.label.charAt(0).toLowerCase()!=a));if(b&&b.isTreeNode){if(b!==d){this.focusNode(b)}}},_onClick:function(a){var d=a.target;var b=dijit.getEnclosingWidget(d);if(!b||!b.isTreeNode){return}if((this.openOnClick&&b.isExpandable)||(d==b.expandoNode||d==b.expandoNodeText)){if(b.isExpandable){this._onExpandoClick({node:b})}}else{this._publish("execute",{item:b.item,node:b});this.onClick(b.item,b);this.focusNode(b)}dojo.stopEvent(a)},_onDblClick:function(d){var a=d.target;var b=dijit.getEnclosingWidget(a);if(!b||!b.isTreeNode){return}if((this.openOnDblClick&&b.isExpandable)||(a==b.expandoNode||a==b.expandoNodeText)){if(b.isExpandable){this._onExpandoClick({node:b})}}else{this._publish("execute",{item:b.item,node:b});this.onDblClick(b.item,b);this.focusNode(b)}dojo.stopEvent(d)},_onExpandoClick:function(b){var a=b.node;this.focusNode(a);if(a.isExpanded){this._collapseNode(a)}else{this._expandNode(a)}},onClick:function(b,a){},onDblClick:function(b,a){},onOpen:function(b,a){},onClose:function(b,a){},_getNextNode:function(b){if(b.isExpandable&&b.isExpanded&&b.hasChildren()){return b.getChildren()[0]}else{while(b&&b.isTreeNode){var a=b.getNextSibling();if(a){return a}b=b.getParent()}return null}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_collapseNode:function(a){if(a.isExpandable){if(a.state=="LOADING"){return}a.collapse();this.onClose(a.item,a);if(a.item){this._state(a.item,false);this._saveState()}}},_expandNode:function(d){if(!d.isExpandable){return}var a=this.model,b=d.item;switch(d.state){case"LOADING":return;case"UNCHECKED":d.markProcessing();var f=this;a.getChildren(b,function(g){d.unmarkProcessing();d.setChildItems(g);f._expandNode(d)},function(g){console.error(f,": error loading root children: ",g)});break;default:d.expand();this.onOpen(d.item,d);if(b){this._state(b,true);this._saveState()}}},focusNode:function(a){a.labelNode.focus()},_onNodeFocus:function(a){if(a){if(a!=this.lastFocused){this.lastFocused.setSelected(false)}a.setSelected(true);this.lastFocused=a}},_onNodeMouseEnter:function(a){},_onNodeMouseLeave:function(a){},_onItemChange:function(f){var a=this.model,b=a.getIdentity(f),d=this._itemNodeMap[b];if(d){d.setLabelNode(this.getLabel(f));d._updateItemClasses(f)}},_onItemChildrenChange:function(g,d){var f=this.model,a=f.getIdentity(g),b=this._itemNodeMap[a];if(b){b.setChildItems(d)}},_onItemDelete:function(d){var a=this.model,g=a.getIdentity(d),b=this._itemNodeMap[g];if(b){var f=b.getParent();if(f){f.removeChild(b)}b.destroyRecursive();delete this._itemNodeMap[g]}},_initState:function(){if(this.persist){var a=dojo.cookie(this.cookieName);this._openedItemIds={};if(a){dojo.forEach(a.split(","),function(b){this._openedItemIds[b]=true},this)}}},_state:function(b,a){if(!this.persist){return false}var d=this.model.getIdentity(b);if(arguments.length===1){return this._openedItemIds[d]}if(a){this._openedItemIds[d]=true}else{delete this._openedItemIds[d]}},_saveState:function(){if(!this.persist){return}var a=[];for(var b in this._openedItemIds){a.push(b)}dojo.cookie(this.cookieName,a.join(","),{expires:365})},destroy:function(){if(this.rootNode){this.rootNode.destroyRecursive()}if(this.dndController&&!dojo.isString(this.dndController)){this.dndController.destroy()}this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},_createTreeNode:function(a){return new dijit._TreeNode(a)}})}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var a=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(d,b){if(!b){b={}}if(b.timeout&&typeof b.timeout=="number"&&b.timeout>=0){this.timeout=b.timeout}},markupFactory:function(b,d){return new dojo.dnd.TimedMoveable(d,b)},onMoveStop:function(b){if(b._timer){clearTimeout(b._timer);a.call(this,b,b._leftTop)}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,f){b._leftTop=f;if(!b._timer){var d=this;b._timer=setTimeout(function(){b._timer=null;a.call(d,b,b._leftTop)},this.timeout)}}})})()}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(a){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"))},_getFocusItems:function(b){var a=dijit._getTabNavigable(dojo.byId(b));this._firstFocusItem=a.lowest||a.first||b;this._lastFocusItem=a.last||a.highest||this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.attr(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(b,"tabindex","0");this._firstFocusItem=b}}})}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(a){dojo.attr(this.node,"id",a+"_underlay")},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a},postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode)},layout:function(){var b=this.node.style,d=this.domNode.style;d.display="none";var a=dijit.getViewport();d.top=a.t+"px";d.left=a.l+"px";b.width=a.w+"px";b.height=a.h+"px";d.display="block"},show:function(){this.domNode.style.display="block";this.layout();if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="block"}},hide:function(){this.domNode.style.display="none";if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="none"}},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy()}}})}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:null,templateString:'<div waiRole="presentation">\r\n\t<div class="dijitTooltipContainer" waiRole="presentation">\r\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" tabindex="-1" waiRole="dialog"></div>\r\n\t</div>\r\n\t<div class="dijitTooltipConnector" waiRole="presentation"></div>\r\n</div>\r\n',postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title},orient:function(d,b,a){var f=this._currentOrientClass;if(f){dojo.removeClass(this.domNode,f)}f="dijitTooltipAB"+(a.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(a.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,f);this._currentOrientClass=f},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem)}},_onKey:function(a){var f=a.target;var b=dojo.keys;if(a.charOrCode===b.TAB){this._getFocusItems(this.containerNode)}var d=(this._firstFocusItem==this._lastFocusItem);if(a.charOrCode==b.ESCAPE){this.onCancel();dojo.stopEvent(a)}else{if(f==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){if(!d){dijit.focus(this._lastFocusItem)}dojo.stopEvent(a)}else{if(f==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){if(!d){dijit.focus(this._firstFocusItem)}dojo.stopEvent(a)}else{if(a.charOrCode===b.TAB){a.stopPropagation()}}}}}})}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:null,templateString:'<div class="dijitDialog" tabindex="-1" waiRole="dialog" waiState="labelledby-${id}_title">\r\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\r\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\r\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave" title="${buttonCancel}">\r\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\r\n\t</span>\r\n\t</div>\r\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\r\n</div>\r\n',attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}]}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_fixSizes:true,postMixInProperties:function(){var a=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,a);this.inherited(arguments)},postCreate:function(){dojo.style(this.domNode,{visibility:"hidden",position:"absolute",display:"",top:"-9999px"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.inherited(arguments)},_endDrag:function(d){if(d&&d.node&&d.node===this.domNode){var a=dijit.getViewport();var b=d._leftTop||dojo.coords(d.node,true);this._relativePosition={t:b.t-a.t,l:b.l-a.l}}},_setup:function(){var d=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(d,{handle:this.titleBar}):new dojo.dnd.Moveable(d,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag")}else{dojo.addClass(d,"dijitDialogFixed")}var b={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(f){return f+"_underlay"}).join(" ")};var a=dijit._underlay;if(!a){a=dijit._underlay=new dijit.DialogUnderlay(b)}this._fadeIn=dojo.fadeIn({node:d,duration:this.duration,beforeBegin:function(){a.attr(b);a.show()},onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}})});this._fadeOut=dojo.fadeOut({node:d,duration:this.duration,onEnd:function(){d.style.visibility="hidden";d.style.top="-9999px";dijit._underlay.hide()}})},uninitialize:function(){var a=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){a=true;this._fadeIn.stop()}if(this._fadeOut&&this._fadeOut.status()=="playing"){a=true;this._fadeOut.stop()}if(this.open||a){dijit._underlay.hide()}if(this._moveable){this._moveable.destroy()}},_size:function(){var b=dojo.marginBox(this.domNode);var a=dijit.getViewport();if(b.w>=a.w||b.h>=a.h){dojo.style(this.containerNode,{width:Math.min(b.w,Math.floor(a.w*0.75))+"px",height:Math.min(b.h,Math.floor(a.h*0.75))+"px",overflow:"auto",position:"relative"})}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var a=this.domNode;var f=dijit.getViewport();var b=this._relativePosition;var d=b?null:dojo.marginBox(a);dojo.style(a,{left:Math.floor(f.l+(b?b.l:(f.w-d.w)/2))+"px",top:Math.floor(f.t+(b?b.t:(f.h-d.h)/2))+"px"})}},_onKey:function(a){if(a.charOrCode){var b=dojo.keys;var d=a.target;if(a.charOrCode===b.TAB){this._getFocusItems(this.domNode)}var g=(this._firstFocusItem==this._lastFocusItem);if(d==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){if(!g){dijit.focus(this._lastFocusItem)}dojo.stopEvent(a)}else{if(d==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){if(!g){dijit.focus(this._firstFocusItem)}dojo.stopEvent(a)}else{while(d){if(d==this.domNode){if(a.charOrCode==b.ESCAPE){this.onCancel()}else{return}}d=d.parentNode}if(a.charOrCode!==b.TAB){dojo.stopEvent(a)}else{if(!dojo.isOpera){try{this._firstFocusItem.focus()}catch(f){}}}}}}},show:function(){if(this.open){return}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}if(this._fadeOut.status()=="playing"){this._fadeOut.stop()}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var a=dijit.getViewport();if(!this._oldViewport||a.h!=this._oldViewport.h||a.w!=this._oldViewport.w){this.layout();this._oldViewport=a}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,visibility:""});if(this._fixSizes){dojo.style(this.containerNode,{width:"auto",height:"auto"})}this.open=true;this._onShow();this._size();this._position();this._fadeIn.play();this._savedFocus=dijit.getFocus(this)},hide:function(){if(!this._alreadyInitialized){return}if(this._fadeIn.status()=="playing"){this._fadeIn.stop()}this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this.refocus){this.connect(this._fadeOut,"onEnd",dojo.hitch(dijit,"focus",this._savedFocus))}if(this._relativePosition){delete this._relativePosition}this.open=false},layout:function(){if(this.domNode.style.visibility!="hidden"){dijit._underlay.layout();this._position()}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);if(this.refocus&&this.open){setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25)}this.inherited(arguments)},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover")},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover")}})}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(h,f,d){if(window[h]){return window[h]}if(window.frames[h]){return window.frames[h]}var b=null;var g=d;if(!g){if(dojo.config.useXDomain&&!dojo.config.dojoBlankHtmlUrl){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html")}g=(dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html"))}var a=dojo.place('<iframe id="'+h+'" name="'+h+'" src="'+g+'" onload="'+f+'" style="position:absolute;left:1px;top:1px;height:1px;width:1px;visibility:hidden">',dojo.body());window[h]=a;return a},setSrc:function(d,g,b){try{if(!b){if(dojo.isWebKit){d.location=g}else{frames[d.name].location=g}}else{var a;if(dojo.isIE||dojo.isWebKit>521){a=d.contentWindow.document}else{if(dojo.isSafari){a=d.document}else{a=d.contentWindow}}if(!a){d.location=g;return}else{a.location.replace(g)}}}catch(f){}},doc:function(b){var a=b.contentDocument||(((b.name)&&(b.document)&&(document.getElementsByTagName("iframe")[b.name].contentWindow)&&(document.getElementsByTagName("iframe")[b.name].contentWindow.document)))||((b.name)&&(document.frames[b.name])&&(document.frames[b.name].document))||null;return a},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();")}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext()},function(dfd){var value=null;try{var _162d=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _1630=_162d.handleAs;value=ifd;if(_1630!="html"){if(_1630=="xml"){if(dojo.isIE){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _1631=(dii._frame.contentWindow.document).documentElement.innerText;_1631=_1631.replace(/>\s+</g,"><");_1631=dojo.trim(_1631);var _1632={responseText:_1631};value=dojo._contentHandlers.xml(_1632)}}else{value=ifd.getElementsByTagName("textarea")[0].value;if(_1630=="json"){value=dojo.fromJson(value)}else{if(_1630=="javascript"){value=dojo.eval(value)}}}}}catch(e){value=e}finally{_162d._callNext()}return value},function(error,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return error});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest()}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return!dfd.ioArgs._hasError},function(dfd){return(!!dfd.ioArgs._finished)},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd)}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"))}});return dfd},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return}var q=this._currentDfd=this._dfdQueue.shift();var j=q.ioArgs;var m=j.args;j._contentToClean=[];var o=dojo.byId(m.form);var n=m.content||{};if(o){if(n){var l=function(i,s){dojo.create("input",{type:"hidden",name:i,value:s},o);j._contentToClean.push(i)};for(var p in n){var b=n[p];if(dojo.isArray(b)&&b.length>1){var h;for(h=0;h<b.length;h++){l(p,b[h])}}else{if(!o[p]){l(p,b)}else{o[p].value=b}}}}var g=o.getAttributeNode("action");var f=o.getAttributeNode("method");var d=o.getAttributeNode("target");if(m.url){j._originalAction=g?g.value:null;if(g){g.value=m.url}else{o.setAttribute("action",m.url)}}if(!f||!f.value){if(f){f.value=(m.method)?m.method:"post"}else{o.setAttribute("method",(m.method)?m.method:"post")}}j._originalTarget=d?d.value:null;if(d){d.value=this._iframeName}else{o.setAttribute("target",this._iframeName)}o.target=this._iframeName;o.submit()}else{var a=m.url+(m.url.indexOf("?")>-1?"&":"?")+j.query;this.setSrc(this._frame,a,true)}}catch(k){q.errback(k)}},_iframeOnload:function(){var m=this._currentDfd;if(!m){this._fireNextRequest();return}var a=m.ioArgs;var h=a.args;var k=dojo.byId(h.form);if(k){var d=a._contentToClean;for(var g=0;g<d.length;g++){var l=d[g];for(var f=0;f<k.childNodes.length;f++){var b=k.childNodes[f];if(b.name==l){dojo.destroy(b);break}}}if(a._originalAction){k.setAttribute("action",a._originalAction)}if(a._originalTarget){k.setAttribute("target",a._originalTarget);k.target=a._originalTarget}}a._finished=true}}}if(!dojo._hasResource["dojox.timing._base"]){dojo._hasResource["dojox.timing._base"]=true;dojo.provide("dojox.timing._base");dojo.experimental("dojox.timing");dojox.timing.Timer=function(a){this.timer=null;this.isRunning=false;this.interval=a;this.onStart=null;this.onStop=null};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(a){if(this.isRunning){window.clearInterval(this.timer)}this.interval=a;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval)}},start:function(){if(typeof this.onStart=="function"){this.onStart()}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval)},stop:function(){if(typeof this.onStop=="function"){this.onStop()}this.isRunning=false;window.clearInterval(this.timer)}})}if(!dojo._hasResource["dojox.fx._core"]){dojo._hasResource["dojox.fx._core"]=true;dojo.provide("dojox.fx._core");dojox.fx._Line=function(g,a){this.start=g;this.end=a;var b=dojo.isArray(g),f=(b?[]:a-g);if(b){dojo.forEach(this.start,function(h,d){f[d]=this.end[d]-h},this);this.getValue=function(h){var d=[];dojo.forEach(this.start,function(k,j){d[j]=(f[j]*h)+k},this);return d}}else{this.getValue=function(d){return(f*d)+this.start}}}}if(!dojo._hasResource["dojox.fx.scroll"]){dojo._hasResource["dojox.fx.scroll"]=true;dojo.provide("dojox.fx.scroll");dojo.experimental("dojox.fx.scroll");dojox.fx.smoothScroll=function(b){if(!b.target){b.target=dojo.coords(b.node,true)}var a=dojo[(dojo.isIE?"isObject":"isFunction")](b.win.scrollTo);var d=(a)?(function(g){b.win.scrollTo(g[0],g[1])}):(function(g){b.win.scrollLeft=g[0];b.win.scrollTop=g[1]});var f=new dojo._Animation(dojo.mixin({beforeBegin:function(){if(this.curve){delete this.curve}var g=a?dojo._docScroll():{x:b.win.scrollLeft,y:b.win.scrollTop};f.curve=new dojox.fx._Line([g.x,g.y],[b.target.x,b.target.y])},onAnimate:d},b));return f}}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a=a*2;if(a<1){return Math.pow(a,2)/2}return-1*((--a)*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a=a*2;if(a<1){return Math.pow(a,3)/2}a-=2;return(Math.pow(a,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a=a*2;if(a<1){return Math.pow(a,4)/2}a-=2;return-1/2*(Math.pow(a,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a=a*2;if(a<1){return Math.pow(a,5)/2}a-=2;return(Math.pow(a,5)+2)/2},sineIn:function(a){return-1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*(Math.PI/2))},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return(a==0)?0:Math.pow(2,10*(a-1))},expoOut:function(a){return(a==1)?1:(-1*Math.pow(2,-10*a)+1)},expoInOut:function(a){if(a==0){return 0}if(a==1){return 1}a=a*2;if(a<1){return Math.pow(2,10*(a-1))/2}--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){a=a-1;return Math.sqrt(1-Math.pow(a,2))},circInOut:function(a){a=a*2;if(a<1){return-1/2*(Math.sqrt(1-Math.pow(a,2))-1)}a-=2;return 1/2*(Math.sqrt(1-Math.pow(a,2))+1)},backIn:function(b){var a=1.70158;return Math.pow(b,2)*((a+1)*b-a)},backOut:function(b){b=b-1;var a=1.70158;return Math.pow(b,2)*((a+1)*b+a)+1},backInOut:function(b){var a=1.70158*1.525;b=b*2;if(b<1){return(Math.pow(b,2)*((a+1)*b-a))/2}b-=2;return(Math.pow(b,2)*((a+1)*b+a)+2)/2},elasticIn:function(d){if(d==0||d==1){return d}var b=0.3;var a=b/4;d=d-1;return-1*Math.pow(2,10*d)*Math.sin((d-a)*(2*Math.PI)/b)},elasticOut:function(d){if(d==0||d==1){return d}var b=0.3;var a=b/4;return Math.pow(2,-10*d)*Math.sin((d-a)*(2*Math.PI)/b)+1},elasticInOut:function(d){if(d==0){return 0}d=d*2;if(d==2){return 1}var b=0.3*1.5;var a=b/4;if(d<1){d-=1;return-0.5*(Math.pow(2,10*d)*Math.sin((d-a)*(2*Math.PI)/b))}d-=1;return 0.5*(Math.pow(2,-10*d)*Math.sin((d-a)*(2*Math.PI)/b))+1},bounceIn:function(a){return(1-dojo.fx.easing.bounceOut(1-a))},bounceOut:function(f){var b=7.5625;var d=2.75;var a;if(f<(1/d)){a=b*Math.pow(f,2)}else{if(f<(2/d)){f-=(1.5/d);a=b*Math.pow(f,2)+0.75}else{if(f<(2.5/d)){f-=(2.25/d);a=b*Math.pow(f,2)+0.9375}else{f-=(2.625/d);a=b*Math.pow(f,2)+0.984375}}}return a},bounceInOut:function(a){if(a<0.5){return dojo.fx.easing.bounceIn(a*2)/2}return(dojo.fx.easing.bounceOut(a*2-1)/2)+0.5}}}if(!dojo._hasResource["dojox.fx.split"]){dojo._hasResource["dojox.fx.split"]=true;dojo.provide("dojox.fx.split");dojo.mixin(dojox.fx,{_split:function(l){l.rows=l.rows||3;l.columns=l.columns||3;l.duration=l.duration||1000;var a=l.node=dojo.byId(l.node),m=dojo.coords(a,true),k=Math.ceil(m.h/l.rows),j=Math.ceil(m.w/l.columns),h=dojo.create(a.tagName),f=[],d=dojo.create(a.tagName),p;dojo.style(h,{position:"absolute",padding:"0",margin:"0",border:"none",top:m.y+"px",left:m.x+"px",height:m.h+"px",width:m.w+"px",background:"none",overflow:l.crop?"hidden":"visible"});a.parentNode.appendChild(h);dojo.style(d,{position:"absolute",border:"none",padding:"0",margin:"0",height:k+"px",width:j+"px",overflow:"hidden"});for(var n=0;n<l.rows;n++){for(var o=0;o<l.columns;o++){p=dojo.clone(d);var i=dojo.clone(a);i.style.filter="";dojo.style(p,{border:"none",overflow:"hidden",top:(k*n)+"px",left:(j*o)+"px"});dojo.style(i,{position:"static",opacity:"1",marginTop:(-n*k)+"px",marginLeft:(-o*j)+"px"});p.appendChild(i);h.appendChild(p);var g=l.pieceAnimation(p,o,n,m);if(dojo.isArray(g)){f=f.concat(g)}else{f.push(g)}}}var b=dojo.fx.combine(f);dojo.connect(b,"onEnd",b,function(){h.parentNode.removeChild(h)});if(l.onPlay){dojo.connect(b,"onPlay",b,l.onPlay)}if(l.onEnd){dojo.connect(b,"onEnd",b,l.onEnd)}return b},explode:function(a){var b=a.node=dojo.byId(a.node);a.rows=a.rows||3;a.columns=a.columns||3;a.distance=a.distance||1;a.duration=a.duration||1000;a.random=a.random||0;if(!a.fade){a.fade=true}if(typeof a.sync=="undefined"){a.sync=true}a.random=Math.abs(a.random);a.pieceAnimation=function(l,o,n,B){var z=B.h/a.rows,u=B.w/a.columns,t=a.distance*2,q=a.duration,w=l.style,p=parseInt(w.top),C=parseInt(w.left),D=0,A=0,v=0;if(a.random){var m=(Math.random()*a.random)+Math.max(1-a.random,0);t*=m;q*=m;D=((a.unhide&&a.sync)||(!a.unhide&&!a.sync))?(a.duration-q):0;A=Math.random()-0.5;v=Math.random()-0.5}var s=((B.h-z)/2-z*n),k=((B.w-u)/2-u*o),j=Math.sqrt(Math.pow(k,2)+Math.pow(s,2)),i=parseInt(p-s*t+j*v),h=parseInt(C-k*t+j*A);var g=dojo.animateProperty({node:l,duration:q,delay:D,easing:(a.easing||(a.unhide?dojo.fx.easing.sinOut:dojo.fx.easing.circOut)),beforeBegin:(a.unhide?function(){if(a.fade){dojo.style(l,{opacity:"0"})}w.top=i+"px";w.left=h+"px"}:undefined),properties:{top:(a.unhide?{start:i,end:p}:{start:p,end:i}),left:(a.unhide?{start:h,end:C}:{start:C,end:h})}});if(a.fade){var f=dojo.animateProperty({node:l,duration:q,delay:D,easing:(a.fadeEasing||dojo.fx.easing.quadOut),properties:{opacity:(a.unhide?{start:"0",end:"1"}:{start:"1",end:"0"})}});return(a.unhide?[f,g]:[g,f])}else{return g}};var d=dojox.fx._split(a);if(a.unhide){dojo.connect(d,"onEnd",null,function(){dojo.style(b,{opacity:"1"})})}else{dojo.connect(d,"onPlay",null,function(){dojo.style(b,{opacity:"0"})})}return d},converge:function(a){a.unhide=true;return dojox.fx.explode(a)},disintegrate:function(a){var b=a.node=dojo.byId(a.node);a.rows=a.rows||5;a.columns=a.columns||5;a.duration=a.duration||1500;a.interval=a.interval||a.duration/(a.rows+a.columns*2);a.distance=a.distance||1.5;a.random=a.random||0;if(typeof a.fade=="undefined"){a.fade=true}var g=Math.abs(a.random),f=a.duration-(a.rows+a.columns)*a.interval;a.pieceAnimation=function(q,n,m,k){var j=Math.random()*(a.rows+a.columns)*a.interval,h=q.style,i=(a.reverseOrder||a.distance<0)?((n+m)*a.interval):(((a.rows+a.columns)-(n+m))*a.interval),l=j*g+Math.max(1-g,0)*i,p={};if(a.unhide){p.top={start:(parseInt(h.top)-k.h*a.distance),end:parseInt(h.top)};if(a.fade){p.opacity={start:"0",end:"1"}}}else{p.top={end:(parseInt(h.top)+k.h*a.distance)};if(a.fade){p.opacity={end:"0"}}}var o=dojo.animateProperty({node:q,duration:f,delay:l,easing:(a.easing||(a.unhide?dojo.fx.easing.sinIn:dojo.fx.easing.circIn)),properties:p,beforeBegin:(a.unhide?function(){if(a.fade){dojo.style(q,{opacity:"0"})}h.top=p.top.start+"px"}:undefined)});return o};var d=dojox.fx._split(a);if(a.unhide){dojo.connect(d,"onEnd",d,function(){dojo.style(b,{opacity:"1"})})}else{dojo.connect(d,"onPlay",d,function(){dojo.style(b,{opacity:"0"})})}return d},build:function(a){a.unhide=true;return dojox.fx.disintegrate(a)},shear:function(a){var b=a.node=dojo.byId(a.node);a.rows=a.rows||6;a.columns=a.columns||6;a.duration=a.duration||1000;a.interval=a.interval||0;a.distance=a.distance||1;a.random=a.random||0;if(typeof(a.fade)=="undefined"){a.fade=true}var g=Math.abs(a.random),f=(a.duration-(a.rows+a.columns)*Math.abs(a.interval));a.pieceAnimation=function(z,u,q,w){var v=!(u%2),t=!(q%2),s=Math.random()*f,o=(a.reverseOrder)?(((a.rows+a.columns)-(u+q))*a.interval):((u+q)*a.interval),k=s*g+Math.max(1-g,0)*o,l={},h=z.style;if(a.fade){l.opacity=(a.unhide?{start:"0",end:"1"}:{end:"0"})}if(a.columns==1){v=t}else{if(a.rows==1){t=!v}}var i=parseInt(h.left),p=parseInt(h.top),j=a.distance*w.w,n=a.distance*w.h;if(a.unhide){if(v==t){l.left=v?{start:(i-j),end:i}:{start:(i+j),end:i}}else{l.top=v?{start:(p+n),end:p}:{start:(p-n),end:p}}}else{if(v==t){l.left=v?{end:(i-j)}:{end:(i+j)}}else{l.top=v?{end:(p+n)}:{end:(p-n)}}}var m=dojo.animateProperty({node:z,duration:f,delay:k,easing:(a.easing||dojo.fx.easing.sinInOut),properties:l,beforeBegin:(a.unhide?function(){if(a.fade){h.opacity="0"}if(v==t){h.left=l.left.start+"px"}else{h.top=l.top.start+"px"}}:undefined)});return m};var d=dojox.fx._split(a);if(a.unhide){dojo.connect(d,"onEnd",d,function(){dojo.style(b,{opacity:"1"})})}else{dojo.connect(d,"onPlay",d,function(){dojo.style(b,{opacity:"0"})})}return d},unShear:function(a){a.unhide=true;return dojox.fx.shear(a)},pinwheel:function(a){var b=a.node=dojo.byId(a.node);a.rows=a.rows||4;a.columns=a.columns||4;a.duration=a.duration||1000;a.interval=a.interval||0;a.distance=a.distance||1;a.random=a.random||0;if(typeof a.fade=="undefined"){a.fade=true}var f=(a.duration-(a.rows+a.columns)*Math.abs(a.interval));a.pieceAnimation=function(w,v,u,p){var o=p.h/a.rows,l=p.w/a.columns,k=!(v%2),j=!(u%2),h=Math.random()*f,q=(a.interval<0)?(((a.rows+a.columns)-(v+u))*a.interval*-1):((v+u)*a.interval),s=h*a.random+Math.max(1-a.random,0)*q,n={},g=w.style;if(a.fade){n.opacity=(a.unhide?{start:0,end:1}:{end:0})}if(a.columns==1){k=!j}else{if(a.rows==1){j=k}}var m=parseInt(g.left),t=parseInt(g.top);if(k){if(j){n.top=a.unhide?{start:t+o*a.distance,end:t}:{start:t,end:t+o*a.distance}}else{n.left=a.unhide?{start:m+l*a.distance,end:m}:{start:m,end:m+l*a.distance}}}if(k!=j){n.width=a.unhide?{start:l*(1-a.distance),end:l}:{start:l,end:l*(1-a.distance)}}else{n.height=a.unhide?{start:o*(1-a.distance),end:o}:{start:o,end:o*(1-a.distance)}}var i=dojo.animateProperty({node:w,duration:f,delay:s,easing:(a.easing||dojo.fx.easing.sinInOut),properties:n,beforeBegin:(a.unhide?function(){if(a.fade){dojo.style(w,"opacity",0)}if(k){if(j){g.top=(t+o*(1-a.distance))+"px"}else{g.left=(m+l*(1-a.distance))+"px"}}else{g.left=m+"px";g.top=t+"px"}if(k!=j){g.width=(l*(1-a.distance))+"px"}else{g.height=(o*(1-a.distance))+"px"}}:undefined)});return i};var d=dojox.fx._split(a);if(a.unhide){dojo.connect(d,"onEnd",d,function(){dojo.style(b,{opacity:"1"})})}else{dojo.connect(d,"play",d,function(){dojo.style(b,{opacity:"0"})})}return d},unPinwheel:function(a){a.unhide=true;return dojox.fx.pinwheel(a)},blockFadeOut:function(a){var f=a.node=dojo.byId(a.node);a.rows=a.rows||5;a.columns=a.columns||5;a.duration=a.duration||1000;a.interval=a.interval||a.duration/(a.rows+a.columns*2);a.random=a.random||0;var d=Math.abs(a.random),b=a.duration-(a.rows+a.columns)*a.interval;a.pieceAnimation=function(n,h,o,m){var l=Math.random()*a.duration,k=(a.reverseOrder)?(((a.rows+a.columns)-(h+o))*Math.abs(a.interval)):((h+o)*a.interval),j=l*d+Math.max(1-d,0)*k,i=dojo.animateProperty({node:n,duration:b,delay:j,easing:(a.easing||dojo.fx.easing.sinInOut),properties:{opacity:(a.unhide?{start:"0",end:"1"}:{start:"1",end:"0"})},beforeBegin:(a.unhide?function(){dojo.style(n,{opacity:"0"})}:function(){n.style.filter=""})});return i};var g=dojox.fx._split(a);if(a.unhide){dojo.connect(g,"onEnd",g,function(){dojo.style(f,{opacity:"1"})})}else{dojo.connect(g,"onPlay",g,function(){dojo.style(f,{opacity:"0"})})}return g},blockFadeIn:function(a){a.unhide=true;return dojox.fx.blockFadeOut(a)}})}dojo.i18n._preloadLocalizations("dojo.nls.",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nl","nl-nl","no","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);